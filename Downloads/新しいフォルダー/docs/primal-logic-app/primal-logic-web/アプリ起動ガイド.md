# Primal Logic アプリ起動ガイド

## 起動方法

### 方法1: エクスプローラーから起動（推奨・一番簡単）

**パス**: `C:\Users\susam\Downloads\新しいフォルダー\docs\primal-logic-app\primal-logic-web`

**手順**:
1. エクスプローラーを開く（Windowsキー + E）
2. アドレスバーに上記パスを貼り付けてEnter
3. `start-dev-server.bat` をダブルクリック
4. ブラウザで `http://localhost:5173` を開く

### 方法2: PowerShellから起動

**パス**: `C:\Users\susam\Downloads\新しいフォルダー\docs\primal-logic-app\primal-logic-web`

**ターミナル**: PowerShell

**コマンド**:
```powershell
cd "C:\Users\susam\Downloads\新しいフォルダー\docs\primal-logic-app\primal-logic-web"
npm run dev
```

**ブラウザ**: `http://localhost:5173` を開く

## トラブルシューティング

### エラー: "npm: コマンドが見つかりません"

**原因**: Node.jsがインストールされていない、またはPATHが設定されていない

**解決方法**:
1. Node.jsをインストール: https://nodejs.org/
2. インストール後、PowerShellを再起動
3. 再度起動を試す

### エラー: "ポート5173が既に使用されています"

**原因**: 既に開発サーバーが起動している

**解決方法**:
1. 既存のコマンドプロンプト/PowerShellウィンドウを閉じる
2. または、別のポートを使用:
   ```powershell
   npm run dev -- --port 5174
   ```

### エラー: "パスが見つかりません"

**原因**: パスが正しくない、またはフォルダが存在しない

**解決方法**:
1. エクスプローラーで以下のパスが存在するか確認:
   ```
   C:\Users\susam\Downloads\新しいフォルダー\docs\primal-logic-app\primal-logic-web
   ```
2. 存在しない場合は、プロジェクトの正しいパスを確認

### エラー: "依存関係がインストールされていません"

**原因**: `node_modules`フォルダが存在しない

**解決方法**:
1. プロジェクトフォルダで以下を実行:
   ```powershell
   npm install
   ```
2. インストール完了後、再度起動を試す

## 開発サーバーの停止方法

**ターミナル**: コマンドプロンプト/PowerShell

**コマンド**: `Ctrl + C` を押す（またはウィンドウを閉じる）

## 環境変数の設定

アプリを正しく動作させるため、以下の環境変数を設定する必要があります:

1. **`.env`ファイルを作成**
   - プロジェクトフォルダ（`primal-logic-web`）に `.env` ファイルを作成

2. **環境変数を設定**
   ```
   VITE_GEMINI_API_KEY=your_gemini_api_key_here
   VITE_SUPABASE_URL=your_supabase_url_here
   VITE_SUPABASE_ANON_KEY=your_supabase_anon_key_here
   VITE_REPLICATE_API_TOKEN=your_replicate_api_token_here
   ```

3. **環境変数の取得方法**
   - `VITE_GEMINI_API_KEY`: Google AI Studio (https://aistudio.google.com/) で取得
   - `VITE_SUPABASE_URL`: Supabase Dashboard → Settings → API → Project URL
   - `VITE_SUPABASE_ANON_KEY`: Supabase Dashboard → Settings → API → Publishable key
   - `VITE_REPLICATE_API_TOKEN`: Replicate (https://replicate.com/) で取得（オプション）

## プロジェクト構造

```
primal-logic-web/
├── src/                    # ソースコード
├── public/                 # 静的ファイル
├── .env                    # 環境変数（要作成）
├── package.json            # 依存関係
├── start-dev-server.bat    # 起動用バッチファイル
└── アプリ起動ガイド.md      # このファイル
```

## よくある質問

### Q: ブラウザが自動で開かない

**解決方法**: 手動で `http://localhost:5173` にアクセス

### Q: 変更が反映されない

**解決方法**: ブラウザをリロード（F5）。ホットリロードが有効になっているはずです。

### Q: エラーが表示される

**解決方法**: ブラウザの開発者ツール（F12）でコンソールエラーを確認

### Q: 別のポートで起動したい

**ターミナル**: PowerShell

**コマンド**:
```powershell
cd "C:\Users\susam\Downloads\新しいフォルダー\docs\primal-logic-app\primal-logic-web"
npm run dev -- --port 5174
```

---

# 移行機能の要件

## 目的

カーニボアダイエット開始から30日間の移行期間をサポートし、症状に応じた対処法を提供することで、ユーザーの成功率を向上させる。SNS集客で「アプリで移行をサポート」を訴求し、移行期間中のユーザー体験を向上させる。

## 移行期間とは

カーニボアダイエットを開始してから、体が完全に適応するまでの期間。一般的に**30日間**とされている。

### なぜ30日間なのか

- **代謝適応**: 体が糖質から脂質を主なエネルギー源に切り替えるのに時間がかかる
- **電解質バランス**: カーニボアでは炭水化物が減るため、水分保持が変わり、電解質（ナトリウム、マグネシウム、カリウム）の必要量が増える
- **消化器系の適応**: 高タンパク・高脂質の食事に消化器系が慣れるまで時間がかかる
- **個人差**: 体質、健康状態、移行前の食事によって期間は異なる（20-40日程度）

## 要件定義

### 1. 症状の種類と対処法

#### 1.1 症状データベース

**必要な症状**:
- 頭痛（電解質不足、特にナトリウム）
- こむら返り（マグネシウム不足）
- 疲労感（エネルギー不足、電解質不足）
- 便秘（マグネシウム・水分不足）
- 下痢（脂質過多）
- その他（調査が必要）:
  - めまい
  - 不眠
  - イライラ
  - 集中力低下
  - 筋肉痛
  - 関節痛
  - 口臭
  - 体臭
  - 皮膚の変化
  - 生理不順（女性）

**各症状に対する対処法**:
- 栄養素調整（ナトリウム、マグネシウム、カリウム、脂質、水分）
- 推奨食品リスト
- 説明文（なぜその対処法が有効か）

#### 1.2 症状の自動検出・提案

**要件**:
- ユーザーが「今日頭痛がする」と話しかけると、AIが自動的に症状を検出
- 対応する栄養素調整を自動提案
- 栄養素目標値の自動調整（例：頭痛→ナトリウム+2000mg）

### 2. 日次チェックイン

**要件**:
- 移行期間中、毎日自動でチェックインを促す通知
- 簡単な質問（「今日の調子は？」「症状はある？」）
- AIが回答を解析し、必要に応じて栄養素調整を提案

### 3. 症状の記録・追跡

**要件**:
- 症状の記録画面（簡単な選択式）
- 症状の履歴表示（グラフ化）
- 症状パターンの分析（AIが自動分析）

### 4. 移行期間の進捗可視化

**要件**:
- 進捗グラフ（日次）
- 症状の推移グラフ
- 栄養素調整の履歴
- 移行期間終了後の成功体験の可視化

### 5. 栄養素目標値の自動調整

**要件**:
- 症状に応じて、栄養素目標値を自動調整
- 例：頭痛→ナトリウム+2000mg、こむら返り→マグネシウム+200mg

### 6. 個人差の考慮

**要件**:
- 30日固定ではなく、個人差を考慮（20-40日程度）
- 移行期間の開始日を設定可能
- 移行期間の終了を手動で設定可能

### 7. UI/UX要件

**要件**:
- 移行期間のサポート機能が目立つUI
- 症状の記録が簡単（音声入力対応）
- 進捗が見える（グラフ、バナー）

### 8. 集客・マーケティング要件

**要件**:
- SNS集客で「アプリで移行をサポート」を訴求
- 移行期間中のユーザー体験の向上
- 移行期間終了後の成功体験の可視化

## 参考情報源

- Dr. Ken Berry
- Dr. Shawn Baker
- Dr. Paul Saladino
- Dr. Anthony Chaffee
- Dr. Bart Kay
- Dr. Paul Mason

## 実装優先順位

### Phase 1: 症状の自動検出・提案（最優先）
- AIチャットで症状を話しかけると自動検出
- 栄養素目標値の自動調整を提案

### Phase 2: 日次チェックイン
- 移行期間中の自動チェックイン機能

### Phase 3: 症状の記録・追跡
- 症状の記録画面
- 症状の履歴表示（グラフ化）

### Phase 4: 移行期間の進捗可視化強化
- 進捗グラフ（日次）
- 症状の推移グラフ
- 栄養素調整の履歴

### Phase 5: 個人差の考慮
- 移行期間の開始日・終了日を手動で設定可能

## 注意事項

- 症状データベースは、カーニボア専門家の情報を基に作成
- 個人差を考慮し、30日固定ではなく柔軟に対応
- 症状が重い場合は、医療機関への受診を推奨

