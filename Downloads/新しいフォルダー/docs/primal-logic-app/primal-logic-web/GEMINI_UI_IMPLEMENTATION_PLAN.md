# Gemini UI実装計画

> 作成日: 2025-01-27  
> 目的: GeminiのUIと機能を参考に、CarnivOSのAI機能を強化する

---

## 📋 Gemini UIの特徴

### 1. 入力エリア
- **大きな入力フィールド**: プレースホルダー「Gemini 3 に相談」
- **"+"ボタン**: ファイルアップロード、ドライブから追加、フォト、コードをインポート、NotebookLM
- **"ツール"ボタン**: Deep Research、動画を作成、画像を作成、Canvas、ガイド付き学習
- **"思考モード"ドロップダウン**: 高速モード、思考モード、Pro
- **マイクアイコン**: 音声入力

### 2. クイックアクションボタン
- 画像の作成
- 動画の作成
- 何でも書く
- 知識習得サポート
- 一日を盛り上げる

---

## 🎯 実装すべき機能（優先順位順）

### Phase 1: Gemini風UIの基本構造（最優先）

#### 1.1 入力エリアの再設計
- **大きな入力フィールド**: 現在のチャットUIをGemini風に変更
- **プレースホルダー**: 「CarnivOS に相談」または「カーニボス に相談」
- **モバイル対応**: スマホでも使いやすいレスポンシブデザイン

#### 1.2 ツールメニューの実装
- **"+"ボタン**: ファイルアップロード、フォト（既存の写真解析）、コードをインポート
- **"ツール"ボタン**: 以下のツールを実装
  - **Deep Research**: カーニボア関連の深いリサーチ（Gemini APIを使用）
  - **動画を作成**: 将来的に実装（Veo 3.1相当）
  - **画像を作成**: 将来的に実装（Imagen相当）
  - **Canvas**: 将来的に実装
  - **ガイド付き学習**: カーニボア移行ガイド、栄養素学習など

#### 1.3 思考モード選択
- **高速モード**: 素早く回答（Gemini Flash使用）
- **思考モード**: 複雑な問題を解決（Gemini Pro使用、より深い思考）
- **Pro**: 高度な数学とコードについて、さらに深く思考（Gemini Pro 2.0使用）

#### 1.4 クイックアクションボタン
- **画像の作成**: 将来的に実装
- **動画の作成**: 将来的に実装
- **何でも書く**: 既存のAIチャット機能
- **知識習得サポート**: カーニボア関連の知識を学習
- **一日を盛り上げる**: モチベーション向上のメッセージ

---

### Phase 2: ツール機能の実装（優先度: 高）

#### 2.1 Deep Research（最優先）
- **目的**: カーニボア関連の深いリサーチ
- **実装方法**: Gemini APIを使用して、複数の情報源から情報を収集
- **用途**: 
  - 特定の栄養素についての深い調査
  - カーニボア専門家の主張の検証
  - マーケティングの闇の暴露（ずんだもん動画ネタ）

#### 2.2 ガイド付き学習（優先度: 高）
- **目的**: カーニボア移行ガイド、栄養素学習など
- **実装方法**: 既存の移行ガイド機能を拡張
- **用途**:
  - カーニボア移行期間の詳細ガイド
  - 栄養素の学習（ビタミン、ミネラルなど）
  - 専門家の主張の学習

#### 2.3 ファイルアップロード（優先度: 中）
- **目的**: ユーザーがファイルをアップロードしてAIに分析してもらう
- **実装方法**: HTML5 File APIを使用
- **用途**:
  - 血液検査結果の分析
  - 食事記録のCSVファイルの分析
  - 画像ファイルの分析（既存の写真解析機能と統合）

#### 2.4 コードをインポート（優先度: 低）
- **目的**: 将来的に実装（現在は不要）

#### 2.5 動画を作成 / 画像を作成（優先度: 低）
- **目的**: 将来的に実装（Veo 3.1、Imagen相当）

#### 2.6 Canvas（優先度: 低）
- **目的**: 将来的に実装

---

### Phase 3: モバイル対応（優先度: 高）

#### 3.1 レスポンシブデザイン
- **PC**: Gemini風の大きな入力フィールド
- **スマホ**: モバイルファーストで、タッチフレンドリーなUI
- **タブレット**: PCとスマホの中間的なデザイン

#### 3.2 ツールメニューのモバイル対応
- **ドロップダウンメニュー**: モバイルではボトムシート形式
- **クイックアクションボタン**: モバイルでは横スクロール可能

---

## 🛠️ 実装の具体的方法

### 1. Gemini風UIコンポーネントの作成

#### 1.1 `GeminiStyleChatInput.tsx`の作成
```typescript
// 大きな入力フィールド
// "+"ボタン（ファイルアップロード、フォトなど）
// "ツール"ボタン（Deep Research、ガイド付き学習など）
// "思考モード"ドロップダウン（高速モード、思考モード、Pro）
// マイクアイコン（音声入力）
```

#### 1.2 `ToolMenu.tsx`の作成
```typescript
// "+"ボタンのドロップダウンメニュー
// - ファイルアップロード
// - フォト（既存の写真解析機能）
// - コードをインポート（将来的に実装）
```

#### 1.3 `ToolMenuAdvanced.tsx`の作成
```typescript
// "ツール"ボタンのドロップダウンメニュー
// - Deep Research
// - 動画を作成（将来的に実装）
// - 画像を作成（将来的に実装）
// - Canvas（将来的に実装）
// - ガイド付き学習
```

#### 1.4 `ThinkingModeSelector.tsx`の作成
```typescript
// 思考モード選択ドロップダウン
// - 高速モード（Gemini Flash）
// - 思考モード（Gemini Pro）
// - Pro（Gemini Pro 2.0）
```

#### 1.5 `QuickActionButtons.tsx`の作成
```typescript
// クイックアクションボタン
// - 画像の作成
// - 動画の作成
// - 何でも書く
// - 知識習得サポート
// - 一日を盛り上げる
```

---

### 2. ツール機能の実装

#### 2.1 Deep Research機能
- **ファイル**: `src/services/deepResearchService.ts`
- **実装方法**: Gemini APIを使用して、複数の情報源から情報を収集
- **プロンプト**: カーニボア関連の深いリサーチを実行

#### 2.2 ガイド付き学習機能
- **ファイル**: `src/services/guidedLearningService.ts`
- **実装方法**: 既存の移行ガイド機能を拡張
- **プロンプト**: カーニボア移行期間、栄養素学習など

#### 2.3 ファイルアップロード機能
- **ファイル**: `src/components/FileUploadModal.tsx`
- **実装方法**: HTML5 File APIを使用
- **対応ファイル**: 画像、CSV、テキストファイル

---

### 3. 思考モードの実装

#### 3.1 思考モードの設定
- **ファイル**: `src/hooks/useSettings.ts`に`thinkingMode`を追加
- **値**: `'fast' | 'thinking' | 'pro'`
- **デフォルト**: `'fast'`

#### 3.2 AIサービスでの思考モード適用
- **ファイル**: `src/services/aiService.ts`
- **実装方法**: 思考モードに応じて、使用するGeminiモデルを変更
  - `'fast'`: Gemini Flash
  - `'thinking'`: Gemini Pro
  - `'pro'`: Gemini Pro 2.0

---

## 📱 モバイル対応

### 1. レスポンシブデザイン
- **PC**: Gemini風の大きな入力フィールド（幅: 100%、最大幅: 800px）
- **スマホ**: モバイルファーストで、タッチフレンドリーなUI（幅: 100%）
- **タブレット**: PCとスマホの中間的なデザイン（幅: 100%、最大幅: 600px）

### 2. ツールメニューのモバイル対応
- **PC**: ドロップダウンメニュー
- **スマホ**: ボトムシート形式（画面下部からスライドアップ）

### 3. クイックアクションボタンのモバイル対応
- **PC**: 横並び
- **スマホ**: 横スクロール可能

---

## 🎯 実装優先順位（3ナイス判断）

### 最優先（今すぐ実装）
1. **Gemini風UIの基本構造**: 入力エリアの再設計、ツールメニューの実装
2. **思考モード選択**: 高速モード、思考モード、Proの実装
3. **Deep Research機能**: カーニボア関連の深いリサーチ

### 高優先度（次に実装）
4. **ガイド付き学習機能**: カーニボア移行ガイド、栄養素学習
5. **ファイルアップロード機能**: 血液検査結果、食事記録のCSVファイルの分析
6. **モバイル対応**: レスポンシブデザイン、ボトムシート形式のツールメニュー

### 中優先度（将来的に実装）
7. **クイックアクションボタン**: 画像の作成、動画の作成など
8. **コードをインポート**: 将来的に実装

### 低優先度（将来的に実装）
9. **動画を作成 / 画像を作成**: Veo 3.1、Imagen相当
10. **Canvas**: 将来的に実装

---

## 🚀 実装開始

**推奨順序**:
1. **Gemini風UIの基本構造**（入力エリアの再設計）
2. **思考モード選択**（高速モード、思考モード、Pro）
3. **Deep Research機能**（カーニボア関連の深いリサーチ）
4. **ツールメニューの実装**（"+"ボタン、"ツール"ボタン）
5. **モバイル対応**（レスポンシブデザイン、ボトムシート形式）

---

## 📝 注意事項

- **PCの画面だけでスマホ用にはどうするか**: レスポンシブデザインで対応。モバイルファーストで実装し、PCで拡張する。
- **ツールは何も出すものないか？今新たに作る？**: Deep Researchとガイド付き学習を新たに実装。既存の写真解析機能は"+"ボタンに統合。
- **Geminiとの会話から新たに作る機能・変更内容**: Phase 1-3の機能を実装。特にDeep Researchとガイド付き学習が重要。

