# Phase 1: 移行期間サポート機能 - 手動チェック手順（詳細版）

> 自動チェックで自信がない部分のみを手動で確認してください。
> 各ステップで何をクリックし、何を確認するかを具体的に記載しています。

---

## 前提条件

1. 開発サーバーが起動している（`npm run dev`）
2. ブラウザで `http://localhost:5174` を開いている
3. ブラウザの開発者ツール（F12）を開いている

---

## チェック1: ローカルストレージの設定と読み込み

### 手順（詳細）

1. **ブラウザで `http://localhost:5174` を開く**

2. **開発者ツールを開く**
   - Windows: `F12`キーを押す
   - Mac: `Cmd + Option + I`キーを押す

3. **「Application」タブを開く**（Chromeの場合）
   - 開発者ツールの上部にあるタブから「Application」をクリック
   - Firefoxの場合は「ストレージ」タブを開く

4. **左側のメニューから「Local Storage」を展開**
   - 「Local Storage」の左側にある「▶」をクリックして展開
   - `http://localhost:5174` をクリック

5. **新しいキーを追加**
   - 右側のテーブルの下部にある空の行をクリック
   - 「キー」列に以下を入力: `primal_logic_user_profile`
   - 「値」列に以下を入力（コピペ推奨）:
     ```json
     {"gender":"male","goal":"healing","metabolicStatus":"transitioning","daysOnCarnivore":15,"carnivoreStartDate":"2025-01-05"}
     ```
   - Enterキーを押して保存

6. **ページをリロード**
   - `F5`キーを押す、またはブラウザのリロードボタンをクリック

7. **確認**
   - ページが正常に読み込まれること
   - コンソール（Consoleタブ）にエラーが表示されないこと

**期待結果**: ページがリロードされ、エラーが発生しない

**確認方法**: 
- ページが白い画面にならないこと
- コンソールに赤いエラーメッセージが表示されないこと

---

## チェック2: 移行期間バナーの表示確認

### 手順（詳細）

1. **ローカルストレージを設定**（チェック1の手順5まで実行）

2. **ページをリロード**（チェック1の手順6）

3. **HomeScreenの上部を確認**
   - ページの最上部（ヘッダーの下）に青いバナーが表示されているか確認
   - バナーの位置: ページの上部、栄養素ゲージの上

4. **バナーの内容を確認**
   - バナーの左側に「ℹ️」アイコンが表示されているか確認
   - バナーの中央に以下のテキストが表示されているか確認:
     - 「移行期間: 15/30日（50%）」
     - 「適応モード: 塩分目標を増量中」
     - 「あと15日で移行期間終了」

5. **バナーの色を確認**
   - バナーの背景色が青色（`#3b82f6`）であること
   - テキストが白色であること

**期待結果**:
- 青いバナーが表示される
- バナーに「移行期間: 15/30日（50%）」と表示される
- バナーに「適応モード: 塩分目標を増量中」と表示される
- バナーに「あと15日で移行期間終了」と表示される

**確認方法**: 
- 目視で確認
- スクリーンショットを撮って保存（必要に応じて）

**スクリーンショット撮影**: 
- Windows: `Win + Shift + S`で範囲選択
- Mac: `Cmd + Shift + 4`で範囲選択

---

## チェック3: 栄養素目標値の動的調整確認

### 手順（詳細）

1. **ローカルストレージを設定**（チェック1の手順5まで実行）

2. **ページをリロード**（チェック1の手順6）

3. **ナトリウムゲージを確認**
   - HomeScreenで「ナトリウム」というラベルのゲージを探す
   - ゲージの表示形式: 「現在値 / 目標値 単位」（例: 「0.0 / 7000.0 mg」）
   - 「/」の後の数値（目標値）を確認
   - **期待値: 7000mg**（基本5000mg + 2000mg）

4. **マグネシウムゲージを確認**
   - HomeScreenで「マグネシウム」というラベルのゲージを探す
   - ゲージの表示形式: 「現在値 / 目標値 単位」（例: 「0.0 / 800.0 mg」）
   - 「/」の後の数値（目標値）を確認
   - **期待値: 800mg**（基本600mg + 200mg）

5. **カリウムゲージを確認**
   - HomeScreenで「カリウム」というラベルのゲージを探す
   - ゲージの表示形式: 「現在値 / 目標値 単位」（例: 「0.0 / 5000.0 mg」）
   - 「/」の後の数値（目標値）を確認
   - **期待値: 5000mg**（基本4500mg + 500mg）

**期待結果**:
- ナトリウムゲージ: 目標値が **7000mg** と表示される
- マグネシウムゲージ: 目標値が **800mg** と表示される
- カリウムゲージ: 目標値が **5000mg** と表示される

**確認方法**: 
- 各ゲージの「/」の後の数値を確認
- 数値が期待値と一致するか確認
- 不一致の場合は、コンソールでエラーを確認

**注意**: 
- ゲージの表示形式が「現在値 / 目標値 単位」であることを確認
- 数値は小数点以下が表示される場合がある（例: 7000.0）

---

## チェック4: 移行期間終了後の栄養素目標値確認

### 手順（詳細）

1. **開発者ツールを開く**（F12キー）

2. **「Application」タブを開く**

3. **ローカルストレージの値を変更**
   - 左側のメニューから「Local Storage」→ `http://localhost:5174` を選択
   - 右側のテーブルで `primal_logic_user_profile` の行を探す
   - 「値」列をダブルクリックして編集可能にする
   - 以下の値に変更（コピペ推奨）:
     ```json
     {"gender":"male","goal":"healing","metabolicStatus":"adapted","daysOnCarnivore":35,"carnivoreStartDate":"2024-12-15"}
     ```
   - Enterキーを押して保存

4. **ページをリロード**（F5キー）

5. **ナトリウムゲージを確認**
   - HomeScreenで「ナトリウム」というラベルのゲージを探す
   - 「/」の後の数値（目標値）を確認
   - **期待値: 5000mg**（基本値に戻る）

6. **マグネシウムゲージを確認**
   - HomeScreenで「マグネシウム」というラベルのゲージを探す
   - 「/」の後の数値（目標値）を確認
   - **期待値: 600mg**（基本値に戻る）

7. **カリウムゲージを確認**
   - HomeScreenで「カリウム」というラベルのゲージを探す
   - 「/」の後の数値（目標値）を確認
   - **期待値: 4500mg**（基本値に戻る）

**期待結果**:
- ナトリウムゲージ: 目標値が **5000mg** と表示される
- マグネシウムゲージ: 目標値が **600mg** と表示される
- カリウムゲージ: 目標値が **4500mg** と表示される

**確認方法**: 
- 各ゲージの「/」の後の数値を確認
- 数値が期待値と一致するか確認

---

## チェック5: 移行期間バナーの非表示確認

### 手順（詳細）

1. **ローカルストレージを設定**（チェック4の手順3まで実行）

2. **ページをリロード**（チェック4の手順4）

3. **HomeScreenの上部を確認**
   - ページの最上部（ヘッダーの下）に青いバナーが表示されていないか確認
   - バナーが表示されていないことを確認

**期待結果**: 移行期間バナーが表示されない

**確認方法**: 
- 目視で確認
- ページの上部に青いバナーがないことを確認

---

## チェック6: 移行期間ガイド画面（モーダル）の表示確認

### 手順（詳細）

1. **ローカルストレージを設定**（チェック1の手順5まで実行）

2. **ページをリロード**（チェック1の手順6）

3. **移行期間バナーを探す**
   - HomeScreenの上部に青いバナーが表示されていることを確認

4. **バナーをクリック**
   - バナーの任意の場所をクリック（左クリック）
   - バナー全体がクリック可能であることを確認

5. **モーダルが表示されることを確認**
   - 画面全体が暗くなる（半透明の黒い背景）
   - 画面中央に白いモーダルが表示される

6. **モーダルの内容を確認**
   - モーダルの上部に「移行期間ガイド」というタイトルが表示される
   - モーダルの右上に「×」ボタンが表示される

**期待結果**:
- モーダルが画面中央に表示される
- モーダルの背景が暗くなる（半透明の黒）
- モーダルに「移行期間ガイド」というタイトルが表示される
- モーダルの右上に「×」ボタンが表示される

**確認方法**: 
- 目視で確認
- モーダルが画面中央に配置されていることを確認

---

## チェック7: モーダルのセクション1（移行期間の説明）確認

### 手順（詳細）

1. **モーダルを開く**（チェック6の手順1-5まで実行）

2. **モーダル内の「移行期間について」セクションを探す**
   - モーダルの上部（タイトルの下）に「移行期間について」という見出しがあることを確認

3. **説明文を確認**
   - 「移行期間について」の下に説明文が表示されていることを確認
   - 説明文の内容: 「最初の30日間は、体が脂質代謝に切り替わる重要な期間です。この期間中は、電解質（ナトリウム、マグネシウム、カリウム）の目標値が自動的に増量されます。」

4. **進捗バーを確認**
   - 説明文の下に進捗バーが表示されていることを確認
   - 進捗バーの上に「進捗: 15/30日」と表示される
   - 進捗バーの右側に「50%」と表示される
   - 進捗バーが青色で50%まで塗りつぶされていることを確認

**期待結果**:
- 「移行期間について」という見出しが表示される
- 説明文が表示される
- 進捗バーが表示される
- 進捗バーに「進捗: 15/30日」と表示される
- 進捗バーに「50%」と表示される

**確認方法**: 
- 目視で確認
- 進捗バーの塗りつぶしが50%であることを確認

---

## チェック8: モーダルのセクション2（症状と対処法）確認

### 手順（詳細）

1. **モーダルを開く**（チェック6の手順1-5まで実行）

2. **モーダルをスクロール**
   - モーダル内を下にスクロール（マウスホイールを下に回す、またはスクロールバーを下にドラッグ）

3. **「よくある症状と対処法」セクションを探す**
   - 「移行期間について」の下に「よくある症状と対処法」という見出しがあることを確認

4. **症状ボタンを確認**
   - 「よくある症状と対処法」の下に5つのボタンが表示されていることを確認
   - 各ボタンに以下のテキストが表示されていることを確認:
     1. 「頭痛」- 「移行期間中によくある症状」
     2. 「こむら返り」- 「マグネシウム不足の可能性があります」
     3. 「疲労感」- 「エネルギー不足の可能性があります」
     4. 「便秘」- 「マグネシウムと水分不足の可能性があります」
     5. 「下痢」- 「脂質の摂取量を調整する必要があります」

**期待結果**: 5つの症状ボタンがすべて表示される

**確認方法**: 
- 目視で確認
- 各ボタンのテキストが正しく表示されていることを確認

---

## チェック9: 症状を選択して対処法が表示される確認

### 手順（詳細）

1. **モーダルを開く**（チェック6の手順1-5まで実行）

2. **モーダルをスクロール**（チェック8の手順2）

3. **「頭痛」ボタンを探す**
   - 「よくある症状と対処法」セクションで「頭痛」というボタンを探す

4. **「頭痛」ボタンをクリック**
   - 「頭痛」ボタンを左クリック

5. **対処法が表示されることを確認**
   - 「頭痛」ボタンの下に新しいセクションが表示される
   - 新しいセクションの背景色が薄いグレー（`#f9fafb`）であることを確認

6. **対処法の内容を確認**
   - 「頭痛の対処法」という見出しが表示される
   - 「ナトリウム +2000mg」というテキストが表示される
   - 説明文が表示される: 「ナトリウムを+2000mg増やすことで、電解質バランスが改善されます」
   - 「推奨食品:」という見出しが表示される
   - 推奨食品として「塩」「肉汁」「骨スープ」が表示される（3つのタグ形式）

**期待結果**:
- 「頭痛の対処法」という見出しが表示される
- 「ナトリウム +2000mg」と表示される
- 説明文が表示される
- 「推奨食品:」という見出しが表示される
- 推奨食品として「塩」「肉汁」「骨スープ」が表示される

**確認方法**: 
- 目視で確認
- 対処法セクションが正しく表示されることを確認

---

## チェック10: 他の症状の対処法確認

### 手順（詳細）

1. **モーダルを開く**（チェック6の手順1-5まで実行）

2. **モーダルをスクロール**（チェック8の手順2）

3. **「こむら返り」ボタンをクリック**
   - 「こむら返り」ボタンを左クリック

4. **対処法を確認**
   - 「こむら返りの対処法」という見出しが表示される
   - 「マグネシウム +200mg」と表示される
   - 説明文が表示される

5. **「疲労感」ボタンをクリック**
   - 「疲労感」ボタンを左クリック

6. **対処法を確認**
   - 「疲労感の対処法」という見出しが表示される
   - 「脂質 +50g」と表示される
   - 「ナトリウム +1000mg」と表示される
   - 説明文が表示される

**期待結果**:
- 「こむら返りの対処法」が表示され、「マグネシウム +200mg」と表示される
- 「疲労感の対処法」が表示され、「脂質 +50g」「ナトリウム +1000mg」と表示される

**確認方法**: 
- 目視で確認
- 各症状の対処法が正しく表示されることを確認

---

## チェック11: モーダルのセクション3（推奨食品）確認

### 手順（詳細）

1. **モーダルを開く**（チェック6の手順1-5まで実行）

2. **モーダルをスクロール**
   - モーダル内を下にスクロール（マウスホイールを下に回す、またはスクロールバーを下にドラッグ）

3. **「推奨食品」セクションを探す**
   - 「よくある症状と対処法」の下に「推奨食品」という見出しがあることを確認

4. **推奨食品のカテゴリを確認**
   - 「推奨食品」の下に4つのカテゴリが表示されていることを確認
   - 各カテゴリの内容を確認:
     1. **内臓肉**: 「レバー、腎臓、心臓」
     2. **脂身の多い肉**: 「リブアイ、バラ肉」
     3. **卵**: 「特に卵黄」
     4. **魚**: 「サーモン、マグロ」

**期待結果**: 4つのカテゴリが表示される

**確認方法**: 
- 目視で確認
- 各カテゴリの内容が正しく表示されていることを確認

---

## チェック12: モーダルの閉じる機能確認

### 手順（詳細）

1. **モーダルを開く**（チェック6の手順1-5まで実行）

2. **「×」ボタンを探す**
   - モーダルの右上に「×」ボタンがあることを確認

3. **「×」ボタンをクリック**
   - 「×」ボタンを左クリック

4. **モーダルが閉じることを確認**
   - モーダルが消える
   - 背景の暗い部分が消える
   - HomeScreenが表示される

5. **再度モーダルを開く**
   - 移行期間バナーをクリック

6. **モーダルの背景をクリック**
   - モーダルの外側（暗い部分）を左クリック

7. **モーダルが閉じることを確認**
   - モーダルが消える
   - 背景の暗い部分が消える
   - HomeScreenが表示される

**期待結果**: 
- 「×」ボタンをクリックするとモーダルが閉じる
- モーダルの背景をクリックするとモーダルが閉じる

**確認方法**: 
- 目視で確認
- モーダルが正しく閉じることを確認

---

## チェック13: 手動オーバーライド機能（forceAdaptationMode）確認

### 手順（詳細）

1. **開発者ツールを開く**（F12キー）

2. **「Application」タブを開く**

3. **ローカルストレージの値を変更**
   - 左側のメニューから「Local Storage」→ `http://localhost:5174` を選択
   - 右側のテーブルで `primal_logic_user_profile` の行を探す
   - 「値」列をダブルクリックして編集可能にする
   - 以下の値に変更（コピペ推奨）:
     ```json
     {"gender":"male","goal":"healing","metabolicStatus":"adapted","daysOnCarnivore":35,"carnivoreStartDate":"2024-12-15","forceAdaptationMode":true}
     ```
   - Enterキーを押して保存

4. **ページをリロード**（F5キー）

5. **移行期間バナーが表示されることを確認**
   - HomeScreenの上部に青いバナーが表示される（移行期間終了後でも）

6. **栄養素目標値を確認**
   - ナトリウムゲージ: 目標値が **7000mg** と表示される
   - マグネシウムゲージ: 目標値が **800mg** と表示される
   - カリウムゲージ: 目標値が **5000mg** と表示される

**期待結果**: 
- 移行期間バナーが表示される（移行期間終了後でも）
- 栄養素目標値が移行期間中の値になる

**確認方法**: 
- 目視で確認
- 各ゲージの目標値を確認

---

## チェック14: コンソールエラーの確認

### 手順（詳細）

1. **開発者ツールを開く**（F12キー）

2. **「Console」タブを開く**
   - 開発者ツールの上部にあるタブから「Console」をクリック

3. **コンソールをクリア**
   - コンソールの上部にある「🚫」アイコン（クリアボタン）をクリック
   - または、コンソール内で右クリック → 「Clear console」を選択

4. **ページをリロード**（F5キー）

5. **コンソールを確認**
   - コンソールに赤いエラーメッセージが表示されていないか確認
   - エラーメッセージの例:
     - `Error: ...`
     - `Uncaught ...`
     - `TypeError: ...`

**期待結果**: コンソールにエラーメッセージが表示されない

**確認方法**: 
- コンソールを確認
- 赤いエラーメッセージがないことを確認

**注意**: 
- 警告（黄色のメッセージ）は問題ない場合があります
- エラー（赤いメッセージ）のみを確認してください

---

## チェック15: ネットワークエラーの確認

### 手順（詳細）

1. **開発者ツールを開く**（F12キー）

2. **「Network」タブを開く**
   - 開発者ツールの上部にあるタブから「Network」をクリック

3. **ネットワークログをクリア**
   - ネットワークタブの上部にある「🚫」アイコン（クリアボタン）をクリック

4. **ページをリロード**（F5キー）

5. **ネットワークタブを確認**
   - ネットワークタブにリクエストのリストが表示される
   - 各リクエストの「Status」列を確認
   - 以下のエラーがないか確認:
     - **404**: ファイルが見つからない
     - **500**: サーバーエラー
     - **その他の4xx/5xxエラー**

**期待結果**: 404エラー、500エラーが表示されない

**確認方法**: 
- ネットワークタブを確認
- 各リクエストのステータスコードを確認
- 4xx/5xxエラーがないことを確認

**注意**: 
- 200（成功）や304（キャッシュ）は問題ありません
- 4xx/5xxエラーのみを確認してください

---

## 確認チェックリスト

- [ ] チェック1: ローカルストレージの設定と読み込み
- [ ] チェック2: 移行期間バナーの表示確認
- [ ] チェック3: 栄養素目標値の動的調整確認（ナトリウム7000mg、マグネシウム800mg、カリウム5000mg）
- [ ] チェック4: 移行期間終了後の栄養素目標値確認（基本値に戻る）
- [ ] チェック5: 移行期間バナーの非表示確認
- [ ] チェック6: 移行期間ガイド画面（モーダル）の表示確認
- [ ] チェック7: モーダルのセクション1（移行期間の説明）確認
- [ ] チェック8: モーダルのセクション2（症状と対処法）確認
- [ ] チェック9: 症状を選択して対処法が表示される確認
- [ ] チェック10: 他の症状の対処法確認
- [ ] チェック11: モーダルのセクション3（推奨食品）確認
- [ ] チェック12: モーダルの閉じる機能確認
- [ ] チェック13: 手動オーバーライド機能（forceAdaptationMode）確認
- [ ] チェック14: コンソールエラーの確認
- [ ] チェック15: ネットワークエラーの確認

---

## トラブルシューティング

### バナーが表示されない場合

1. **ローカルストレージを確認**
   - 開発者ツール（F12）→「Application」タブ
   - 「Local Storage」→ `http://localhost:5174`
   - `primal_logic_user_profile` の値が正しいか確認
   - `daysOnCarnivore` が30未満であることを確認

2. **日付形式を確認**
   - `carnivoreStartDate` が `YYYY-MM-DD` 形式であることを確認
   - 例: `"2025-01-05"`（正しい）、`"2025/1/5"`（間違い）

3. **コンソールエラーを確認**
   - 開発者ツール（F12）→「Console」タブ
   - エラーメッセージを確認

### モーダルが開かない場合

1. **バナーが表示されているか確認**
   - HomeScreenの上部に青いバナーが表示されているか確認

2. **バナーをクリックした時のコンソールエラーを確認**
   - 開発者ツール（F12）→「Console」タブ
   - バナーをクリック
   - エラーメッセージが表示されていないか確認

3. **React DevToolsで状態を確認**（上級者向け）
   - React DevToolsをインストール
   - `showTransitionGuide` の状態を確認

### 栄養素目標値が調整されない場合

1. **ローカルストレージを確認**
   - `daysOnCarnivore` が30未満であることを確認
   - `forceAdaptationMode` が `true` に設定されているか確認

2. **コンソールエラーを確認**
   - 開発者ツール（F12）→「Console」タブ
   - エラーメッセージを確認

3. **ページを完全にリロード**
   - `Ctrl + Shift + R`（Windows）または `Cmd + Shift + R`（Mac）でハードリロード

---

## スクリーンショットの撮影方法

### Windows

1. **範囲選択スクリーンショット**
   - `Win + Shift + S` キーを押す
   - 画面が暗くなる
   - マウスで範囲を選択
   - クリップボードに保存される

2. **全画面スクリーンショット**
   - `Win + PrintScreen` キーを押す
   - `Pictures/Screenshots` フォルダに保存される

### Mac

1. **範囲選択スクリーンショット**
   - `Cmd + Shift + 4` キーを押す
   - マウスで範囲を選択
   - デスクトップに保存される

2. **全画面スクリーンショット**
   - `Cmd + Shift + 3` キーを押す
   - デスクトップに保存される

---

## 確認完了後の報告

各チェック項目を確認したら、以下の情報を記録してください：

1. **確認日時**: YYYY-MM-DD HH:MM
2. **確認者**: 名前
3. **確認結果**: 各チェック項目の結果（✅ 成功 / ❌ 失敗）
4. **エラー内容**: エラーが発生した場合は、エラーメッセージを記録
5. **スクリーンショット**: 必要に応じてスクリーンショットを保存
