# リリース前チェックリスト

> 【メモ】将来のリリース前に使用するチェックリスト
> 更新日: 2026-01-03
> 目的: アプリリリース前に確認すべき項目をまとめたチェックリスト

---

## 1. デバッグ機能の確認

### 1.1 デバッグデータの完全性
- [x] **体重データ**: デバッグデータに体重が含まれているか
- [x] **体脂肪率データ**: デバッグデータに体脂肪率が含まれているか
- [x] **睡眠時間データ**: デバッグデータに睡眠時間が含まれているか
- [x] **日記データ**: デバッグデータに日記が含まれているか
- [x] **栄養素データ**: デバッグデータに全ての栄養素が含まれているか
- [x] **Recovery Protocolデータ**: デバッグデータにRecovery Protocolが含まれているか
- [x] **データの一貫性**: デバッグデータが毎回同じデータを生成するか（シード固定）

### 1.2 デバッグモードの動作確認
- [ ] **デバッグモードON/OFF**: 設定画面でデバッグモードを切り替えられるか
- [ ] **デバッグデータの表示**: デバッグモードON時に仮データが表示されるか
- [ ] **デバッグデータの非表示**: デバッグモードOFF時に実際のデータが表示されるか
- [ ] **グラフ表示**: デバッグデータでグラフが正しく表示されるか
- [ ] **統計表示**: デバッグデータで統計が正しく表示されるか

### 1.3 デバッグデータの範囲
- [x] **30日分のデータ**: デバッグデータが30日分生成されるか
- [x] **体重の変動**: デバッグデータで体重が適切に変動しているか（67-72kgの範囲、徐々に減少傾向）
- [x] **体脂肪率の変動**: デバッグデータで体脂肪率が適切に変動しているか（13.5-16.5%の範囲）
- [x] **睡眠時間の変動**: デバッグデータで睡眠時間が適切に変動しているか（5.5-8.5時間の範囲）
- [x] **食事データの多様性**: デバッグデータで様々な食品が含まれているか

---

## 2. 機能の動作確認

### 2.1 基本機能
- [ ] **食品追加**: 食品を追加できるか
- [ ] **栄養素計算**: 栄養素が正しく計算されるか
- [ ] **目標値表示**: 目標値が正しく表示されるか
- [ ] **ゲージ表示**: 栄養素ゲージが正しく表示されるか

### 2.2 データ保存・読み込み
- [ ] **データ保存**: データが正しく保存されるか（Supabase/localStorage）
- [ ] **データ読み込み**: データが正しく読み込まれるか
- [ ] **データ同期**: SupabaseとlocalStorageが正しく同期されるか

### 2.3 画面遷移
- [ ] **画面遷移**: 全ての画面に正しく遷移できるか
- [ ] **戻るボタン**: 戻るボタンが正しく動作するか
- [ ] **ナビゲーション**: 下部ナビゲーションが正しく動作するか

---

## 3. UI/UXの確認

### 3.1 レスポンシブデザイン
- [ ] **モバイル表示**: スマホで正しく表示されるか
- [ ] **タブレット表示**: タブレットで正しく表示されるか
- [ ] **PC表示**: PCで正しく表示されるか

### 3.2 アクセシビリティ
- [ ] **文字サイズ**: 文字サイズが適切か
- [ ] **色のコントラスト**: 色のコントラストが適切か
- [ ] **タッチターゲット**: ボタンがタッチしやすいサイズか（44px以上）

### 3.3 エラーハンドリング
- [ ] **エラーメッセージ**: エラーメッセージが分かりやすいか
- [ ] **ローディング表示**: ローディング表示が適切か
- [ ] **空データ表示**: データがない場合の表示が適切か

---

## 4. パフォーマンスの確認

### 4.1 読み込み速度
- [ ] **初回読み込み**: 初回読み込みが3秒以内か
- [ ] **画面遷移**: 画面遷移が1秒以内か
- [ ] **データ取得**: データ取得が2秒以内か

### 4.2 メモリ使用量
- [ ] **メモリリーク**: メモリリークが発生していないか
- [ ] **データキャッシュ**: データキャッシュが適切に機能しているか

---

## 5. セキュリティの確認

### 5.1 データ保護
- [ ] **認証**: 認証が正しく機能しているか
- [ ] **データ暗号化**: 機密データが暗号化されているか
- [ ] **RLS**: Row Level Securityが正しく設定されているか

### 5.2 入力検証
- [ ] **入力検証**: 不正な入力が拒否されるか
- [ ] **XSS対策**: XSS攻撃を防げているか
- [ ] **SQLインジェクション対策**: SQLインジェクションを防げているか

---

## 6. ブラウザ互換性の確認

### 6.1 主要ブラウザ
- [ ] **Chrome**: Chromeで正しく動作するか
- [ ] **Safari**: Safariで正しく動作するか
- [ ] **Firefox**: Firefoxで正しく動作するか
- [ ] **Edge**: Edgeで正しく動作するか

### 6.2 モバイルブラウザ
- [ ] **iOS Safari**: iOS Safariで正しく動作するか
- [ ] **Android Chrome**: Android Chromeで正しく動作するか

---

## 7. ドキュメントの確認

### 7.1 ユーザードキュメント
- [ ] **README**: READMEが最新か
- [ ] **使い方**: 使い方が記載されているか
- [ ] **FAQ**: FAQが記載されているか

### 7.2 開発者ドキュメント
- [ ] **環境構築**: 環境構築手順が記載されているか
- [ ] **API仕様**: API仕様が記載されているか
- [ ] **デプロイ手順**: デプロイ手順が記載されているか

---

## 8. テストの確認

### 8.1 E2Eテスト（動作テスト）【必須】
**実行方法:**
```bash
cd primal-logic-app/primal-logic-web
npm test
```

**確認項目:**
- [ ] **全てのテストがPassed**: 失敗0件
- [ ] **Flakyテスト**: 50件以下（目標）
- [ ] **テスト実行時間**: 10分以内
- [ ] **主要機能テスト**: test-items-1-28.spec.ts が全てPassed
- [ ] **拡張機能テスト**: test-items-29-120.spec.ts が全てPassed
- [ ] **移行期間機能テスト**: phase1-transition-check.spec.ts が全てPassed
- [ ] **UI要素テスト**: ui-check.spec.ts が全てPassed

**自動実行:**
```bash
npm run test:all  # E2E + Visual Regression Test
```

### 8.2 Visual Regression Test（UI見た目テスト）【必須】
**実行方法:**
```bash
cd primal-logic-app/primal-logic-web
npm run test:visual
```

**確認項目:**
- [ ] **全てのスクリーンショットが一致**: 差分なし
- [ ] **意図しないUI変更がない**: 差分がある場合は意図的な変更か確認
- [ ] **主要画面のスクリーンショット**: ホーム、入力、履歴、Labs、設定画面
- [ ] **モバイル表示**: iPhoneサイズでの表示確認

**初回実行時:**
```bash
npm run test:visual:update  # ベースライン作成
```

### 8.3 iOS版テスト（Maestro）【推奨】
**実行方法:**
```bash
# 1. Maestroのインストール（初回のみ）
iwr https://get.maestro.mobile.dev -UseBasicParsing | iex

# 2. アプリを起動（別ターミナル）
cd primal-logic-app
npx expo start --ios

# 3. テスト実行（別ターミナル）
cd primal-logic-app
npm run test:e2e
```

**確認項目:**
- [ ] **アプリ起動テスト**: app-launch.yaml が成功
- [ ] **ナビゲーションテスト**: navigation-basic.yaml が成功
- [ ] **食品追加テスト**: food-add-basic.yaml が成功
- [ ] **栄養素表示テスト**: nutrients-display.yaml が成功
- [ ] **AIチャットテスト**: ai-chat-basic.yaml が成功

### 8.4 ユニットテスト
- [ ] **テストカバレッジ**: テストカバレッジが80%以上か
- [ ] **テスト実行**: 全てのテストが通るか（`npm run test:unit`）

### 8.5 テスト結果の記録
リリース前に以下を記録:
- [ ] **テスト実行日時**: 
- [ ] **E2Eテスト結果**: Passed / Failed / Flaky
- [ ] **Visual Regression Test結果**: Passed / Failed
- [ ] **iOS版テスト結果**: Passed / Failed
- [ ] **テスト実行時間**: 
- [ ] **発見した問題**: 

---

## 9. リリース準備

### 9.1 ビルド
- [ ] **本番ビルド**: 本番ビルドが成功するか
- [ ] **バンドルサイズ**: バンドルサイズが適切か（1MB以下推奨）

### 9.2 デプロイ
- [ ] **デプロイ環境**: デプロイ環境が準備されているか
- [ ] **環境変数**: 環境変数が正しく設定されているか
- [ ] **ドメイン**: ドメインが設定されているか

### 9.3 モニタリング
- [ ] **エラートラッキング**: エラートラッキングが設定されているか（Sentry等）
- [ ] **アナリティクス**: アナリティクスが設定されているか
- [ ] **ログ**: ログが適切に記録されているか

---

## 10. その他の確認

### 10.1 法的要件
- [ ] **プライバシーポリシー**: プライバシーポリシーが記載されているか
- [ ] **利用規約**: 利用規約が記載されているか
- [ ] **GDPR対応**: GDPRに対応しているか（データエクスポート/削除機能）

### 10.2 マーケティング
- [ ] **アプリ説明**: アプリ説明が記載されているか
- [ ] **スクリーンショット**: スクリーンショットが準備されているか
- [ ] **アイコン**: アプリアイコンが準備されているか

---

## チェックリストの使い方

1. **リリース前**: 全ての項目をチェックする
2. **問題発見時**: 問題を修正してからチェックを入れる
3. **リリース後**: チェックリストを保存して、次回のリリースに活用する

---

## 注意事項

- **デバッグモード**: リリース前にデバッグモードをOFFにすることを忘れない
- **環境変数**: 本番環境の環境変数が正しく設定されているか確認する
- **データバックアップ**: リリース前にデータのバックアップを取る
