# Cursor Local vs Worktree の違いと使い分け

## 概要

Cursorのエージェント設定で選択できる「Local」と「Worktree」の違いと、それぞれを使うべき場面を説明します。

## Local（ローカル）

### 説明
現在のリポジトリ（ローカル）でエージェントが動作します。

### 特徴
- **通常の開発作業で使用**
- 現在開いているリポジトリのディレクトリで直接動作
- シンプルで分かりやすい
- 1つのブランチで作業する場合に最適

### 使用場面
- ✅ 通常の開発作業
- ✅ 1つのブランチで作業する場合
- ✅ シンプルなプロジェクト
- ✅ エージェントを1つだけ使用する場合

## Worktree（ワークツリー）

### 説明
Gitのワークツリー機能を利用し、同じリポジトリの別の作業ツリーでエージェントが動作します。

### 特徴
- **同じリポジトリ内で複数のブランチを同時に作業する際に便利**
- 各エージェントが独立したコードベースのコピー上で作業
- ファイル競合を防ぐために使用
- マルチエージェント機能と組み合わせて使用

### 使用場面
- ✅ 同じリポジトリ内で複数のブランチを同時に作業する場合
- ✅ エージェントごとに独立した作業環境を確保したい場合
- ✅ マルチエージェント機能を使用する場合（最大8つのエージェントを並行実行）
- ✅ ファイル競合を防ぎたい場合

## 使い分けの判断基準

### Localを選ぶべき場合
- 通常の開発作業
- 1つのブランチで作業する場合
- エージェントを1つだけ使用する場合
- シンプルなプロジェクト

### Worktreeを選ぶべき場合
- 同じリポジトリ内で複数のブランチを同時に作業する場合
- マルチエージェント機能を使用する場合
- エージェントごとに独立した作業環境を確保したい場合
- ファイル競合を防ぎたい場合

## 実例

### Localを使用する例
```
プロジェクト: primal-logic-app
ブランチ: main
作業: 通常の機能開発
→ Localを選択
```

### Worktreeを使用する例
```
プロジェクト: primal-logic-app
ブランチ1: main（Local）
ブランチ2: feature/new-feature（Worktree）
作業: 2つのブランチで同時に作業
→ Worktreeを選択して別ブランチで作業
```

## 注意事項

- **通常の開発作業ではLocalを使用**
- Worktreeは複雑な作業環境が必要な場合のみ使用
- マルチエージェント機能を使用する場合、Worktreeを活用することでファイル競合を防げる

## 参考

- Cursor 2.0では、マルチエージェント機能が導入され、最大8つのエージェントを並行して実行可能
- 各エージェントが独立したコードベースのコピー上で作業することで、ファイル競合を防ぐ
- Gitのワークツリー機能を活用して、同じリポジトリ内で複数のブランチを同時に作業可能

