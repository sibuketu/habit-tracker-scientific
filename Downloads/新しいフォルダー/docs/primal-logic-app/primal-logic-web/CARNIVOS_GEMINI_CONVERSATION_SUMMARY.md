# CarnivOS (カーニボス) - Geminiとの会話まとめ

> 作成日: 2025-01-27  
> 目的: Geminiとの会話で決定した事項をCursor/Gravに共有するための完全版まとめ

---

## 📋 目次

1. [アプリの本質的価値と哲学](#1-アプリの本質的価値と哲学)
2. [ブランド・アイデンティティ](#2-ブランドアイデンティティ)
3. [独自機能ロジック](#3-独自機能ロジック)
4. [技術スタックと制約](#4-技術スタックと制約)
5. [UI/UXデザイン原則](#5-uiuxデザイン原則)
6. [開発ロードマップ](#6-開発ロードマップ)
7. [Geminiとの会話で決定した事項](#7-geminiとの会話で決定した事項)

---

## 1. アプリの本質的価値と哲学

### 1.1 「全員が実験体」というミッション

**単なる食事記録アプリではない。特定企業に有利な「短期RCT（ランダム化比較試験）」の嘘を、ユーザーたちの「泥臭い、リアルな長期ログ」でひっくり返すための分散型共同実験場である。**

- **ユーザーの役割**: 「利用者」ではなく、真実を証明する「共同実験体」
- **データの価値**: 疫学調査の記憶バイアスを排除し、毎日の記録がデータとなる
- **コミュニティ感**: 全員が実験体となり、コミュニティ感も醸成される

### 1.2 アンチ・チェリーピッキング

**既存の栄養学がリコピンや生姜などの「一部の薬理作用（毒性への反応）」を「健康」とすり替えるマーケティング（抽出バイアス）を論破し、根源的な生化学に基づいた選択肢を提供する。**

#### マーケティングの闇（ずんだもん動画ネタ）

- **トマトのリコピン**: 実験で使われるような有意な数値を出すには「毎日バケツ1杯のトマト」を食べるか、サプリを飲む必要がある。試験管の中での抗酸化作用を「心臓にいい、癌にいい」と拡大解釈。
- **生姜の血流改善**: ジンゲロールやショウガオールは「栄養」ではなく、植物の防御化学物質（フィトケミカル）。体にとって一種の「刺激物（毒）」で、一時的なストレス反応（ホルミシス）による血流増大を「健康成分」とパッケージング。
- **キウイの睡眠効果**: フィリップ・サムも「キウイからビタミンKとれる」と思ってたり「睡眠にキウイ有効」と的外れなことを言っている。他の人よりマシだが、まだまだ。
- **玉ねぎの血液サラサラ**: 同様の構造的な「宣伝ロジック」が存在。

### 1.3 科学的誠実さ（10%の不確実性）

**「悪魔の証明」の回避: お菓子を食べていないことを100%証明することは不可能。**

- **信頼の余白**: あえて「10%の不確実性」を認めることで、既存の「100点満点を強いる偽善的なアプリ」との差別化を図る。
- **科学的誠実さ**: 科学において100%はあり得ない。この「10%の不確実性」を認めることがアプリの信頼性になる。

### 1.4 バイオアベイラビリティ（生物学的利用能）優先

**植物性栄養素は吸収率の低さや抗栄養素（レクチン、シュウ酸等）の影響を考慮し、スコアを「ペナルティ」として扱う。動物性のみを真の栄養とする。**

---

## 2. ブランド・アイデンティティ

### 2.1 アプリ名称

**CarnivOS (カーニボス)**

- **由来**: Carnivore（肉食）+ OS（基盤/システム）
- **理由**: 
  - SEOとストーリー性を重視
  - Primal Logicから進化
  - Vetus（ラテン語）などの候補よりも「基盤」「システム」としての強さを優先
  - 言いづらくない、略しやすい

### 2.2 デザイン哲学

**スティーブ・ジョブズ風ミニマリズム**

- **Apple製品のような「見えないデザイン」**: 余計な装飾、枠線を徹底的に排除
- **超高密度・低余白**: `gap: 0`、`padding: 0.5rem`以下。情報の凝縮感を重視
- **統一性と一貫性**: 栄養ゲージのUI（背景色、枠線、間隔、ゲージバーの高さ、色ロジックなど）は、アプリ全体で一貫したデザインを保つ

---

## 3. 独自機能ロジック

### 3.1 誠実さスコア (Sincerity Score)

**記録の正当性をパーセンテージで可視化する。**

#### スコア算出方法

- **90% (最高点)**: 写真撮影 ＋ AIによる深掘り質問（例：「バター足した？」「塩は？」）への回答
- **70%**: 文字のみの記録
- **加点/減点要素**: 
  - 外出時間（日光・天気連携）を自動取得
  - 運動量（既存アプリ連携）を自動取得
  - 手動入力はスコアを下げる（記憶バイアスを考慮）
- **不確実性**: 隠れて食べたリスクを考慮し、どれだけ完璧でも100%にはしない

#### 「していないこと」の記録

食べたものだけでなく、「お菓子を食べなかった」「サプリを飲まなかった」等のチェックリスト化。

### 3.2 栄養素貯蔵タンク (Nutrient Tank)

**ビタミンA等の脂溶性栄養素は「毎日」ではなく「蓄積量」で評価。**

- **貯蔵概念**: ビタミンAなどは数ヶ月持つが、アプリ内では安全に「1週間単位」などで貯蔵・枯渇を可視化
- **安全マージン**: 生理学的には数ヶ月持つ場合でも、アプリ内では「1週間」程度のサイクルで可視化
- **脱・カロリー理論**: 「毎日摂る」というカロリー理論の呪縛を解き、**「今、足りているか」**を重視

### 3.3 カーニボア移行・実践ガイド

#### 専門家知見の統合

Dr. Ken Berry, Shawn Baker, Paul Saladino, Anthony Chaffee, Bart Kay, Paul Masonの理論をベースにする。

#### 動的目标値

100項目以上のプロファイル設定（性別、年齢、妊娠、授乳、PMS、PCOS、疾患、血液検査値）に基づき、目標を毎日変動させる。

#### If-Thenプランニング

「外食で肉がない時」「糖質を欲した時」の行動を自動提示。

#### 断食の活用

必須ではないが、適応を加速させるためのオプションとして実装。

#### 移行期間の動的計算

30日固定ではなく、個人差を考慮した柔軟な計算方法。

### 3.4 進化したカメラ・食品記録UI

#### 「入力不要」への挑戦

- **自動検出＋アクションシート**: カメラ起動でバーコードを探し、なければAI解析
- **アルバム選択**: 必須機能として実装
- **AI対話メイン**: ユーザーが「腹痛がする」と言えば、AIが直近のログ（日光、脂質、誠実さスコア）から原因を推論

### 3.5 AIモードの3つのログモード

1. **アプリ外情報源を含むAIモード**: 全ての情報源（論文、専門家の主張など）を含む
2. **実践者ログ＋AIモード**: アプリ内の実践者のログとAIの組み合わせ
3. **ログ単体モード**: 実践者のログのみ

### 3.6 睡眠の質（柳沢理論）との連動

- **睡眠は「減点法」**: キウイ等の「加点マーケティング」を排除し、論理的な睡眠の質管理を行う
- **柳沢教授の理論**: 睡眠の質を測る方法を統合（将来的に実装）

---

## 4. 技術スタックと制約

### 4.1 フロントエンド

- **フレームワーク**: React 19 + Vite 6
- **言語**: TypeScript 5.7（strict mode）
- **スタイリング**: Tailwind CSS 4
- **アイコン**: Lucide React
- **状態管理**: React Context API
- **ストレージ**: localStorage（オフライン対応）

### 4.2 プラットフォーム

- **PWA（Progressive Web App）**: ネイティブアプリではないため、ブラウザAPIの制限がある
- **モバイルファースト**: スマホ（iPhone 15幅）で完璧に見えるレイアウトを最優先
- **iOS化**: Capacitor（将来的にiOSアプリ化可能）

### 4.3 外部API

- **Gemini API**: AIチャット、写真解析（`analyzeFoodImage`関数）
- **Supabase**: クラウドバックアップ（オプション）
- **Browser Notification API**: 通知機能

### 4.4 制約条件

- **PWAの制約**: ネイティブアプリではないため、ブラウザAPIの制限がある
- **モバイルブラウザ**: iOS Safari、Chrome Mobileでの動作を保証
- **カメラ権限**: ブラウザのカメラ権限が必要
- **アルバムアクセス**: ブラウザのファイルアクセス権限が必要

---

## 5. UI/UXデザイン原則

### 5.1 スティーブ・ジョブズ風ミニマルデザイン

- **余計な装飾を削ぎ落とす**: 機能と美しさのバランスを重視
- **間隔は最小限**: `gap: 0`、`padding: 0.5rem`以下
- **余白は必要最小限**: 統一性と一貫性を最優先
- **色は抑制的に**: Apple製品のような「見えないデザイン」を目指す
- **フォントサイズ**: 読みやすさを保ちつつ控えめに

### 5.2 UI/UXルール

- **モバイルファースト**: スマホ（iPhone 15幅）で完璧に見えるレイアウトを最優先
- **タッチフレンドリー**: すべてのボタンや入力要素は、指で押しやすいサイズ（44px以上）を確保
- **統一性**: 栄養ゲージのUI（背景色、枠線、間隔、ゲージバーの高さ、色ロジックなど）は、アプリ全体で一貫したデザインを保つ

### 5.3 栄養ゲージのUI統一

- **背景色**: `transparent`
- **枠線**: `1px solid #e5e7eb`
- **パディング**: `0.5rem`
- **間隔**: `gap: 0`
- **ゲージバーの背景色**: `#e5e7eb`
- **ゲージバーの高さ**: `10px`
- **色ロジック**: 単色（4ゾーングラデーションではなく、閾値に基づく単色）

### 5.4 AIボタンの位置設定

- **設定可能な位置**: `top-right`、`top-left`、`bottom-right`、`bottom-left`
- **デフォルト**: `bottom-right`
- **設定画面**: 設定画面から位置を変更可能

---

## 6. 開発ロードマップ

### Phase 1: カメラ機能統合（優先度: 高）

- **アクションシート/ボトムシート**: カメラ起動前に、アクションシートで「カメラで撮影」「アルバムから選択」「バーコード読み取り」を選択
- **アルバム選択**: HTML5 File API（`capture`属性なしで実装可能）
- **自動検出**: カメラ起動後、自動的にバーコードを検出。検出できればバーコード処理、できなければアクションシートで「写真として処理」「アルバムから選択」を選択

### Phase 2: AI対話メインのUI構築（優先度: 高）

- **AI対話UI**: ユーザーが「腹痛がする」と言えば、AIが直近のログ（日光、脂質、誠実さスコア）から原因を推論
- **100項目プロファイル**: 動的目标値ロジックの実装
- **3つのログモード**: アプリ外情報源を含むAIモード、実践者ログ＋AIモード、ログ単体モード

### Phase 3: 誠実さスコアのアルゴリズム実装（優先度: 中）

- **スコア算出ロジック**: 写真撮影、AI深掘り質問、外部連携（天気、運動）を考慮
- **外部API連携**: 天気API × 位置情報 × 外出時間、ヘルスケアアプリから自動取得
- **「していないこと」の記録**: チェックリスト化

### Phase 4: 移行ガイドの動的アルゴリズム（優先度: 中）

- **専門家知見の統合**: Dr. Ken Berry等の理論をベースにした動的アドバイス
- **If-Thenプランニング**: 「外食で肉がない時」「糖質を欲した時」の行動を自動提示
- **断食の活用**: 適応を加速させるためのオプション

### Phase 5: 栄養素貯蔵タンクの実装（優先度: 低）

- **貯蔵概念**: ビタミンA等の脂溶性栄養素の蓄積量を計算
- **安全マージン**: 1週間単位での可視化

---

## 7. Geminiとの会話で決定した事項

### 7.1 カメラ機能統合

- **推奨実装方法**: 選択肢B（自動検出 + アクションシート）のハイブリッド
  - カメラ起動後、自動的にバーコードを検出
  - 検出できれば自動処理、できなければアクションシートで選択
  - ユーザーの操作を最小限に抑えつつ、明確な選択肢を提供

### 7.2 フィリップ・サムへのスタンス

- **知識は認める**: フィリップ・サムは確かに知識豊富
- **ただし**: キウイのビタミンKや睡眠効果に関する主張は「的外れ」として採用しない
- **カロリー理論**: サムはカロリー理論を使っているが、このアプリでは一切使用しない

### 7.3 ずんだもん動画ネタ

- **マーケティングの闇**: 生姜、トマトのリコピン、キウイ、玉ねぎ血液サラサラ等の「マーケティングの闇」をシリーズ化するアイデア

### 7.4 「Primal Logic」から「CarnivOS」への改名

- **理由**: よりOS的な、ライフスタイルの基盤としての位置付け
- **SEO**: 検索で出るように
- **ストーリー性**: 由来が明確

### 7.5 AI対話メインへの傾倒

- **方向性**: 既存のゲージに関しても全部毎回見せる必要性はあるかも
- **UI設計**: AI対話メインのUIにおいて、「ゲージをどう控えめに、かつ効果的に見せるか」を検討

### 7.6 入力画面の必要性

- **検討**: 入力画面すらもはや不要か？AがっつりAIみたいなアプリに大方向転換？
- **結論**: 一旦保留。AI対話メインのUI設計を詰めてから判断

### 7.7 柳沢教授の理論

- **睡眠の質**: 睡眠は「減点法」という理論を統合（将来的に実装）
- **注意**: 直前の文脈に引っ張られすぎないように。思考モードではなく、Proモードで検討

### 7.8 栄養ゲージの常時表示

- **実装**: ButcherSelect内の栄養ゲージを`position: sticky`で常時表示できるようにする

### 7.9 AIボタンの位置変更

- **実装**: 設定画面から`top-right`、`top-left`、`bottom-right`、`bottom-left`を選択可能にする

---

## 8. 禁止事項・NG事項

### 8.1 カロリー理論の使用

- **完全禁止**: カロリー制限という時代遅れの壁を破壊。タンパク質と脂質の「質」と「比率」を重視

### 8.2 植物性推奨

- **完全禁止**: 植物性栄養素はペナルティとして扱う。動物性のみを真の栄養とする

### 8.3 チェリーピッキング

- **完全禁止**: 巷の「スーパーフード」の嘘を暴き、カーニボアこそが人間のデフォルトであることをデータで証明する

### 8.4 100%の完璧を強いる

- **完全禁止**: 科学的誠実さ（10%の不確実性）を認める

---

## 9. 今後の検討事項

### 9.1 AI対話メインのUI設計

- **ゲージの表示方法**: 既存のゲージに関しても全部毎回見せる必要性はあるかも
- **控えめに、かつ効果的に**: AI対話メインのUIにおいて、「ゲージをどう控えめに、かつ効果的に見せるか」を検討

### 9.2 入力画面の必要性

- **検討**: 入力画面すらもはや不要か？AがっつりAIみたいなアプリに大方向転換？
- **判断基準**: AI対話メインのUI設計を詰めてから判断

### 9.3 睡眠の質（柳沢理論）との連動

- **実装方法**: 睡眠の質を測る方法を統合（将来的に実装）
- **注意**: 直前の文脈に引っ張られすぎないように

### 9.4 移行期間の詳細リサーチ

- **専門家知見**: Dr. Ken Berry等の見解を統合
- **個人差**: 30日固定ではなく、個人差を考慮した柔軟な計算方法

---

## 10. ファイル参照

### 関連ファイル

- [`FEATURE_INTENTS.md`](primal-logic-app/primal-logic-web/FEATURE_INTENTS.md): 機能の意図と目的
- [`GEMINI_CAMERA_PROMPT_COMPLETE.md`](primal-logic-app/primal-logic-web/GEMINI_CAMERA_PROMPT_COMPLETE.md): カメラ機能統合の要件定義
- [`ANTIGRAVITY_RESEARCH_REQUESTS.md`](primal-logic-app/primal-logic-web/ANTIGRAVITY_RESEARCH_REQUESTS.md): リサーチ依頼
- [`CORE_FEATURES_AND_WEAPONS.md`](primal-logic-app/primal-logic-web/CORE_FEATURES_AND_WEAPONS.md): コア機能と武器

---

## 11. まとめ

このファイルは、Geminiとの会話で決定した事項をCursor/Gravに共有するための完全版まとめです。

**重要なポイント**:
- アプリは「全員が実験体」というミッションを持つ
- 科学的誠実さ（10%の不確実性）を認める
- バイオアベイラビリティ（生物学的利用能）を優先
- スティーブ・ジョブズ風ミニマルデザイン
- AI対話メインへの傾倒

**次のステップ**:
1. カメラ機能統合（Phase 1）
2. AI対話メインのUI構築（Phase 2）
3. 誠実さスコアのアルゴリズム実装（Phase 3）

---

**重要**: このファイルをCursor/Gravに読み込ませることで、開発の方向性と決定事項を共有できます。

