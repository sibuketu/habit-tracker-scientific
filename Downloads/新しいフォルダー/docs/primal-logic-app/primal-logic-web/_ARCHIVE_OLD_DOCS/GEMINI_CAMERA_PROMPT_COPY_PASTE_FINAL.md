# Geminiに送るプロンプトEコピE用・完E版！E

以下EプロンプトをGeminiに送信してくださいEE

---

# カメラ機E統合E要件定義依頼E完E版！E

## プロジェクト概要E

**CarnivOS** - 世界一のカーニEアダイエチE管琁EプリEEWA、React + TypeScriptEE

カーニEアダイエチEE肉・魚E卵・冁Eのみを食べる食事法）を実践する人、EサポEトする専門アプリ。一般皁E健康管琁Eプリとは異なり、E*進化的適合性**と**生化学**を重視、E

### アプリの特徴
- 動的目標値: ユーザーの状態に応じた栁E素目標値の自動調整EE00頁E以上Eプロファイル設定！E
- バイオアベイラビリチEロジチE: 植物性栁E素はペナルチE、動物性栁E素は優允E
- 4ゾーングラチEEションゲージ: 栁E素の状態を直感的に可視化
- AI機E: Gemini APIを使用したチャチE、E真解极E

### 技術スタチE
- React + Vite + TypeScript
- PWAEErogressive Web AppEE
- モバイルファースト！EPhone 15幁E最優先！E
- スチEーブEジョブズ風ミニマルチEイン

## 現在の実裁E況E

### 問題点
- `window.confirm`で「E真から追加」か「バーコード読み取り」かを選択！EXが悪ぁEE
- モバイルで使ぁEくい
- **アルバムから写真を選ぶ機EがなぁE*E重要EE
- 他アプリのベストEラクチEスに沿ってぁEぁE

### 現在のコーチE
```typescript
// HomeScreen.tsx (917-1008行目)
<button onClick={async () => {
  const action = window.confirm('写真から追加しますかE\n\n「OK、E 写真から追加\n「キャンセル、E バEコード読み取り');
  if (action) {
    const input = document.createElement('input');
    input.type = 'file';
    input.accept = 'image/*';
    input.capture = 'environment'; // カメラのみEアルバム選択不可EE
    // ... 写真解析E琁EEemini APIEE
  } else {
    setShowBarcodeScanner(true); // バEコード読み取り
  }
}}>
  📷
</button>
```

### 既存E実裁E
- **写真解极E*: `src/services/aiService.ts` - `analyzeFoodImage`関数EEemini APIEE
- **バEコード読み取り**: `src/utils/barcodeScanner.ts` - `scanBarcodeFromCamera`関数EEarcodeDetector APIEE
- **バEコードスキャナEモーダル**: `src/components/BarcodeScannerModal.tsx`
- **写真解析モーダル**: `src/components/PhotoAnalysisModal.tsx`

## 他アプリのパターン

1. **MyFitnessPal**: 写真とバEコードを別ボタンに刁EてぁE。E真Eタンから、カメラ撮影かアルバム選択かを選択可能、E
2. **Lifesum**: 1つのボタンで、アクションシーチEボトムシートで「カメラで撮影」「アルバムから選択」「バーコード読み取り」を選択、E
3. **Noom**: カメラ起動後、E動的にバEコードを検Eし、なければ写真として処琁Eアルバム選択も可能、E
4. **Amazon/楽天**: カメラ起動後、E動的にバEコードを検E。アルバム選択も可能、E
5. **Google Lens**: カメラ起動後、E動的にバEコーチEチEスチE画像を検E。アルバム選択も可能、E

## 実裁E法E選択肢

### 選択肢A: アクションシーチEボトムシート（推奨候裁EEE
- ボタンタチEE後、アクションシートで「カメラで撮影」「アルバムから選択」「バーコード読み取り」を選抁E
- メリチE: モバイルで使ぁEすい、E確な選択、アルバム選択も含められる
- チEリチE: 1回EタチEEが増えめE

### 選択肢B: 自動検E + アクションシート（推奨候裁EEE
- カメラ起動後、E動的にバEコードを検E。検EできればバEコードE琁Eできなければアクションシートで「E真として処琁E「アルバムから選択」を選抁E
- メリチE: ユーザーの操作が少なぁEバーコード検E時）、スムーズな体験、アルバム選択も含められる
- チEリチE: バEコード検Eの精度に依孁E

### 選択肢C: カメラ起動後Eモード選抁E
- カメラ起動後、画面上に「E真」「アルバム」「バーコード」Eタンを表示
- メリチE: 視覚的に刁Eりやすい
- チEリチE: UIが褁Eになる、カメラ起動が忁EE

### 選択肢D: 別ボタンに刁EめE
- 写真ボタンとバEコードEタンを別、E配置
- メリチE: 明確、他アプリEEyFitnessPalEEパターン
- チEリチE: UIが褁Eになる、Eタンが増えめE

### 選択肢E: 3つのボタンに刁EめE
- 「カメラで撮影」「アルバムから選択」「バーコード読み取り」を3つのボタンに刁EめE
- メリチE: 最もE確
- チEリチE: UIが最も褁Eになる、EタンぁEつになめE

## チEイン原則

- **スチEーブEジョブズ風ミニマルチEイン**: 余計な裁Eを削ぎ落とし、機Eと美しさEバランスを重要E
- **モバイルファースチE*: スマEEEPhone 15幁Eで完璧に見えるレイアウトを最優允E
- **タチEフレンドリー**: すべてのボタンめEE力要素は、指で押しやすいサイズEE4px以上）を確俁E
- **現在のボタン**: 44px ÁE44px、📷アイコン、グレー背景EE#f3f4f6`EE

## 技術的な実裁E件

- **写真解极E*: Gemini APIE既存実裁Eり！E
- **バEコード読み取り**: BarcodeDetector APIE既存実裁Eり、iOS Safariでは利用不可EE
- **アルバム選抁E*: HTML5 File APIEEcapture`属性なしで実裁E能EE
- **アクションシーチEボトムシーチE*: PWAのため、カスタムコンポEネントE作Eが忁EE

## 制紁E件

- **PWA**: ネイチEブアプリではなぁEめ、ブラウザAPIの制限がある
- **モバイルブラウザ**: iOS Safari、Chrome Mobileでの動作を保証
- **カメラ権陁E*: ブラウザのカメラ権限が忁EE
- **アルバムアクセス**: ブラウザのファイルアクセス権限が忁EE

## 質啁E

1. **実裁E法E推奨**: 選択肢A-EのぁE、どれが最適か？理由はE（既存EチEイン原則、モバイルファースト、ユーザー体験E観点からEE

2. **アルバム選択E実裁E*: アルバムから写真を選ぶ機Eを実裁Eる場合、どのような方法が最適か？！ETML5 File API、モバイルブラウザでの動作確認、既存E写真解析機Eとの統合！E

3. **アクションシーチEボトムシートE実裁E*: PWAでアクションシーチEボトムシートを実裁Eる場合、どのような方法が最適か？（カスタムコンポEネント、ライブラリ、モバイルブラウザでの動作確認、既存EチEイン原則との整合性EE

4. **自動検Eの実裁E*: バEコードE自動検Eを実裁Eる場合、どのような技術を使ぁEきかE！Eeb BarcodeDetector API、ライブラリ、パフォーマンス最適化、iOS Safariでの動作！E

5. **UXの最適匁E*: ユーザー体験を最適化するために、どのような工夫ができるか？（ローチEング表示、エラーハンドリング、フィードバチE、操作E流れEE

6. **他アプリのパターン**: 他アプリのパターンを参老E、さらに改喁Eきる点はあるか？（既存E決定事頁Eデザイン原則、ユーザー体験E観点からEE

7. **実裁EE優先頁EE*: Phase 1EアクションシーチEボトムシート、アルバム選択）、Phase 2EE動検E機EE、Phase 3EEXの最適化）E具体的な実裁EE容はEE

8. **整合性チェチE**: 既存E決定事頁Eデザイン原則、技術スタチEとの整合性をチェチEし、推奨実裁E法を提示してください、E

## 期征EるE劁E

1. **推奨実裁E況E*: 選択肢A-EのぁE、どれを選ぶべきか、理由とともに
2. **技術的な実裁E況E*: 具体的なコード例やライブラリの推奨
3. **UI/UX設訁E*: アクションシーチEボトムシートEチEイン桁E
4. **アルバム選択E実裁E*: アルバムから写真を選ぶ機Eの実裁E況E
5. **実裁EE優先頁EE*: Phase 1-3の具体的な実裁EE容
6. **他アプリとの比輁E*: 他アプリのパターンを参老Eした改喁EE
7. **整合性チェチE**: 既存E決定事頁Eデザイン原則、技術スタチEとの整合性チェチE結果
8. **推諁E*: ユーザー体験、パフォーマンス、保守性などの観点からの推諁E

## 補足

- **アイチE創造56技況E*: 技況E9「俁Eの要因」を使って、UXチEイナE、フロントエンドエンジニア、EロダクトEネEジャーの視点で刁Eしてください
- **余計なくらぁE報を送りたい**: 可能な限り詳細な惁E、褁Eの選択肢、E体的な実裁E法を提示してください
- **推奨頁E*: 褁Eの選択肢を提示する場合E、推奨頁E上から並べてください
- **整合性チェチEと推諁E*: 既存E決定事頁Eデザイン原則、技術スタチEとの整合性を忁EチェチEし、推論を行ってください

---

**重要E*: こEプロンプトをGeminiに送る際E、上記E冁EをそのままコピE&ペEストしてください、E


