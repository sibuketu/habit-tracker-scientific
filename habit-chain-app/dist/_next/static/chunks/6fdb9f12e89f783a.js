(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18256,(e,t,s)=>{"use strict";Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),s.isPlainObject=function(e){if("object"!=typeof e||null==e)return!1;if(null===Object.getPrototypeOf(e))return!0;if("[object Object]"!==Object.prototype.toString.call(e)){var t;let s=e[Symbol.toStringTag];return null!=s&&!!(null==(t=Object.getOwnPropertyDescriptor(e,Symbol.toStringTag))?void 0:t.writable)&&e.toString()==="[object ".concat(s,"]")}let s=e;for(;null!==Object.getPrototypeOf(s);)s=Object.getPrototypeOf(s);return Object.getPrototypeOf(e)===s}},7328,(e,t,s)=>{t.exports=e.r(18256).isPlainObject},18540,e=>{"use strict";let t;e.s(["default",()=>sS],18540);var s=e.i(36095),a=e.i(62893),r=e.i(33004);let l=(0,r.default)("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]]),n=(0,r.default)("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]),i=(0,r.default)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),c=(0,r.default)("timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]),o=(0,r.default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);var d=e.i(26204),x=e.i(56968),m=e.i(25138);let h=()=>{let{currentTab:e,setCurrentTab:t}=(0,x.useNavigationStore)(),{t:a}=(0,m.useTranslation)(),r=(e=>[{id:"home",label:e.nav.home,icon:l},{id:"record",label:e.nav.record,icon:n},{id:"habit-setting",label:e.nav.settings,icon:i},{id:"time-attack",label:e.nav.timeAttack,icon:c},{id:"my-routine",label:e.nav.routine,icon:o},{id:"knowledge-comparison",label:"知識対比",icon:d.Lightbulb}])(a);return(0,s.jsx)("nav",{className:"bg-gray-900 border-t border-gray-700 px-1 py-3 w-full",children:(0,s.jsx)("div",{className:"flex items-center",children:r.map(a=>{let r=a.icon,l=e===a.id;return(0,s.jsxs)("button",{onClick:()=>t(a.id),className:"flex-1 flex flex-col items-center py-2 px-1 transition-all duration-200 rounded-lg ".concat(l?"text-green-400 bg-gray-800":"text-gray-400 hover:text-gray-300 hover:bg-gray-800"),children:[(0,s.jsx)(r,{size:20,className:l?"text-green-400":"text-gray-400"}),(0,s.jsx)("span",{className:"text-xs mt-1 font-medium ".concat(l?"text-green-400":"text-gray-400"),children:a.label})]},a.id)})})})};var u=e.i(25949),g=e.i(70778),p=e.i(98596),b=e.i(22273),y=e.i(85523),f=e.i(27241),j=e.i(73310);function v(e){var t=(0,f.useAppDispatch)();return(0,a.useEffect)(()=>{t((0,j.updatePolarOptions)(e))},[t,e]),null}var N=e.i(48973),w=e.i(51883),k=e.i(22075),A=["width","height","layout"];function S(){return(S=Object.assign.bind()).apply(null,arguments)}var C={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index",layout:"radial"},T=(0,a.forwardRef)(function(e,t){var s,r=(0,w.resolveDefaultProps)(e.categoricalChartProps,C),{width:l,height:n,layout:i}=r,c=function(e,t){if(null==e)return{};var s,a,r=function(e,t){if(null==e)return{};var s={};for(var a in e)if(({}).hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;s[a]=e[a]}return s}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)s=l[a],-1===t.indexOf(s)&&({}).propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}(r,A);if(!(0,k.isPositiveNumber)(l)||!(0,k.isPositiveNumber)(n))return null;var{chartName:o,defaultTooltipEventType:d,validateTooltipEventTypes:x,tooltipPayloadSearcher:m}=e;return a.createElement(g.RechartsStoreProvider,{preloadedState:{options:{chartName:o,defaultTooltipEventType:d,validateTooltipEventTypes:x,tooltipPayloadSearcher:m,eventEmitter:void 0}},reduxStoreName:null!=(s=r.id)?s:o},a.createElement(p.ChartDataContextProvider,{chartData:r.data}),a.createElement(b.ReportMainChartProps,{width:l,height:n,layout:i,margin:r.margin}),a.createElement(y.ReportChartProps,{accessibilityLayer:r.accessibilityLayer,barCategoryGap:r.barCategoryGap,maxBarSize:r.maxBarSize,stackOffset:r.stackOffset,barGap:r.barGap,barSize:r.barSize,syncId:r.syncId,syncMethod:r.syncMethod,className:r.className}),a.createElement(v,{cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius}),a.createElement(N.CategoricalChart,S({width:l,height:n},c,{ref:t})))}),O=["item"],P={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},E=(0,a.forwardRef)((e,t)=>{var s=(0,w.resolveDefaultProps)(e,P);return a.createElement(T,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:O,tooltipPayloadSearcher:u.arrayTooltipSearcher,categoricalChartProps:s,ref:t})}),M=e.i(92068),D=e.i(7670),_=e.i(61849),I=e.i(92860),z=e.i(41088),R=e.i(79812),L=e.i(61764),B=e.i(46710),K=e.i(73962),F=e.i(91561),W=e.i(77320),G=e=>e.graphicalItems.polarItems,V=(0,_.createSelector)([K.pickAxisType,F.pickAxisId],L.itemAxisPredicate),q=(0,_.createSelector)([G,L.selectBaseAxis,V],L.combineGraphicalItemsSettings),H=(0,_.createSelector)([q],L.combineGraphicalItemsData),U=(0,_.createSelector)([H,I.selectChartDataAndAlwaysIgnoreIndexes],L.combineDisplayedData),X=(0,_.createSelector)([U,L.selectBaseAxis,q],L.combineAppliedValues),Y=(0,_.createSelector)([U,L.selectBaseAxis,q],(e,t,s)=>s.length>0?e.flatMap(e=>s.flatMap(s=>{var a;return{value:(0,R.getValueByDataKey)(e,null!=(a=t.dataKey)?a:s.dataKey),errorDomain:[]}})).filter(Boolean):(null==t?void 0:t.dataKey)!=null?e.map(e=>({value:(0,R.getValueByDataKey)(e,t.dataKey),errorDomain:[]})):e.map(e=>({value:e,errorDomain:[]}))),J=()=>void 0,Z=(0,_.createSelector)([L.selectBaseAxis,L.selectDomainDefinition,J,Y,J,B.selectChartLayout,K.pickAxisType],L.combineNumericalDomain),Q=(0,_.createSelector)([L.selectBaseAxis,B.selectChartLayout,U,X,W.selectStackOffsetType,K.pickAxisType,Z],L.combineAxisDomain),$=(0,_.createSelector)([Q,L.selectBaseAxis,L.selectRealScaleType],L.combineNiceTicks);function ee(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,a)}return s}function et(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(s),!0).forEach(function(t){var a,r,l;a=e,r=t,l=s[t],(r=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(r))in a?Object.defineProperty(a,r,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[r]=l}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ee(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}(0,_.createSelector)([L.selectBaseAxis,Q,$,K.pickAxisType],L.combineAxisDomainWithNiceTicks);var es=(0,_.createSelector)([G,(e,t)=>t],(e,t)=>e.filter(e=>"pie"===e.type).find(e=>e.id===t)),ea=[],er=(e,t,s)=>(null==s?void 0:s.length)===0?ea:s,el=(0,_.createSelector)([I.selectChartDataAndAlwaysIgnoreIndexes,es,er],(e,t,s)=>{var a,{chartData:r}=e;if(null!=t&&((a=(null==t?void 0:t.data)!=null&&t.data.length>0?t.data:r)&&a.length||null==s||(a=s.map(e=>et(et({},t.presentationProps),e.props))),null!=a))return a}),en=(0,_.createSelector)([el,es,er],(e,t,s)=>{if(null!=e&&null!=t)return e.map((e,a)=>{var r,l,n=(0,R.getValueByDataKey)(e,t.nameKey,t.name);return l=null!=s&&null!=(r=s[a])&&null!=(r=r.props)&&r.fill?s[a].props.fill:"object"==typeof e&&null!=e&&"fill"in e?e.fill:t.fill,{value:(0,R.getTooltipNameProp)(n,t.dataKey),color:l,payload:e,type:t.legendType}})}),ei=(0,_.createSelector)([el,es,er,z.selectChartOffsetInternal],(e,t,s,a)=>{if(null!=t&&null!=e)return function(e){var t,s,a,{pieSettings:r,displayedData:l,cells:n,offset:i}=e,{cornerRadius:c,startAngle:o,endAngle:d,dataKey:x,nameKey:m,tooltipType:h}=r,u=Math.abs(r.minAngle),g=(0,eg.mathSign)(d-o)*Math.min(Math.abs(d-o),360),p=Math.abs(g),b=l.length<=1?0:null!=(t=r.paddingAngle)?t:0,y=l.filter(e=>0!==(0,R.getValueByDataKey)(e,x,0)).length,f=p-y*u-(p>=360?y:y-1)*b,j=l.reduce((e,t)=>{var s=(0,R.getValueByDataKey)(t,x,0);return e+((0,eg.isNumber)(s)?s:0)},0);return j>0&&(s=l.map((e,t)=>{var s,l=(0,R.getValueByDataKey)(e,x,0),d=(0,R.getValueByDataKey)(e,m,t),p=((e,t,s)=>{let a,r,l;var{top:n,left:i,width:c,height:o}=t,d=(0,eu.getMaxRadius)(c,o),x=i+(0,eg.getPercentValue)(e.cx,c,c/2),m=n+(0,eg.getPercentValue)(e.cy,o,o/2),h=(0,eg.getPercentValue)(e.innerRadius,d,0);return{cx:x,cy:m,innerRadius:h,outerRadius:(a=s,r=e.outerRadius,l=d,"function"==typeof r?(0,eg.getPercentValue)(r(a),l,.8*l):(0,eg.getPercentValue)(r,l,.8*l)),maxRadius:e.maxRadius||Math.sqrt(c*c+o*o)/2}})(r,i,e),y=((0,eg.isNumber)(l)?l:0)/j,v=to(to({},e),n&&n[t]&&n[t].props),N=(s=t?a.endAngle+(0,eg.mathSign)(g)*b*(0!==l):o)+(0,eg.mathSign)(g)*((0!==l?u:0)+y*f),w=(s+N)/2,k=(p.innerRadius+p.outerRadius)/2,A=[{name:d,value:l,payload:v,dataKey:x,type:h}],S=(0,eu.polarToCartesian)(p.cx,p.cy,k,w);return a=to(to(to(to({},r.presentationProps),{},{percent:y,cornerRadius:c,name:d,tooltipPayload:A,midAngle:w,middleRadius:k,tooltipPosition:S},v),p),{},{value:(0,R.getValueByDataKey)(e,x),startAngle:s,endAngle:N,payload:v,paddingAngle:(0,eg.mathSign)(g)*b})})),s}({offset:a,pieSettings:t,displayedData:e,cells:s})}),ec=e.i(97865),eo=e.i(72733),ed=e.i(9516),ex=e=>null;ex.displayName="Cell";var em=e.i(81977),eh=e.i(62728),eu=e.i(68970),eg=e.i(94395),ep=e.i(73393),eb=e.i(7328),ey=e.i(29905),ef=e.i(66576),ej=e.i(40657),ev=e.i(92887);function eN(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,a)}return s}function ew(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?eN(Object(s),!0).forEach(function(t){var a,r,l;a=e,r=t,l=s[t],(r=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(r))in a?Object.defineProperty(a,r,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[r]=l}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):eN(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function ek(){return(ek=Object.assign.bind()).apply(null,arguments)}var eA=(e,t,s,a,r)=>{var l=s-a;return"M ".concat(e,",").concat(t)+"L ".concat(e+s,",").concat(t)+"L ".concat(e+s-l/2,",").concat(t+r)+"L ".concat(e+s-l/2-a,",").concat(t+r)+"L ".concat(e,",").concat(t," Z")},eS={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},eC=e=>{var t=(0,w.resolveDefaultProps)(e,eS),{x:s,y:r,upperWidth:l,lowerWidth:n,height:i,className:c}=t,{animationEasing:o,animationDuration:d,animationBegin:x,isUpdateAnimationActive:m}=t,h=(0,a.useRef)(),[u,g]=(0,a.useState)(-1),p=(0,a.useRef)(l),b=(0,a.useRef)(n),y=(0,a.useRef)(i),f=(0,a.useRef)(s),j=(0,a.useRef)(r),v=(0,ej.useAnimationId)(e,"trapezoid-");if((0,a.useEffect)(()=>{if(h.current&&h.current.getTotalLength)try{var e=h.current.getTotalLength();e&&g(e)}catch(e){}},[]),s!==+s||r!==+r||l!==+l||n!==+n||i!==+i||0===l&&0===n||0===i)return null;var N=(0,D.clsx)("recharts-trapezoid",c);if(!m)return a.createElement("g",null,a.createElement("path",ek({},(0,em.filterProps)(t,!0),{className:N,d:eA(s,r,l,n,i)})));var k=p.current,A=b.current,S=y.current,C=f.current,T=j.current,O="0px ".concat(-1===u?1:u,"px"),P="".concat(u,"px 0px"),E=(0,ev.getTransitionVal)(["strokeDasharray"],d,o);return a.createElement(ef.JavascriptAnimate,{animationId:v,key:v,canBegin:u>0,duration:d,easing:o,isActive:m,begin:x},e=>{var c=(0,eg.interpolate)(k,l,e),o=(0,eg.interpolate)(A,n,e),d=(0,eg.interpolate)(S,i,e),x=(0,eg.interpolate)(C,s,e),m=(0,eg.interpolate)(T,r,e);h.current&&(p.current=c,b.current=o,y.current=d,f.current=x,j.current=m);var u=e>0?{transition:E,strokeDasharray:P}:{strokeDasharray:O};return a.createElement("path",ek({},(0,em.filterProps)(t,!0),{className:N,d:eA(x,m,c,o,d),ref:h,style:ew(ew({},u),t.style)}))})},eT=e.i(39425);e.i(2353);var eO=e.i(75058),eP=e.i(16888);let eE=Math.cos,eM=Math.sin,eD=Math.sqrt,e_=Math.PI,eI=2*e_;eD(3);let ez={draw(e,t){let s=eD(t/e_);e.moveTo(s,0),e.arc(0,0,s,0,eI)}},eR=eD(1/3),eL=2*eR,eB=eM(e_/10)/eM(7*e_/10),eK=eM(eI/10)*eB,eF=-eE(eI/10)*eB,eW=eD(3);eD(3);let eG=eD(3)/2,eV=1/eD(12),eq=(eV/2+1)*3;var eH=["type","size","sizeType"];function eU(){return(eU=Object.assign.bind()).apply(null,arguments)}function eX(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,a)}return s}function eY(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?eX(Object(s),!0).forEach(function(t){var a,r,l;a=e,r=t,l=s[t],(r=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(r))in a?Object.defineProperty(a,r,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[r]=l}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):eX(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}var eJ={symbolCircle:ez,symbolCross:{draw(e,t){let s=eD(t/5)/2;e.moveTo(-3*s,-s),e.lineTo(-s,-s),e.lineTo(-s,-3*s),e.lineTo(s,-3*s),e.lineTo(s,-s),e.lineTo(3*s,-s),e.lineTo(3*s,s),e.lineTo(s,s),e.lineTo(s,3*s),e.lineTo(-s,3*s),e.lineTo(-s,s),e.lineTo(-3*s,s),e.closePath()}},symbolDiamond:{draw(e,t){let s=eD(t/eL),a=s*eR;e.moveTo(0,-s),e.lineTo(a,0),e.lineTo(0,s),e.lineTo(-a,0),e.closePath()}},symbolSquare:{draw(e,t){let s=eD(t),a=-s/2;e.rect(a,a,s,s)}},symbolStar:{draw(e,t){let s=eD(.8908130915292852*t),a=eK*s,r=eF*s;e.moveTo(0,-s),e.lineTo(a,r);for(let t=1;t<5;++t){let l=eI*t/5,n=eE(l),i=eM(l);e.lineTo(i*s,-n*s),e.lineTo(n*a-i*r,i*a+n*r)}e.closePath()}},symbolTriangle:{draw(e,t){let s=-eD(t/(3*eW));e.moveTo(0,2*s),e.lineTo(-eW*s,-s),e.lineTo(eW*s,-s),e.closePath()}},symbolWye:{draw(e,t){let s=eD(t/eq),a=s/2,r=s*eV,l=s*eV+s,n=-a;e.moveTo(a,r),e.lineTo(a,l),e.lineTo(n,l),e.lineTo(-.5*a-eG*r,eG*a+-.5*r),e.lineTo(-.5*a-eG*l,eG*a+-.5*l),e.lineTo(-.5*n-eG*l,eG*n+-.5*l),e.lineTo(-.5*a+eG*r,-.5*r-eG*a),e.lineTo(-.5*a+eG*l,-.5*l-eG*a),e.lineTo(-.5*n+eG*l,-.5*l-eG*n),e.closePath()}}},eZ=Math.PI/180,eQ=e=>{var{type:t="circle",size:s=64,sizeType:r="area"}=e,l=eY(eY({},function(e,t){if(null==e)return{};var s,a,r=function(e,t){if(null==e)return{};var s={};for(var a in e)if(({}).hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;s[a]=e[a]}return s}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)s=l[a],-1===t.indexOf(s)&&({}).propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}(e,eH)),{},{type:t,size:s,sizeType:r}),n="circle";"string"==typeof t&&(n=t);var{className:i,cx:c,cy:o}=l,d=(0,em.filterProps)(l,!0);return c===+c&&o===+o&&s===+s?a.createElement("path",eU({},d,{className:(0,D.clsx)("recharts-symbols",i),transform:"translate(".concat(c,", ").concat(o,")"),d:(()=>{var e,t=(e=n,eJ["symbol".concat((0,eg.upperFirst)(e))]||ez);return(function(e,t){let s=null,a=(0,eP.withPath)(r);function r(){let r;if(s||(s=r=a()),e.apply(this,arguments).draw(s,+t.apply(this,arguments)),r)return s=null,r+""||null}return e="function"==typeof e?e:(0,eO.default)(e||ez),t="function"==typeof t?t:(0,eO.default)(void 0===t?64:+t),r.type=function(t){return arguments.length?(e="function"==typeof t?t:(0,eO.default)(t),r):e},r.size=function(e){return arguments.length?(t="function"==typeof e?e:(0,eO.default)(+e),r):t},r.context=function(e){return arguments.length?(s=null==e?null:e,r):s},r})().type(t).size(((e,t,s)=>{if("area"===t)return e;switch(s){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":var a=18*eZ;return 1.25*e*e*(Math.tan(a)-Math.tan(2*a)*Math.tan(a)**2);case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}})(s,r,n))()})()})):null};eQ.registerSymbol=(e,t)=>{eJ["symbol".concat((0,eg.upperFirst)(e))]=t};var e$=["option","shapeType","propTransformer","activeClassName","isActive"];function e0(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,a)}return s}function e1(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?e0(Object(s),!0).forEach(function(t){var a,r,l;a=e,r=t,l=s[t],(r=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(r))in a?Object.defineProperty(a,r,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[r]=l}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):e0(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function e2(e,t){return e1(e1({},t),e)}function e4(e){var{shapeType:t,elementProps:s}=e;switch(t){case"rectangle":return a.createElement(ey.Rectangle,s);case"trapezoid":return a.createElement(eC,s);case"sector":return a.createElement(eT.Sector,s);case"symbols":if("symbols"===t)return a.createElement(eQ,s);break;default:return null}}function e3(e){var t,{option:s,shapeType:r,propTransformer:l=e2,activeClassName:n="recharts-active-shape",isActive:i}=e,c=function(e,t){if(null==e)return{};var s,a,r=function(e,t){if(null==e)return{};var s={};for(var a in e)if(({}).hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;s[a]=e[a]}return s}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)s=l[a],-1===t.indexOf(s)&&({}).propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}(e,e$);if((0,a.isValidElement)(s))t=(0,a.cloneElement)(s,e1(e1({},c),(0,a.isValidElement)(s)?s.props:s));else if("function"==typeof s)t=s(c);else if((0,eb.default)(s)&&"boolean"!=typeof s){var o=l(s,c);t=a.createElement(e4,{shapeType:r,elementProps:o})}else t=a.createElement(e4,{shapeType:r,elementProps:c});return i?a.createElement(ec.Layer,{className:n},t):t}var e6=e.i(98982),e5=e.i(844),e8=e.i(76735),e7=e.i(95146),e9=e.i(94810),te=e.i(15549),tt=e.i(91187),ts=e.i(57999),ta=e.i(69212),tr=["onMouseEnter","onClick","onMouseLeave"],tl=["id"],tn=["id"];function ti(e,t){if(null==e)return{};var s,a,r=function(e,t){if(null==e)return{};var s={};for(var a in e)if(({}).hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;s[a]=e[a]}return s}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)s=l[a],-1===t.indexOf(s)&&({}).propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function tc(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,a)}return s}function to(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?tc(Object(s),!0).forEach(function(t){var a,r,l;a=e,r=t,l=s[t],(r=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(r))in a?Object.defineProperty(a,r,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[r]=l}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):tc(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function td(){return(td=Object.assign.bind()).apply(null,arguments)}function tx(e){var t=(0,a.useMemo)(()=>(0,em.findAllByType)(e.children,ex),[e.children]),s=(0,f.useAppSelector)(s=>en(s,e.id,t));return null==s?null:a.createElement(e7.SetPolarLegendPayload,{legendPayload:s})}function tm(e){var{dataKey:t,nameKey:s,sectors:a,stroke:r,strokeWidth:l,fill:n,name:i,hide:c,tooltipType:o}=e;return{dataDefinedOnItem:a.map(e=>e.tooltipPayload),positions:a.map(e=>e.tooltipPosition),settings:{stroke:r,strokeWidth:l,fill:n,dataKey:t,nameKey:s,name:(0,R.getTooltipNameProp)(i,t),hide:c,type:o,color:n,unit:""}}}function th(e){var{sectors:t,props:s,showLabels:r}=e,{label:l,labelLine:n,dataKey:i}=s;if(!r||!l||!t)return null;var c=(0,ts.svgPropertiesNoEvents)(s),o=(0,em.filterProps)(l,!1),d=(0,em.filterProps)(n,!1),x="object"==typeof l&&"offsetRadius"in l&&"number"==typeof l.offsetRadius&&l.offsetRadius||20,m=t.map((e,t)=>{var s,r,m=(e.startAngle+e.endAngle)/2,h=(0,eu.polarToCartesian)(e.cx,e.cy,e.outerRadius+x,m),u=to(to(to(to({},c),e),{},{stroke:"none"},o),{},{index:t,textAnchor:(s=h.x)>(r=e.cx)?"start":s<r?"end":"middle"},h),g=to(to(to(to({},c),e),{},{fill:"none",stroke:e.fill},d),{},{index:t,points:[(0,eu.polarToCartesian)(e.cx,e.cy,e.outerRadius,m),h],key:"line"});return a.createElement(ec.Layer,{key:"label-".concat(e.startAngle,"-").concat(e.endAngle,"-").concat(e.midAngle,"-").concat(t)},n&&((e,t)=>{if(a.isValidElement(e))return a.cloneElement(e,t);if("function"==typeof e)return e(t);var s=(0,D.clsx)("recharts-pie-label-line","boolean"!=typeof e?e.className:"");return a.createElement(eo.Curve,td({},t,{type:"linear",className:s}))})(n,g),((e,t,s)=>{if(a.isValidElement(e))return a.cloneElement(e,t);var r,l=s;if("function"==typeof e&&(l=e(t),a.isValidElement(l)))return l;var n=(0,D.clsx)("recharts-pie-label-text",(r=e)&&"object"==typeof r&&"className"in r&&"string"==typeof r.className?r.className:"");return a.createElement(ed.Text,td({},t,{alignmentBaseline:"middle",className:n}),l)})(l,u,(0,R.getValueByDataKey)(e,i)))});return a.createElement(ec.Layer,{className:"recharts-pie-labels"},m)}function tu(e){var{sectors:t,props:s,showLabels:r}=e,{label:l}=s;return"object"==typeof l&&null!=l&&"position"in l?a.createElement(ta.LabelListFromLabelProp,{label:s.label}):a.createElement(th,{sectors:t,props:s,showLabels:r})}function tg(e){var t,s,r,l,n,{sectors:i,activeShape:c,inactiveShape:o,allOtherPieProps:d}=e,x=(0,f.useAppSelector)(e8.selectActiveTooltipIndex),{onMouseEnter:m,onClick:h,onMouseLeave:u}=d,g=ti(d,tr),p=(t=d.dataKey,s=(0,f.useAppDispatch)(),(e,a)=>r=>{null==m||m(e,a,r),s((0,e6.setActiveMouseOverItemIndex)({activeIndex:String(a),activeDataKey:t,activeCoordinate:e.tooltipPosition}))}),b=(r=(0,f.useAppDispatch)(),(e,t)=>s=>{null==u||u(e,t,s),r((0,e6.mouseLeaveItem)())}),y=(l=d.dataKey,n=(0,f.useAppDispatch)(),(e,t)=>s=>{null==h||h(e,t,s),n((0,e6.setActiveClickItemIndex)({activeIndex:String(t),activeDataKey:l,activeCoordinate:e.tooltipPosition}))});return null==i||0===i.length?null:a.createElement(a.Fragment,null,i.map((e,t)=>{if((null==e?void 0:e.startAngle)===0&&(null==e?void 0:e.endAngle)===0&&1!==i.length)return null;var s=c&&String(t)===x,r=s?c:x?o:null,l=to(to({},e),{},{stroke:e.stroke,tabIndex:-1,[e9.DATA_ITEM_INDEX_ATTRIBUTE_NAME]:t,[e9.DATA_ITEM_DATAKEY_ATTRIBUTE_NAME]:d.dataKey});return a.createElement(ec.Layer,td({tabIndex:-1,className:"recharts-pie-sector"},(0,ep.adaptEventsOfChild)(g,e,t),{onMouseEnter:p(e,t),onMouseLeave:b(e,t),onClick:y(e,t),key:"sector-".concat(null==e?void 0:e.startAngle,"-").concat(null==e?void 0:e.endAngle,"-").concat(e.midAngle,"-").concat(t)}),a.createElement(e3,td({option:r,isActive:s,shapeType:"sector"},l)))}))}function tp(e){var{showLabels:t,sectors:s,children:r}=e,l=(0,a.useMemo)(()=>t&&s?s.map(e=>({value:e.value,payload:e.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:e.cx,cy:e.cy,innerRadius:e.innerRadius,outerRadius:e.outerRadius,startAngle:e.startAngle,endAngle:e.endAngle,clockWise:!1},fill:e.fill})):[],[s,t]);return a.createElement(ta.PolarLabelListContextProvider,{value:t?l:void 0},r)}function tb(e){var{props:t,previousSectorsRef:s}=e,{sectors:r,isAnimationActive:l,animationBegin:n,animationDuration:i,animationEasing:c,activeShape:o,inactiveShape:d,onAnimationStart:x,onAnimationEnd:m}=t,h=(0,ej.useAnimationId)(t,"recharts-pie-"),u=s.current,[g,p]=(0,a.useState)(!1),b=(0,a.useCallback)(()=>{"function"==typeof m&&m(),p(!1)},[m]),y=(0,a.useCallback)(()=>{"function"==typeof x&&x(),p(!0)},[x]);return a.createElement(tp,{showLabels:!g,sectors:r},a.createElement(ef.JavascriptAnimate,{animationId:h,begin:n,duration:i,isActive:l,easing:c,onAnimationStart:y,onAnimationEnd:b,key:h},e=>{var l=[],n=r&&r[0],i=null==n?void 0:n.startAngle;return null==r||r.forEach((t,s)=>{var a=u&&u[s],r=s>0?(0,M.default)(t,"paddingAngle",0):0;if(a){var n=(0,eg.interpolate)(a.endAngle-a.startAngle,t.endAngle-t.startAngle,e),c=to(to({},t),{},{startAngle:i+r,endAngle:i+n+r});l.push(c),i=c.endAngle}else{var{endAngle:o,startAngle:d}=t,x=(0,eg.interpolate)(0,o-d,e),m=to(to({},t),{},{startAngle:i+r,endAngle:i+x+r});l.push(m),i=m.endAngle}}),s.current=l,a.createElement(ec.Layer,null,a.createElement(tg,{sectors:l,activeShape:o,inactiveShape:d,allOtherPieProps:t}))}),a.createElement(tu,{showLabels:!g,sectors:r,props:t}),t.children)}var ty={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!eh.Global.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function tf(e){var{id:t}=e,s=ti(e,tl),{hide:r,className:l,rootTabIndex:n}=e,i=(0,a.useMemo)(()=>(0,em.findAllByType)(e.children,ex),[e.children]),c=(0,f.useAppSelector)(e=>ei(e,t,i)),o=(0,a.useRef)(null),d=(0,D.clsx)("recharts-pie",l);return r||null==c?(o.current=null,a.createElement(ec.Layer,{tabIndex:n,className:d})):a.createElement(a.Fragment,null,a.createElement(e5.SetTooltipEntrySettings,{fn:tm,args:to(to({},e),{},{sectors:c})}),a.createElement(ec.Layer,{tabIndex:n,className:d},a.createElement(tb,{props:to(to({},s),{},{sectors:c}),previousSectorsRef:o})))}function tj(e){var t=(0,w.resolveDefaultProps)(e,ty),{id:s}=t,r=ti(t,tn),l=(0,ts.svgPropertiesNoEvents)(r);return a.createElement(te.RegisterGraphicalItemId,{id:s,type:"pie"},e=>a.createElement(a.Fragment,null,a.createElement(tt.SetPolarGraphicalItem,{type:"pie",id:e,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:l}),a.createElement(tx,td({},r,{id:e})),a.createElement(tf,td({},r,{id:e}))))}tj.displayName="Pie";var tv=e.i(29228),tN=e.i(55706),tw=e.i(85183),tk=e.i(93230),tA=e.i(72526),tS=e.i(34239);let tC=(0,r.default)("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),tT=(0,r.default)("dumbbell",[["path",{d:"M17.596 12.768a2 2 0 1 0 2.829-2.829l-1.768-1.767a2 2 0 0 0 2.828-2.829l-2.828-2.828a2 2 0 0 0-2.829 2.828l-1.767-1.768a2 2 0 1 0-2.829 2.829z",key:"9m4mmf"}],["path",{d:"m2.5 21.5 1.4-1.4",key:"17g3f0"}],["path",{d:"m20.1 3.9 1.4-1.4",key:"1qn309"}],["path",{d:"M5.343 21.485a2 2 0 1 0 2.829-2.828l1.767 1.768a2 2 0 1 0 2.829-2.829l-6.364-6.364a2 2 0 1 0-2.829 2.829l1.768 1.767a2 2 0 0 0-2.828 2.829z",key:"1t2c92"}],["path",{d:"m9.6 14.4 4.8-4.8",key:"6umqxw"}]]),tO=(0,r.default)("bed",[["path",{d:"M2 4v16",key:"vw9hq8"}],["path",{d:"M2 8h18a2 2 0 0 1 2 2v10",key:"1dgv2r"}],["path",{d:"M2 17h20",key:"18nfp3"}],["path",{d:"M6 8v9",key:"1yriud"}]]),tP=(0,r.default)("circle-play",[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),tE={sun:tC,book:n,dumbbell:tT,bed:tO};function tM(e){let{habit:t}=e,a=tE[t.icon],r="completed"===t.status?"#6AEEB2":"skipped"===t.status?"#FF6B6B":"#FFFFFF";return(0,s.jsxs)("div",{className:"bg-gray-800 rounded-xl p-4 flex items-center mb-3 hover:bg-gray-750 transition-colors",children:[(0,s.jsx)("div",{className:"mr-4",children:(0,s.jsx)(a,{size:28,color:r})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"text-lg font-bold",style:{color:r},children:t.name}),(0,s.jsx)("p",{className:"text-gray-400 text-sm mt-1",children:t.time})]}),(0,s.jsx)("button",{className:"ml-4 hover:scale-110 transition-transform",children:(0,s.jsx)(tP,{size:36,color:"#6AEEB2"})})]})}var tD=e.i(25767),t_=e.i(82472);let tI=(0,r.default)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),tz=(0,r.default)("gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);var tR=e.i(7177);let tL=(0,r.default)("volume-2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]),tB=(0,r.default)("volume-x",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);function tK(e){let{rewards:t,isOpen:r,onClose:l,onClaim:n}=e,[i,c]=(0,a.useState)(0),[o,d]=(0,a.useState)(!0),[x,m]=(0,a.useState)(!1);(0,a.useEffect)(()=>{r&&t.length>0&&(c(0),m(!0),o&&console.log("🎵 ご褒美獲得音を再生"))},[r,t.length,o]);let h=t[i],u=e=>{switch(e){case"streak":return"from-yellow-600 to-orange-600";case"pb":return"from-blue-600 to-cyan-600";case"record":return"from-green-600 to-emerald-600";default:return"from-purple-600 to-pink-600"}};return r&&h?(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-gray-900 rounded-2xl p-8 max-w-md w-full transform transition-all duration-500 ".concat(x?"scale-100 opacity-100":"scale-95 opacity-0"),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsx)("div",{className:"flex items-center space-x-2",children:(0,s.jsxs)("span",{className:"text-sm text-gray-400",children:[i+1," / ",t.length]})}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("button",{onClick:()=>d(!o),className:"p-2 hover:bg-gray-800 rounded-lg transition-colors",children:o?(0,s.jsx)(tL,{className:"w-5 h-5 text-gray-400"}):(0,s.jsx)(tB,{className:"w-5 h-5 text-gray-400"})}),(0,s.jsx)("button",{onClick:()=>{m(!1),setTimeout(()=>{l(),c(0)},300)},className:"p-2 hover:bg-gray-800 rounded-lg transition-colors",children:(0,s.jsx)(tR.X,{className:"w-5 h-5 text-gray-400"})})]})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsx)("div",{className:"w-32 h-32 mx-auto rounded-full bg-gradient-to-br ".concat(u(h.type)," flex items-center justify-center mb-4 animate-pulse"),children:(e=>{switch(e){case"streak":return(0,s.jsx)(t_.Trophy,{className:"w-16 h-16 text-yellow-400"});case"pb":return(0,s.jsx)(tI,{className:"w-16 h-16 text-blue-400"});case"record":return(0,s.jsx)(tD.Award,{className:"w-16 h-16 text-green-400"});default:return(0,s.jsx)(tz,{className:"w-16 h-16 text-purple-400"})}})(h.type)})}),(0,s.jsxs)("h2",{className:"text-3xl font-bold text-white mb-4",children:["**",h.title,"**"]}),(0,s.jsx)("p",{className:"text-lg text-gray-300 mb-8",children:h.description}),(0,s.jsx)("button",{onClick:()=>{n(h.id),i<t.length-1?(c(e=>e+1),m(!0),o&&console.log("🎵 次のご褒美音を再生")):l()},className:"w-full py-4 px-8 rounded-xl font-bold text-lg transition-all duration-300 bg-gradient-to-r ".concat(u(h.type)," hover:scale-105 hover:shadow-lg"),children:"**ご褒美を獲得！**"}),t.length>1&&(0,s.jsx)("div",{className:"mt-6",children:(0,s.jsx)("div",{className:"w-full bg-gray-700 rounded-full h-2",children:(0,s.jsx)("div",{className:"h-2 rounded-full bg-gradient-to-r ".concat(u(h.type)," transition-all duration-500"),style:{width:"".concat((i+1)/t.length*100,"%")}})})})]})]})}):null}function tF(e){let{streakDays:t,pbCount:r,recordCount:l,onRewardClaimed:n}=e,[i,c]=(0,a.useState)([]),[o,d]=(0,a.useState)(!1),[x,m]=(0,a.useState)([]),h=[{type:"streak",days:10,title:"連続10日達成！",description:"素晴らしい継続力です！"},{type:"streak",days:20,title:"連続20日達成！",description:"習慣が定着してきました！"},{type:"streak",days:30,title:"連続30日達成！",description:"完璧な習慣化です！"},{type:"streak",days:50,title:"連続50日達成！",description:"驚異的な継続力！"},{type:"streak",days:100,title:"連続100日達成！",description:"伝説の継続者！"},{type:"pb",title:"PB更新！",description:"新しい自己ベストを記録しました！"},{type:"record",days:7,title:"記録7日連続！",description:"毎日の記録が習慣化されました！"},{type:"record",days:14,title:"記録14日連続！",description:"記録の達人です！"},{type:"record",days:30,title:"記録30日連続！",description:"記録のマスター！"}];(0,a.useEffect)(()=>{let e=[];h.filter(e=>"streak"===e.type).forEach(s=>{t>=s.days&&!i.some(e=>e.title===s.title)&&e.push({id:"streak-".concat(s.days),type:"streak",title:s.title,description:s.description,icon:"🏆",isClaimed:!1})}),r>0&&!i.some(e=>"pb"===e.type&&!e.isClaimed)&&e.push({id:"pb-".concat(Date.now()),type:"pb",title:"PB更新！",description:"新しい自己ベストを記録しました！",icon:"⭐",isClaimed:!1}),h.filter(e=>"record"===e.type).forEach(t=>{l>=t.days&&!i.some(e=>e.title===t.title)&&e.push({id:"record-".concat(t.days),type:"record",title:t.title,description:t.description,icon:"📝",isClaimed:!1})}),e.length>0&&(m(e),d(!0))},[t,r,l]);let u=e=>{switch(e){case"streak":if(t<10)return"連続10日";if(t<20)return"連続20日";if(t<30)return"連続30日";if(t<50)return"連続50日";if(t<100)return"連続100日";return"全て達成済み";case"record":if(l<7)return"記録7日連続";if(l<14)return"記録14日連続";if(l<30)return"記録30日連続";return"全て達成済み";default:return"次のご褒美"}};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"**ご褒美システム**"}),(0,s.jsx)("p",{className:"text-gray-400 mb-6",children:"達成条件を満たしたら必ずモーダル演出。同時達成はキューで順次表示。"}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[(0,s.jsxs)("div",{className:"bg-gray-700 rounded-lg p-4 text-center",children:[(0,s.jsx)(t_.Trophy,{className:"w-8 h-8 text-yellow-400 mx-auto mb-2"}),(0,s.jsxs)("div",{className:"text-2xl font-bold text-yellow-400",children:[t,"日"]}),(0,s.jsx)("div",{className:"text-sm text-gray-400",children:"連続日数"}),(0,s.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["次: ",u("streak")]})]}),(0,s.jsxs)("div",{className:"bg-gray-700 rounded-lg p-4 text-center",children:[(0,s.jsx)(tI,{className:"w-8 h-8 text-blue-400 mx-auto mb-2"}),(0,s.jsxs)("div",{className:"text-2xl font-bold text-blue-400",children:[r,"回"]}),(0,s.jsx)("div",{className:"text-sm text-gray-400",children:"PB更新"}),(0,s.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"次: 新しいPB"})]}),(0,s.jsxs)("div",{className:"bg-gray-700 rounded-lg p-4 text-center",children:[(0,s.jsx)(tD.Award,{className:"w-8 h-8 text-green-400 mx-auto mb-2"}),(0,s.jsxs)("div",{className:"text-2xl font-bold text-green-400",children:[l,"日"]}),(0,s.jsx)("div",{className:"text-sm text-gray-400",children:"記録連続"}),(0,s.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["次: ",u("record")]})]})]})]}),(0,s.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6",children:[(0,s.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"**ご褒美テンプレート**"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h4",{className:"text-lg font-semibold text-yellow-400 mb-3 flex items-center space-x-2",children:[(0,s.jsx)(t_.Trophy,{className:"w-5 h-5"}),(0,s.jsx)("span",{children:"連続日数"})]}),(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-2",children:[10,20,30,50,100].map(e=>(0,s.jsxs)("div",{className:"p-3 rounded-lg text-center ".concat(t>=e?"bg-yellow-600 text-white":"bg-gray-700 text-gray-400"),children:[(0,s.jsxs)("div",{className:"font-bold",children:[e,"日"]}),(0,s.jsx)("div",{className:"text-xs",children:t>=e?"達成済み":"未達成"})]},e))})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("h4",{className:"text-lg font-semibold text-blue-400 mb-3 flex items-center space-x-2",children:[(0,s.jsx)(tI,{className:"w-5 h-5"}),(0,s.jsx)("span",{children:"PB更新"})]}),(0,s.jsx)("div",{className:"bg-gray-700 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{children:"自己ベスト更新"}),(0,s.jsx)("span",{className:"text-blue-400 font-semibold",children:r>0?"達成済み":"未達成"})]})})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("h4",{className:"text-lg font-semibold text-green-400 mb-3 flex items-center space-x-2",children:[(0,s.jsx)(tD.Award,{className:"w-5 h-5"}),(0,s.jsx)("span",{children:"記録連続"})]}),(0,s.jsx)("div",{className:"grid grid-cols-3 gap-2",children:[7,14,30].map(e=>(0,s.jsxs)("div",{className:"p-3 rounded-lg text-center ".concat(l>=e?"bg-green-600 text-white":"bg-gray-700 text-gray-400"),children:[(0,s.jsxs)("div",{className:"font-bold",children:[e,"日"]}),(0,s.jsx)("div",{className:"text-xs",children:l>=e?"達成済み":"未達成"})]},e))})]})]})]}),(0,s.jsx)(tK,{rewards:x,isOpen:o,onClose:()=>{d(!1),m([])},onClaim:e=>{c(t=>t.map(t=>t.id===e?{...t,isClaimed:!0,claimedAt:new Date().toISOString()}:t)),n(e)}})]})}let tW=(0,r.default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),tG=(0,r.default)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),tV=(0,r.default)("cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]),tq=(0,r.default)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),tH=(0,r.default)("tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]),tU=(0,r.default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);function tX(e){let{onClose:t,habitId:r,initialAction:l}=e,{addExtendedRecord:n}=(0,x.useMiniAppStore)(),[i,c]=(0,a.useState)({action:l||"",record_type:"simple",target_duration:30,actual_duration:0,score:0,predicted_mood:3,actual_mood:3,difficulty:3,notes:"",tags:[],location:"",weather:"",energy_level:3}),[o,d]=(0,a.useState)(""),[m,h]=(0,a.useState)(!1),u=async()=>{h(!0);try{let e={id:Date.now().toString(),user_id:"current-user",habit_id:r,action:i.action,record_type:i.record_type,target_duration:"simple"!==i.record_type?i.target_duration:void 0,actual_duration:i.actual_duration||void 0,score:"score_attack"===i.record_type?i.score:void 0,predicted_mood:i.predicted_mood,actual_mood:i.actual_mood,difficulty:i.difficulty,notes:i.notes||void 0,tags:i.tags.length>0?i.tags:void 0,location:i.location||void 0,weather:i.weather||void 0,energy_level:i.energy_level,created_at:new Date().toISOString()};n(e),t()}catch(e){console.error("拡張記録の保存エラー:",e)}finally{h(!1)}},g=()=>{o.trim()&&!i.tags.includes(o.trim())&&(c(e=>({...e,tags:[...e.tags,o.trim()]})),d(""))};return(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-gray-800 rounded-xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-white text-lg",children:"📊"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-white",children:"拡張記録"}),(0,s.jsx)("p",{className:"text-sm text-gray-400",children:"より詳細な記録を残しましょう"})]})]}),(0,s.jsx)("button",{onClick:t,className:"w-8 h-8 bg-gray-700 rounded-lg flex items-center justify-center hover:bg-gray-600 transition-colors",children:(0,s.jsx)(tR.X,{size:16,className:"text-gray-300"})})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-gray-700 rounded-lg p-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"基本情報"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"行動内容"}),(0,s.jsx)("input",{type:"text",value:i.action,onChange:e=>c(t=>({...t,action:e.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-3 py-2 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"実行した行動を入力",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"記録タイプ"}),(0,s.jsxs)("select",{value:i.record_type,onChange:e=>c(t=>({...t,record_type:e.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-3 py-2 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,s.jsx)("option",{value:"simple",children:"単純記録"}),(0,s.jsx)("option",{value:"time_attack",children:"タイムアタック"}),(0,s.jsx)("option",{value:"score_attack",children:"スコアアタック"})]})]})]})]}),("time_attack"===i.record_type||"score_attack"===i.record_type)&&(0,s.jsxs)("div",{className:"bg-gray-700 rounded-lg p-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"時間・スコア"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:["time_attack"===i.record_type&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"目標時間（分）"}),(0,s.jsx)("input",{type:"number",value:i.target_duration,onChange:e=>c(t=>({...t,target_duration:parseInt(e.target.value)||0})),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-3 py-2 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"1"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"実際の時間（分）"}),(0,s.jsx)("input",{type:"number",value:i.actual_duration,onChange:e=>c(t=>({...t,actual_duration:parseInt(e.target.value)||0})),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-3 py-2 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"0",step:"0.1"})]})]}),"score_attack"===i.record_type&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"スコア"}),(0,s.jsx)("input",{type:"number",value:i.score,onChange:e=>c(t=>({...t,score:parseInt(e.target.value)||0})),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-3 py-2 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"0"})]})]})]}),(0,s.jsxs)("div",{className:"bg-gray-700 rounded-lg p-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"気分・難易度"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"予測気分 (1-5)"}),(0,s.jsx)("div",{className:"flex space-x-2",children:[1,2,3,4,5].map(e=>(0,s.jsx)("button",{onClick:()=>c(t=>({...t,predicted_mood:e})),className:"w-10 h-10 rounded-lg border-2 transition-all ".concat(i.predicted_mood===e?"border-blue-500 bg-blue-500 bg-opacity-20 text-blue-400":"border-gray-600 text-gray-300 hover:border-gray-500"),children:e},e))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"実際の気分 (1-5)"}),(0,s.jsx)("div",{className:"flex space-x-2",children:[1,2,3,4,5].map(e=>(0,s.jsx)("button",{onClick:()=>c(t=>({...t,actual_mood:e})),className:"w-10 h-10 rounded-lg border-2 transition-all ".concat(i.actual_mood===e?"border-green-500 bg-green-500 bg-opacity-20 text-green-400":"border-gray-600 text-gray-300 hover:border-gray-500"),children:e},e))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"難易度 (1-5)"}),(0,s.jsx)("div",{className:"flex space-x-2",children:[1,2,3,4,5].map(e=>(0,s.jsx)("button",{onClick:()=>c(t=>({...t,difficulty:e})),className:"w-10 h-10 rounded-lg border-2 transition-all ".concat(i.difficulty===e?"border-orange-500 bg-orange-500 bg-opacity-20 text-orange-400":"border-gray-600 text-gray-300 hover:border-gray-500"),children:e},e))})]})]})]}),(0,s.jsxs)("div",{className:"bg-gray-700 rounded-lg p-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"詳細情報"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[(0,s.jsx)(tG,{size:16,className:"inline mr-1"}),"場所"]}),(0,s.jsx)("input",{type:"text",value:i.location,onChange:e=>c(t=>({...t,location:e.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-3 py-2 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"実行した場所"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[(0,s.jsx)(tV,{size:16,className:"inline mr-1"}),"天気"]}),(0,s.jsxs)("select",{value:i.weather,onChange:e=>c(t=>({...t,weather:e.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-3 py-2 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,s.jsx)("option",{value:"",children:"選択してください"}),(0,s.jsx)("option",{value:"sunny",children:"晴れ"}),(0,s.jsx)("option",{value:"cloudy",children:"曇り"}),(0,s.jsx)("option",{value:"rainy",children:"雨"}),(0,s.jsx)("option",{value:"snowy",children:"雪"})]})]})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[(0,s.jsx)(tq,{size:16,className:"inline mr-1"}),"エネルギーレベル (1-5)"]}),(0,s.jsx)("div",{className:"flex space-x-2",children:[1,2,3,4,5].map(e=>(0,s.jsx)("button",{onClick:()=>c(t=>({...t,energy_level:e})),className:"w-10 h-10 rounded-lg border-2 transition-all ".concat(i.energy_level===e?"border-yellow-500 bg-yellow-500 bg-opacity-20 text-yellow-400":"border-gray-600 text-gray-300 hover:border-gray-500"),children:e},e))})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[(0,s.jsx)(tH,{size:16,className:"inline mr-1"}),"タグ"]}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2 mb-2",children:i.tags.map((e,t)=>(0,s.jsxs)("span",{className:"bg-blue-600 text-white px-2 py-1 rounded-lg text-sm flex items-center space-x-1",children:[(0,s.jsx)("span",{children:e}),(0,s.jsx)("button",{onClick:()=>{c(t=>({...t,tags:t.tags.filter(t=>t!==e)}))},className:"hover:text-red-300",children:(0,s.jsx)(tR.X,{size:12})})]},t))}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)("input",{type:"text",value:o,onChange:e=>d(e.target.value),onKeyPress:e=>"Enter"===e.key&&g(),className:"flex-1 bg-gray-800 border border-gray-600 rounded-lg px-3 py-2 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"タグを入力してEnter"}),(0,s.jsx)("button",{onClick:g,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:(0,s.jsx)(tW,{size:16})})]})]})]}),(0,s.jsxs)("div",{className:"bg-gray-700 rounded-lg p-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"メモ"}),(0,s.jsx)("textarea",{value:i.notes,onChange:e=>c(t=>({...t,notes:e.target.value})),rows:4,className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-3 py-2 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",placeholder:"感想や気づきを記録..."})]}),(0,s.jsxs)("div",{className:"flex space-x-3",children:[(0,s.jsx)("button",{onClick:t,className:"flex-1 px-4 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"キャンセル"}),(0,s.jsx)("button",{onClick:u,disabled:!i.action.trim()||m,className:"flex-1 px-4 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:m?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,s.jsx)("span",{children:"保存中..."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(tU,{size:16}),(0,s.jsx)("span",{children:"保存"})]})})]})]})]})})}let tY=(0,r.default)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]),tJ=(0,r.default)("pause",[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]]),tZ=(0,r.default)("square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),tQ=(0,r.default)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);function t$(e){let{onClose:t,habitId:r}=e,{timeAttackChains:l,addTimeAttackChain:n,updateTimeAttackChain:i}=(0,x.useMiniAppStore)(),[c,o]=(0,a.useState)(null),[d,m]=(0,a.useState)(!1),[h,u]=(0,a.useState)(0),[g,p]=(0,a.useState)(null),[b,y]=(0,a.useState)(0),[f,j]=(0,a.useState)(!1),[v,N]=(0,a.useState)(""),[w,k]=(0,a.useState)(""),[A,S]=(0,a.useState)([]);(0,a.useEffect)(()=>{let e=l.find(e=>e.habit_id===r&&e.is_active);if(e)o(e);else{let e={id:"chain-".concat(r,"-").concat(Date.now()),user_id:"current-user",habit_id:r,chain_name:"デフォルトチェーン",description:"基本的なタイムアタックチェーン",target_times:[30,60,90,120],best_times:[],attempts:0,is_active:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};n(e),o(e)}},[r,l,n]),(0,a.useEffect)(()=>{let e;return d&&g&&(e=setInterval(()=>{y(Math.floor((new Date().getTime()-g.getTime())/1e3))},100)),()=>{e&&clearInterval(e)}},[d,g]);let C=e=>{let t=Math.floor(e/60),s=Math.floor(e%1*10);return"".concat(t,":").concat((e%60).toString().padStart(2,"0"),".").concat(s)},T=()=>c?c.target_times[h]:0;return c?(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-gray-800 rounded-xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-orange-500 to-red-500 rounded-full flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-white text-lg",children:"⏱️"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-white",children:"タイムアタックチェーン"}),(0,s.jsx)("p",{className:"text-sm text-gray-400",children:c.chain_name})]})]}),(0,s.jsx)("button",{onClick:t,className:"w-8 h-8 bg-gray-700 rounded-lg flex items-center justify-center hover:bg-gray-600 transition-colors",children:(0,s.jsx)(tR.X,{size:16,className:"text-gray-300"})})]}),(0,s.jsxs)("div",{className:"bg-gray-700 rounded-lg p-6 mb-6",children:[(0,s.jsxs)("div",{className:"text-center mb-4",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-white mb-2",children:["ステップ ",h+1," / ",c.target_times.length]}),(0,s.jsx)("div",{className:"text-4xl font-bold text-orange-400 mb-2",children:C(b)}),(0,s.jsxs)("div",{className:"text-sm text-gray-400",children:["目標: ",C(T())]})]}),(0,s.jsx)("div",{className:"w-full bg-gray-600 rounded-full h-3 mb-4",children:(0,s.jsx)("div",{className:"bg-gradient-to-r from-orange-400 to-red-500 h-3 rounded-full transition-all duration-300",style:{width:"".concat(Math.min(b/T()*100,100),"%")}})}),(0,s.jsxs)("div",{className:"flex justify-center space-x-3",children:[d?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("button",{onClick:()=>{m(!1)},className:"px-6 py-3 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors flex items-center space-x-2",children:[(0,s.jsx)(tJ,{size:20}),(0,s.jsx)("span",{children:"一時停止"})]}),(0,s.jsxs)("button",{onClick:()=>{if(c&&g){let e=[...c.best_times];h<c.target_times.length&&(e[h]=b),i(c.id,{best_times:e,attempts:c.attempts+1,updated_at:new Date().toISOString()})}m(!1),p(null),y(0),u(0)},className:"px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex items-center space-x-2",children:[(0,s.jsx)(tZ,{size:20}),(0,s.jsx)("span",{children:"終了"})]})]}):(0,s.jsxs)("button",{onClick:()=>{m(!0),p(new Date),u(0),y(0)},className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center space-x-2",children:[(0,s.jsx)(tY,{size:20}),(0,s.jsx)("span",{children:"開始"})]}),!d&&b>0&&(0,s.jsxs)("button",{onClick:()=>{g&&(p(new Date(Date.now()-1e3*b)),m(!0))},className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[(0,s.jsx)(tY,{size:20}),(0,s.jsx)("span",{children:"再開"})]}),(0,s.jsxs)("button",{onClick:()=>{m(!1),p(null),y(0),u(0)},className:"px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors flex items-center space-x-2",children:[(0,s.jsx)(tQ,{size:20}),(0,s.jsx)("span",{children:"リセット"})]})]})]}),(0,s.jsxs)("div",{className:"bg-gray-700 rounded-lg p-6 mb-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"チェーン進捗"}),(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:c.target_times.map((e,t)=>(0,s.jsx)("div",{className:"p-4 rounded-lg border-2 transition-all ".concat(t===h&&d?"border-orange-500 bg-orange-500 bg-opacity-10":c&&void 0!==c.best_times[h]?"border-green-500 bg-green-500 bg-opacity-10":t<h?"border-gray-500 bg-gray-500 bg-opacity-10":"border-gray-600 bg-gray-600 bg-opacity-10"),children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("div",{className:"text-lg font-bold text-white mb-1",children:["ステップ ",t+1]}),(0,s.jsxs)("div",{className:"text-sm text-gray-400 mb-2",children:["目標: ",C(e)]}),void 0!==c.best_times[t]?(0,s.jsxs)("div",{className:"text-green-400 font-semibold",children:[(0,s.jsx)(t_.Trophy,{size:16,className:"inline mr-1"}),C(c.best_times[t])]}):(0,s.jsx)("div",{className:"text-gray-500",children:"未達成"})]})},t))})]}),(0,s.jsxs)("div",{className:"bg-gray-700 rounded-lg p-6 mb-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"統計"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-blue-400",children:c.attempts}),(0,s.jsx)("div",{className:"text-sm text-gray-400",children:"総試行回数"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-green-400",children:c.best_times.filter(e=>void 0!==e).length}),(0,s.jsx)("div",{className:"text-sm text-gray-400",children:"完了ステップ"})]})]})]}),(0,s.jsxs)("button",{onClick:()=>j(!0),className:"w-full px-4 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all duration-200 flex items-center justify-center space-x-2",children:[(0,s.jsx)(tW,{size:16}),(0,s.jsx)("span",{children:"新しいチェーンを作成"})]}),f&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-gray-800 rounded-xl p-6 max-w-md w-full",children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-white mb-4",children:"新しいチェーンを作成"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"チェーン名"}),(0,s.jsx)("input",{type:"text",value:v,onChange:e=>N(e.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"例: 朝のルーティーン"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"説明（任意）"}),(0,s.jsx)("textarea",{value:w,onChange:e=>k(e.target.value),rows:3,className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",placeholder:"チェーンの説明を入力..."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"目標時間（秒）"}),(0,s.jsxs)("div",{className:"space-y-2",children:[A.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("input",{type:"number",value:e,onChange:e=>((e,t)=>{let s=[...A];s[e]=t,S(s)})(t,parseInt(e.target.value)||0),className:"flex-1 bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"1"}),(0,s.jsx)("button",{onClick:()=>{S(A.filter((e,s)=>s!==t))},className:"w-8 h-8 bg-red-600 rounded-lg flex items-center justify-center hover:bg-red-700 transition-colors",children:(0,s.jsx)(tR.X,{size:14,className:"text-white"})})]},t)),(0,s.jsxs)("button",{onClick:()=>{S([...A,30])},className:"w-full px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors flex items-center justify-center space-x-2",children:[(0,s.jsx)(tW,{size:16}),(0,s.jsx)("span",{children:"目標時間を追加"})]})]})]})]}),(0,s.jsxs)("div",{className:"flex space-x-3 mt-6",children:[(0,s.jsx)("button",{onClick:()=>j(!1),className:"flex-1 px-4 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"キャンセル"}),(0,s.jsx)("button",{onClick:()=>{if(v.trim()&&A.length>0){let e={id:"chain-".concat(r,"-").concat(Date.now()),user_id:"current-user",habit_id:r,chain_name:v.trim(),description:w.trim(),target_times:A,best_times:[],attempts:0,is_active:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};n(e),o(e),j(!1),N(""),k(""),S([])}},disabled:!v.trim()||0===A.length,className:"flex-1 px-4 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:"作成"})]})]})})]})}):(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-gray-800 rounded-xl p-6 max-w-md w-full text-center",children:[(0,s.jsx)("div",{className:"animate-spin w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-300",children:"チェーンを準備中..."})]})})}var t0=e.i(86009),t1=e.i(37170),t2=e.i(70915);let t4=[{id:"1",icon:"sun",name:"朝の日光浴",time:"07:00",status:"completed"},{id:"2",icon:"book",name:"読書",time:"20:00",status:"pending"},{id:"3",icon:"dumbbell",name:"筋トレ",time:"19:00",status:"skipped"}],t3=[{name:"完了",value:1,color:"#10B981"},{name:"未完了",value:2,color:"#6B7280"}],t6=[{day:"月",predicted:4,actual:3},{day:"火",predicted:3,actual:4},{day:"水",predicted:4,actual:4},{day:"木",predicted:3,actual:2},{day:"金",predicted:4,actual:5},{day:"土",predicted:5,actual:4},{day:"日",predicted:4,actual:4}];function t5(e){let{onShowResult:t}=e,[r,l]=(0,a.useState)("day"),[n,c]=(0,a.useState)(!1),[o,d]=(0,a.useState)(!1),[m,h]=(0,a.useState)(3),[u,g]=(0,a.useState)(!1),[p,b]=(0,a.useState)(!1),[y,f]=(0,a.useState)(!1),[j,v]=(0,a.useState)([{id:"progress",name:"今日の進捗",visible:!0},{id:"result-summary",name:"リザルトサマリー",visible:!0},{id:"mood-graph",name:"予測気分vs結果気分",visible:!0},{id:"reward-system",name:"ご褒美システム",visible:!0},{id:"pb-update",name:"PB更新",visible:!1},{id:"streak-record",name:"記録連続",visible:!1},{id:"habit-performance",name:"習慣別パフォーマンス",visible:!1},{id:"community-status",name:"コミュニティ状況",visible:!1},{id:"miniapp-access",name:"MiniAppアクセス",visible:!0}]),{miniApps:N,enabledMiniApps:w}=(0,x.useMiniAppStore)(),{setCurrentTab:k}=(0,x.useNavigationStore)(),[A,S]=(0,a.useState)(navigator.onLine);a.default.useEffect(()=>{let e=()=>S(!0),t=()=>S(!1);return window.addEventListener("online",e),window.addEventListener("offline",t),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}},[]);let C={day:{totalHabits:3,completedHabits:1,cumulativeDifference:-45,streakDays:7,rewardsEarned:2,startTimeEvaluation:"on-time"},week:{totalHabits:21,completedHabits:18,cumulativeDifference:-120,streakDays:7,rewardsEarned:5,startTimeEvaluation:"early"},month:{totalHabits:90,completedHabits:75,cumulativeDifference:-300,streakDays:7,rewardsEarned:12,startTimeEvaluation:"late"}}[r],T=e=>{v(t=>t.map(t=>t.id===e?{...t,visible:!t.visible}:t))},O=j.filter(e=>e.visible),P=j.filter(e=>!e.visible);return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-900 text-white",children:[(0,s.jsxs)("div",{className:"px-4 pt-4 pb-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-white tracking-wide",children:"今日の習慣"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("button",{onClick:()=>c(!0),className:"relative w-8 h-8 flex items-center justify-center",children:[(0,s.jsx)("span",{className:"text-lg",children:"🔔"}),m>0&&(0,s.jsx)("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center text-xs",children:m})]}),(0,s.jsx)("button",{onClick:()=>{console.log("Gift寄付ページへ"),window.location.href="/gift-donation"},className:"w-8 h-8 flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-lg",children:"🎁"})}),(0,s.jsx)("button",{onClick:()=>d(!0),className:"w-8 h-8 flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-lg",children:"💎"})}),(0,s.jsx)("button",{onClick:()=>g(!u),className:"w-8 h-8 flex items-center justify-center rounded-lg transition-colors ".concat(u?"bg-blue-600 text-white":"text-gray-400 hover:text-white"),children:(0,s.jsx)(i,{size:18})})]})]}),(0,s.jsx)("p",{className:"text-gray-300 text-sm font-medium",children:"2024年1月15日"}),!A&&(0,s.jsx)("div",{className:"mt-2 px-3 py-1 bg-yellow-600 bg-opacity-20 border border-yellow-500 rounded-lg",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-yellow-400 rounded-full"}),(0,s.jsx)("span",{className:"text-yellow-400 text-xs",children:"オフライン - モック決済モード"})]})})]}),(0,s.jsx)("div",{className:"px-4 mb-4",children:(0,s.jsx)("div",{className:"flex space-x-1 bg-gray-800 rounded-xl p-1",children:["day","week","month"].map(e=>(0,s.jsx)("button",{onClick:()=>l(e),className:"flex-1 py-3 rounded-lg text-sm font-medium transition-colors ".concat(r===e?"bg-blue-600 text-white":"text-gray-400"),children:"day"===e?"日":"week"===e?"週":"月"},e))})}),u&&(0,s.jsx)("div",{className:"px-4 mb-4",children:(0,s.jsxs)("div",{className:"bg-blue-900 bg-opacity-30 border border-blue-500 rounded-lg p-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-blue-400 mb-2",children:"編集モード"}),(0,s.jsx)("p",{className:"text-sm text-gray-300 mb-3",children:"カードの表示/非表示を切り替えて、ホーム画面をカスタマイズできます。"}),(0,s.jsx)("div",{className:"flex gap-2",children:(0,s.jsx)("button",{onClick:()=>g(!1),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:"完了"})})]})}),O.find(e=>"result-summary"===e.id)&&(0,s.jsx)("div",{className:"px-4 mb-4",children:(0,s.jsxs)("div",{className:"bg-gray-800 rounded-xl p-4 relative",children:[u&&(0,s.jsx)("button",{onClick:()=>T("result-summary"),className:"absolute top-2 right-2 w-6 h-6 bg-red-600 text-white rounded-full flex items-center justify-center hover:bg-red-700 transition-colors",children:(0,s.jsx)(tR.X,{size:14})}),(0,s.jsx)("h2",{className:"text-lg font-bold text-white mb-3 tracking-wide",children:"リザルトサマリー"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[(0,s.jsx)("div",{className:"bg-gray-700 rounded-xl p-3",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-gray-300 font-medium",children:"完了率"}),(0,s.jsxs)("p",{className:"text-xl font-bold text-green-400",children:[Math.round(C.completedHabits/C.totalHabits*100),"%"]})]}),(0,s.jsx)(t1.Target,{className:"w-6 h-6 text-green-400"})]})}),(0,s.jsx)("div",{className:"bg-gray-700 rounded-xl p-3",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-gray-300 font-medium",children:"累計差分"}),(0,s.jsx)("p",{className:"text-xl font-bold ".concat(C.cumulativeDifference<0?"text-red-400":"text-green-400"),children:(e=>{let t=Math.abs(e),s=Math.floor(t/60);return"".concat(e<0?"-":"+").concat(s,":").concat((t%60).toString().padStart(2,"0"))})(C.cumulativeDifference)})]}),(0,s.jsx)(t0.TrendingUp,{className:"w-6 h-6 text-blue-400"})]})}),(0,s.jsx)("div",{className:"bg-gray-700 rounded-xl p-3",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-gray-300 font-medium",children:"連続日数"}),(0,s.jsxs)("p",{className:"text-xl font-bold text-blue-400",children:[C.streakDays,"日"]})]}),(0,s.jsx)(t_.Trophy,{className:"w-6 h-6 text-blue-400"})]})}),(0,s.jsx)("div",{className:"bg-gray-700 rounded-xl p-3",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-gray-300 font-medium",children:"ご褒美獲得"}),(0,s.jsxs)("p",{className:"text-xl font-bold text-yellow-400",children:[C.rewardsEarned,"個"]})]}),(0,s.jsx)(tD.Award,{className:"w-6 h-6 text-yellow-400"})]})})]}),(0,s.jsx)("div",{className:"bg-gray-700 rounded-xl p-3 mb-3",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-sm font-bold text-white",children:"開始時間評価"}),(0,s.jsxs)("p",{className:"text-xs text-gray-400",children:["early"===C.startTimeEvaluation&&"早めに開始","on-time"===C.startTimeEvaluation&&"オンタイム","late"===C.startTimeEvaluation&&"遅れて開始"]})]}),(e=>{switch(e){case"early":return(0,s.jsx)(t2.Clock,{className:"w-5 h-5 text-green-400"});case"on-time":return(0,s.jsx)(t2.Clock,{className:"w-5 h-5 text-blue-400"});case"late":return(0,s.jsx)(t2.Clock,{className:"w-5 h-5 text-red-400"});default:return(0,s.jsx)(t2.Clock,{className:"w-5 h-5 text-gray-400"})}})(C.startTimeEvaluation)]})}),(0,s.jsxs)("div",{className:"bg-gray-700 rounded-xl p-3",children:[(0,s.jsx)("h3",{className:"text-sm font-bold text-white mb-3",children:"予測気分 vs 結果気分"}),(0,s.jsx)("div",{className:"w-full h-36",children:(0,s.jsxs)(tv.LineChart,{width:300,height:144,data:t6,children:[(0,s.jsx)(tA.CartesianGrid,{strokeDasharray:"3 3",stroke:"#374151"}),(0,s.jsx)(tw.XAxis,{dataKey:"day",stroke:"#9CA3AF",fontSize:12}),(0,s.jsx)(tk.YAxis,{stroke:"#9CA3AF",domain:[1,5],fontSize:12}),(0,s.jsx)(tS.Tooltip,{contentStyle:{backgroundColor:"#1F2937",border:"1px solid #374151",borderRadius:"8px",color:"#F9FAFB",fontSize:"12px"}}),(0,s.jsx)(tN.Line,{type:"monotone",dataKey:"predicted",stroke:"#3B82F6",strokeWidth:2,name:"予測気分",dot:{fill:"#3B82F6",strokeWidth:2,r:3}}),(0,s.jsx)(tN.Line,{type:"monotone",dataKey:"actual",stroke:"#10B981",strokeWidth:2,name:"結果気分",dot:{fill:"#10B981",strokeWidth:2,r:3}})]})})]})]})}),O.find(e=>"progress"===e.id)&&(0,s.jsx)("div",{className:"px-4 mb-4",children:(0,s.jsxs)("div",{className:"bg-gray-800 rounded-xl p-4 relative",children:[u&&(0,s.jsx)("button",{onClick:()=>T("progress"),className:"absolute top-2 right-2 w-6 h-6 bg-red-600 text-white rounded-full flex items-center justify-center hover:bg-red-700 transition-colors",children:(0,s.jsx)(tR.X,{size:14})}),(0,s.jsx)("h2",{className:"text-lg font-bold text-white mb-3 tracking-wide",children:"今日の進捗"}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)("div",{className:"w-full h-24",children:(0,s.jsx)(E,{width:200,height:96,children:(0,s.jsx)(tj,{data:t3,cx:"50%",cy:"50%",innerRadius:30,outerRadius:50,paddingAngle:5,dataKey:"value",children:t3.map((e,t)=>(0,s.jsx)(ex,{fill:e.color},"cell-".concat(t)))})})})}),(0,s.jsxs)("div",{className:"ml-4",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-green-400",children:"1/3"}),(0,s.jsx)("div",{className:"text-xs text-gray-400",children:"完了"})]})]})]})}),(0,s.jsxs)("div",{className:"px-4 mb-4",children:[(0,s.jsx)("h2",{className:"text-lg font-bold text-white mb-3 tracking-wide",children:"今日のルーティーン"}),(0,s.jsx)("div",{className:"space-y-3",children:t4.map(e=>(0,s.jsx)(tM,{habit:e},e.id))})]}),O.find(e=>"reward-system"===e.id)&&(0,s.jsx)("div",{className:"px-4 mb-4",children:(0,s.jsx)(tF,{streakDays:C.streakDays,pbCount:0,recordCount:0,onRewardClaimed:e=>{console.log("Reward claimed:",e)}})}),O.find(e=>"miniapp-access"===e.id)&&(0,s.jsx)("div",{className:"px-4 mb-4",children:(0,s.jsxs)("div",{className:"bg-gray-800 rounded-xl p-4 relative",children:[u&&(0,s.jsx)("button",{onClick:()=>T("miniapp-access"),className:"absolute top-2 right-2 w-6 h-6 bg-red-600 text-white rounded-full flex items-center justify-center hover:bg-red-700 transition-colors",children:(0,s.jsx)(tR.X,{size:14})}),(0,s.jsx)("h2",{className:"text-lg font-bold text-white mb-3 tracking-wide",children:"MiniAppアクセス"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[w.map(e=>(0,s.jsx)("button",{onClick:()=>{"extended_record"===e.type?b(!0):"time_attack_chain"===e.type&&f(!0)},className:"p-4 bg-gray-700 rounded-lg hover:bg-gray-600 transition-colors text-left",children:(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("span",{className:"text-2xl",children:e.icon}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-white font-medium text-sm",children:e.name}),(0,s.jsx)("div",{className:"text-gray-400 text-xs",children:e.description})]})]})},e.id)),N.filter(e=>!e.isUnlocked).map(e=>(0,s.jsxs)("div",{className:"p-4 bg-gray-700 bg-opacity-50 rounded-lg border border-gray-600 text-left relative",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3 opacity-50",children:[(0,s.jsx)("span",{className:"text-2xl",children:e.icon}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-white font-medium text-sm",children:e.name}),(0,s.jsx)("div",{className:"text-gray-400 text-xs",children:e.description})]})]}),(0,s.jsx)("div",{className:"absolute top-2 right-2",children:(0,s.jsx)("span",{className:"bg-yellow-600 text-white text-xs px-2 py-1 rounded",children:"🔒"})})]},e.id))]})]})}),u&&P.length>0&&(0,s.jsx)("div",{className:"px-4 mb-4",children:(0,s.jsxs)("div",{className:"bg-gray-800 rounded-xl p-4",children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-white mb-3",children:"追加できるカード"}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-3",children:P.map(e=>(0,s.jsx)("button",{onClick:()=>T(e.id),className:"p-3 bg-gray-700 rounded-lg hover:bg-gray-600 transition-colors text-left",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(tW,{size:16,className:"text-green-400"}),(0,s.jsx)("span",{className:"text-sm text-white",children:e.name})]})},e.id))})]})}),(0,s.jsx)("div",{className:"px-4 pb-6",children:(0,s.jsx)("button",{onClick:t,className:"w-full bg-blue-600 text-white py-4 rounded-xl font-semibold hover:bg-blue-700 transition-colors",children:"詳細リザルトを見る"})}),p&&(0,s.jsx)(tX,{onClose:()=>b(!1)}),y&&(0,s.jsx)(t$,{onClose:()=>f(!1),habitId:"default-habit"}),n&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-gray-800 rounded-xl p-6 w-11/12 max-w-md",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h2",{className:"text-xl font-bold",children:"通知"}),(0,s.jsx)("button",{onClick:()=>c(!1),className:"text-gray-400 hover:text-white",children:"✕"})]}),(0,s.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,s.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-gray-700 rounded-lg",children:[(0,s.jsx)("span",{className:"text-2xl",children:"🏆"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold",children:"PB更新!"}),(0,s.jsx)("p",{className:"text-sm text-gray-400",children:"新しい自己ベストを記録しました!"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"2時間前"})]})]}),(0,s.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-gray-700 rounded-lg",children:[(0,s.jsx)("span",{className:"text-2xl",children:"🔥"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold",children:"連続記録達成!"}),(0,s.jsx)("p",{className:"text-sm text-gray-400",children:"7日間連続で習慣を達成しました"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"1日前"})]})]}),(0,s.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-gray-700 rounded-lg",children:[(0,s.jsx)("span",{className:"text-2xl",children:"🎉"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold",children:"マイルストーン達成!"}),(0,s.jsx)("p",{className:"text-sm text-gray-400",children:"100回目の習慣達成おめでとう!"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"3日前"})]})]})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>{h(0),c(!1)},className:"flex-1 bg-gray-600 text-white py-2 rounded-lg hover:bg-gray-500 transition-colors",children:"すべて削除"}),(0,s.jsx)("button",{onClick:()=>c(!1),className:"flex-1 bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"閉じる"})]})]})}),o&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-gray-800 rounded-xl p-6 w-11/12 max-w-md",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h2",{className:"text-xl font-bold",children:"プレミアムプラン"}),(0,s.jsx)("button",{onClick:()=>d(!1),className:"text-gray-400 hover:text-white",children:"✕"})]}),(0,s.jsxs)("div",{className:"text-center mb-6",children:[(0,s.jsx)("div",{className:"text-3xl font-bold text-blue-400 mb-2",children:"¥4,500/月"}),(0,s.jsx)("p",{className:"text-gray-400",children:"すべての機能が利用可能"})]}),(0,s.jsxs)("div",{className:"space-y-3 mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("span",{className:"text-green-400",children:"✓"}),(0,s.jsx)("span",{children:"無制限の習慣管理"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("span",{className:"text-green-400",children:"✓"}),(0,s.jsx)("span",{children:"詳細な進捗分析"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("span",{className:"text-green-400",children:"✓"}),(0,s.jsx)("span",{children:"カスタムルーティーン"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("span",{className:"text-green-400",children:"✓"}),(0,s.jsx)("span",{children:"タイムアタック機能"})]})]}),(0,s.jsx)("button",{onClick:()=>d(!1),className:"w-full bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors",children:"今すぐ始める"})]})})]})}var t8=e.i(4588);function t7(){let[e,t]=(0,a.useState)([]),[r,l]=(0,a.useState)(!1),[n,i]=(0,a.useState)({action:"",predictedMood:3,actualMood:3,notes:""}),c=e=>["😢","😕","😐","😊","😄"][e-1],d=e=>["text-red-400","text-orange-400","text-yellow-400","text-green-400","text-blue-400"][e-1];return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-900 text-white p-6 pb-6",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"**記録**"}),(0,s.jsx)("p",{className:"text-gray-400",children:"タイムアタック外のシンプル記録や不定期習慣を記録"})]}),(0,s.jsxs)("div",{className:"bg-blue-900 bg-opacity-30 border border-blue-500 rounded-lg p-4 mb-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-blue-400 mb-2",children:"**記録ルール**"}),(0,s.jsxs)("ul",{className:"text-sm text-gray-300 space-y-1",children:[(0,s.jsx)("li",{children:"• 前日の分は不可 → 記録自体を習慣化"}),(0,s.jsx)("li",{children:"• 予測気分・結果気分の入力"}),(0,s.jsx)("li",{children:"• 感想も任意で入力"}),(0,s.jsx)("li",{children:"• 記述タイプの場合は「獲得ボタン」で演出発動"})]})]}),(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsxs)("button",{onClick:()=>l(!0),className:"bg-green-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-green-700 transition-colors flex items-center space-x-2",children:[(0,s.jsx)(tW,{size:20}),(0,s.jsx)("span",{children:"**新しい記録を追加**"})]})}),r&&(0,s.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 mb-6",children:[(0,s.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"**記録を追加**"}),(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault();let s={id:Date.now().toString(),action:n.action,predictedMood:n.predictedMood,actualMood:n.actualMood,notes:n.notes,rewardClaimed:!1,createdAt:new Date().toISOString()};t(e=>[s,...e]),i({action:"",predictedMood:3,actualMood:3,notes:""}),l(!1)},className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"**行動内容**"}),(0,s.jsx)("input",{type:"text",value:n.action,onChange:e=>i(t=>({...t,action:e.target.value})),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"例: 散歩、読書、瞑想など",required:!0})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"**予測気分**"}),(0,s.jsx)("div",{className:"flex space-x-2",children:[1,2,3,4,5].map(e=>(0,s.jsx)("button",{type:"button",onClick:()=>i(t=>({...t,predictedMood:e})),className:"w-10 h-10 rounded-full flex items-center justify-center text-lg transition-colors ".concat(n.predictedMood===e?"bg-blue-600 text-white":"bg-gray-700 text-gray-400 hover:bg-gray-600"),children:c(e)},e))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"**結果気分**"}),(0,s.jsx)("div",{className:"flex space-x-2",children:[1,2,3,4,5].map(e=>(0,s.jsx)("button",{type:"button",onClick:()=>i(t=>({...t,actualMood:e})),className:"w-10 h-10 rounded-full flex items-center justify-center text-lg transition-colors ".concat(n.actualMood===e?"bg-green-600 text-white":"bg-gray-700 text-gray-400 hover:bg-gray-600"),children:c(e)},e))})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"**感想（任意）**"}),(0,s.jsx)("textarea",{value:n.notes,onChange:e=>i(t=>({...t,notes:e.target.value})),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"実行後の感想や気づきを記録..."})]}),(0,s.jsxs)("div",{className:"flex space-x-4",children:[(0,s.jsx)("button",{type:"submit",className:"bg-blue-600 text-white px-6 py-2 rounded-lg font-semibold hover:bg-blue-700 transition-colors",children:"**記録を保存**"}),(0,s.jsx)("button",{type:"button",onClick:()=>l(!1),className:"bg-gray-600 text-white px-6 py-2 rounded-lg font-semibold hover:bg-gray-700 transition-colors",children:"キャンセル"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold",children:"**記録履歴**"}),0===e.length?(0,s.jsxs)("div",{className:"bg-gray-800 rounded-lg p-8 text-center",children:[(0,s.jsx)(o,{className:"w-16 h-16 text-gray-500 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-400",children:"まだ記録がありません"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"最初の記録を追加してみましょう"})]}):(0,s.jsx)("div",{className:"space-y-3",children:e.map(e=>(0,s.jsx)("div",{className:"bg-gray-800 rounded-lg p-4",children:(0,s.jsx)("div",{className:"flex items-start justify-between",children:(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold",children:e.action}),(0,s.jsx)("span",{className:"text-sm text-gray-400",children:new Date(e.createdAt).toLocaleDateString("ja-JP",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-6 mb-3",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("span",{className:"text-sm text-gray-400",children:"予測:"}),(0,s.jsxs)("span",{className:"text-lg ".concat(d(e.predictedMood)),children:[c(e.predictedMood)," ",e.predictedMood]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("span",{className:"text-sm text-gray-400",children:"結果:"}),(0,s.jsxs)("span",{className:"text-lg ".concat(d(e.actualMood)),children:[c(e.actualMood)," ",e.actualMood]})]})]}),e.notes&&(0,s.jsx)("div",{className:"bg-gray-700 rounded-lg p-3 mb-3",children:(0,s.jsx)("p",{className:"text-sm text-gray-300",children:e.notes})}),(0,s.jsx)("div",{className:"flex items-center space-x-2",children:e.rewardClaimed?(0,s.jsxs)("div",{className:"flex items-center space-x-2 text-green-400",children:[(0,s.jsx)(t8.CheckCircle,{size:16}),(0,s.jsx)("span",{className:"text-sm font-medium",children:"**ご褒美獲得済み**"})]}):(0,s.jsxs)("button",{onClick:()=>{var s;return s=e.id,void(t(e=>e.map(e=>e.id===s?{...e,rewardClaimed:!0}:e)),console.log("Reward claimed!",s))},className:"bg-yellow-600 text-white px-4 py-2 rounded-lg text-sm font-semibold hover:bg-yellow-700 transition-colors flex items-center space-x-2",children:[(0,s.jsx)(tz,{size:16}),(0,s.jsx)("span",{children:"**ご褒美獲得**"})]})})]})})},e.id))})]})]})}let t9=(0,r.default)("archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]),se=(0,r.default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),st=(0,r.default)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),ss=(0,r.default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),sa=(0,r.default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var sr=e.i(68306);e.i(44845);var sl=e.i(74295);let sn={redirectToCheckout:async e=>(console.log("Mock Stripe Checkout:",e),new Promise(e=>{setTimeout(()=>{alert("決済が完了しました！（モック）\n実際の決済ではStripe Checkoutにリダイレクトされます。"),e({error:null})},1e3)}))},si=async e=>(console.log("Loading Stripe in offline mode (mock)"),sn),sc=sr.default.env.NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY||"",so=()=>"undefined"!=typeof navigator&&navigator.onLine,sd=async()=>{if(!t)if(!so())return console.log("Offline mode: Using mock Stripe"),si(sc);else try{t=(0,sl.loadStripe)(sc)}catch(e){return console.warn("Failed to load Stripe, falling back to offline mode:",e),si(sc)}return t};async function sx(e,t){let s=await sd();if(!s)throw Error("Stripe failed to initialize");if(!so()){console.log("Offline mode: Using mock subscription"),await s.redirectToCheckout({sessionId:"mock_subscription_".concat(Date.now())});return}try{let a=await fetch("/api/create-subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({priceId:e,customerEmail:t})}),r=await a.json();if(r.error)throw Error(r.error.message);let l=await s.redirectToCheckout({sessionId:r.id});if(l.error)throw Error(l.error.message||"Failed to redirect to checkout")}catch(e){console.warn("Online subscription failed, using mock:",e),await s.redirectToCheckout({sessionId:"mock_subscription_".concat(Date.now())})}}async function sm(){if(!so()){console.log("Offline mode: Using mock customer portal"),alert("サブスクリプション管理画面（モック）\n実際の環境ではStripe Customer Portalにリダイレクトされます。");return}try{let e=await fetch("/api/create-portal-session",{method:"POST",headers:{"Content-Type":"application/json"}}),{url:t}=await e.json();window.location.href=t}catch(e){console.warn("Online portal failed, using mock:",e),alert("サブスクリプション管理画面（モック）\n実際の環境ではStripe Customer Portalにリダイレクトされます。")}}function sh(e){let{isOpen:t,onClose:r}=e,{t:l}=(0,m.useTranslation)(),[n,i]=(0,a.useState)(null),[c,o]=(0,a.useState)(""),d=async(e,t)=>{try{i(t),await sx(e,c||void 0)}catch(e){console.error("Subscription error:",e),alert("サブスクリプションの作成に失敗しました。")}finally{i(null)}};return t?(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 max-w-md w-full max-h-[90vh] overflow-y-auto border border-gray-700",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,s.jsx)("svg",{className:"w-6 h-6 text-yellow-300",fill:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-200",children:"プレミアムプラン"})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"メールアドレス（任意）"}),(0,s.jsx)("input",{type:"email",value:c,onChange:e=>o(e.target.value),placeholder:"your@email.com",className:"w-full text-sm bg-gray-700 border border-gray-600 rounded px-3 py-2 text-gray-100 placeholder-gray-400 focus:border-blue-500 focus:outline-none"})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-r from-green-900 to-blue-900 rounded-lg p-4 border border-green-500",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,s.jsx)("h4",{className:"text-lg font-semibold text-white",children:"Premium プラン"}),(0,s.jsx)("span",{className:"text-2xl font-bold text-green-400",children:"¥4,500"})]}),(0,s.jsxs)("ul",{className:"text-sm text-gray-300 space-y-1 mb-4",children:[(0,s.jsx)("li",{children:"• 全機能へのアクセス"}),(0,s.jsx)("li",{children:"• 無制限のルーティーン"}),(0,s.jsx)("li",{children:"• 詳細な統計データ"}),(0,s.jsx)("li",{children:"• プライオリティサポート"}),(0,s.jsx)("li",{children:"• データ同期"}),(0,s.jsx)("li",{children:"• 早期アクセス機能"})]}),(0,s.jsx)("button",{onClick:()=>d("price_premium","premium"),disabled:"premium"===n,className:"w-full bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded-lg font-semibold transition-colors disabled:opacity-50",children:"premium"===n?"処理中...":"月額¥4,500で始める"})]})]}),(0,s.jsx)("div",{className:"flex gap-3 mt-6",children:(0,s.jsx)("button",{onClick:r,className:"flex-1 px-4 py-2 bg-gray-600 text-white text-sm rounded-lg hover:bg-gray-700 transition-colors",children:l.common.cancel})})]})}):null}function su(e){let{isSubscribed:t=!1,className:r=""}=e,[l,n]=(0,a.useState)(!1),i=async()=>{if(t)try{await sm()}catch(e){console.error("Failed to redirect to customer portal:",e),alert("サブスクリプション管理画面へのアクセスに失敗しました。")}else n(!0)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:i,className:"px-4 py-2 rounded-lg font-semibold transition-all duration-200 ".concat(t?"bg-green-600 hover:bg-green-700 text-white":"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white shadow-lg"," ").concat(r),children:t?"サブスクリプション管理":"プレミアムプラン"}),(0,s.jsx)(sh,{isOpen:l,onClose:()=>n(!1)})]})}sr.default.env.NEXT_PUBLIC_STRIPE_MONTHLY_PRICE_ID,sr.default.env.NEXT_PUBLIC_STRIPE_YEARLY_PRICE_ID;var sg=e.i(43972);function sp(){let{locale:e,changeLocale:t}=(0,m.useTranslation)();return(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)("select",{value:e,onChange:e=>t(e.target.value),className:"bg-gray-700 border border-gray-600 rounded px-3 py-1 text-white text-sm focus:border-blue-500 focus:outline-none",children:sg.SUPPORTED_LOCALES.map(e=>(0,s.jsx)("option",{value:e,className:"bg-gray-700",children:sg.LOCALE_NAMES[e]},e))})})}function sb(){let[e,t]=(0,a.useState)([{id:"1",version:"1.0",ifCondition:"朝7時に目覚ましが鳴ったら",thenAction:"ベッドから起き上がる",thenActions:["ベッドから起き上がる"],durationMinutes:0,durationSeconds:10,alternativeActions:["5分後に起きる","水を飲んでから起きる"],bigGoal:"健康的な生活リズムを確立して、仕事の効率を上げたい",isUnlocked:!0,createdAt:"2024-01-01"},{id:"2",version:"1.0",ifCondition:"朝食が終わったら",thenAction:"英語の単語を覚える",thenActions:["英語の単語を覚える","音読練習をする"],durationMinutes:10,durationSeconds:0,alternativeActions:["単語帳を開く","前日の復習をする"],bigGoal:"TOEIC800点を取って、将来の就職活動に活かしたい",isUnlocked:!0,createdAt:"2024-01-02"},{id:"3",version:"1.0",ifCondition:"夕食後に食器を洗い終わったら",thenAction:"読書をする",thenActions:["読書をする","本の感想をメモする"],durationMinutes:30,durationSeconds:0,alternativeActions:["本を開いて1ページだけ読む","読書アプリで要約を読む"],bigGoal:"年間50冊の読書を通して、幅広い知識と教養を身につけたい",isUnlocked:!0,createdAt:"2024-01-03"},{id:"4",version:"1.0",ifCondition:"学校から帰宅したら",thenAction:"筋トレをする",thenActions:["腕立て伏せ20回","腹筋30回","スクワット15回"],durationMinutes:15,durationSeconds:0,alternativeActions:["ストレッチだけする","散歩に行く","ヨガ動画を見る"],bigGoal:"体力をつけて、部活動や勉強に集中できる体を作りたい",isUnlocked:!0,createdAt:"2024-01-04"}]),[r,l]=(0,a.useState)(!1),[n,i]=(0,a.useState)(null),[c,x]=(0,a.useState)({ifCondition:"",thenAction:"",thenActions:[""],thenActionsWithRecordType:[{action:"",recordType:"time-attack",targetDuration:30}],alternativeActions:[""],bigGoal:""}),[m,h]=(0,a.useState)({alternativeActions:!0}),[u,g]=(0,a.useState)(!1),[p,b]=(0,a.useState)(null),[y,f]=(0,a.useState)(!1),[j,v]=(0,a.useState)(!1),[N,w]=(0,a.useState)(!1),[k,A]=(0,a.useState)({isDragging:!1,draggedIndex:-1,dragOverIndex:-1}),S=(e,t)=>{let s=[...c.thenActionsWithRecordType],a="up"===t?e-1:e+1;a>=0&&a<s.length&&([s[e],s[a]]=[s[a],s[e]],x(e=>({...e,thenActionsWithRecordType:s})))},C=()=>{A(e=>({...e,dragOverIndex:-1}))},T=()=>{A({isDragging:!1,draggedIndex:-1,dragOverIndex:-1})},O={"if-condition":{title:"If-Thenプランニング ★★★",content:{tip:"1. **Ifは可能な限り具体的に**\n「朝起きたら」ではなく「歯磨きを終えたら」のように、既存の行動に結びつける。\n2. **Thenは小さな行動から始める**\nいきなり10kmランではなく「靴を履く」など最小単位。\n3. **Myルーティーンで既存習慣を確認**\n普段の行動を黒、新習慣を緑にして紐付けると自然に始めやすい。",effect:"1. 曖昧さをなくすと「今やるかどうか」で迷わなくなる。\n2. 小さな行動からなら成功体験が積みやすく、失敗による挫折も減る。\n3. 既存習慣をトリガーにすると脳が自動的に反応する。",pitfall:"Ifが抽象的すぎると効果が出ない。\nThenを大きくしすぎると途中で挫折する。\n条件を増やしすぎると「条件の渋滞」で混乱する。",trivia:"狩猟採集時代から人は「音がしたら逃げる」「赤い実を見たら採る」といったIf-Then型反応で生き延びてきた。\nオリンピック選手も「靴紐を結んだら集中モードに入る」とルーチン化している。",moreTrivia:"1. 大学生を対象にした実験では、If-Thenを決めた群の達成率が **39% → 91%** に上昇。\n\n2. 困難状況（うつ病患者群）では、If-Then計画ありで **80%達成、なし0%**。\n\n3. ベートーヴェンは作曲前にコーヒー豆を毎回60粒数えるというIf-Thenルーティンを持っていたと伝えられています。\n\n4. マイクロソフトの創業者ビル・ゲイツも「目を閉じて本を読み始める」というIf-Then行動で集中を高めていたと語っています。",source:"Gollwitzer（実行意図）\nWood & Neal（文脈手がかり研究）"}},"then-action":{title:"ミニ習慣化 ★★★",content:{tip:"1. **最小行動に縮める**（腕立て1回、歯1本だけフロス）。\n2. **やりすぎ歓迎ルール**を明文化する。",effect:"1. 小さな行動なら「できない理由」が消える。\n2. 成功体験を積み重ねると自然に自動化される。",pitfall:"無意味感を感じやすい → 「やりすぎ歓迎」で克服。",trivia:"武道の小作法やフットインザドアも「小さな一歩」から大きな流れを作る知恵だった。",moreTrivia:"1. ミニ習慣を導入した群は32週後に平均体重が **-3.8kg**。\n\n2. 大きな山を登るときも「3合目」「5合目」と区切ることで、心理的に楽になり、途中でやめても前進感を持てます。\n\n3. 工学のプロジェクト管理でも「モジュール化」が鉄則。人の行動も細分化すると成功確率が上がります。\n\n4. 日本の茶道も「一連の流れを細かく分解」して稽古を積む伝統があります。",source:"Locke & Latham（目標設定理論）"}},duration:{title:"一貫性と頻度 ★★★",content:{tip:"1. **同じ時間・場所で繰り返す**（文脈手がかりの強化）。\n2. **頻度を優先**（完璧より継続）。\n3. **小さな一貫性**から始める。",effect:"1. 文脈が一致すると脳が自動的に反応する。\n2. 頻度が高ければ質は後からついてくる。\n3. 小さな一貫性が大きな習慣の土台になる。",pitfall:"完璧主義で頻度が下がる。\n時間にこだわりすぎて柔軟性を失う。",trivia:"朝のルーティーンが儀式化すると、迷いがゼロに近づきます。",moreTrivia:"1. 朝の儀式が決まっている人は「迷いゼロ」で1日を始められます。起床後の一連動作が、最強の集中ブースターです。\n\n2. 武士の鍛錬では「同じ時間に起き、同じ型を繰り返す」ことが心身の安定を生んでいました。\n\n3. ローマの兵士は「太陽が昇ったら行軍」と時間で行動を切っていました。\n\n4. スティーブ・ジョブズは毎朝同じ服装で登場し、時間と決断コストを削っていました。",source:"Lally（習慣形成の文脈一致研究）"}},"alternative-actions":{title:"環境デザイン ★★★",content:{tip:"1. 良い行動の摩擦を下げる（机に本を置く、玄関に靴を出す）。\n2. 悪い行動の摩擦を上げる（お菓子を買わない、通知を切る）。\n3. 習慣化したい行動を「視界に入る場所」に置く。",effect:"1. 人は意志力ではなく環境手がかりに強く反応する。\n2. 見えるものが行動を誘発するため、自動的に習慣が回る。",pitfall:"制約が強すぎると反発を招く。\n少し不便にするくらいが最適。",trivia:"冷蔵庫の配置や机上の小物だけで選択が変わる。引越しや転職は「環境リセット」で習慣を切り替える好機でもある。",moreTrivia:'1. 病院の飲料配置変更で、水の選択が **+25.8%**、ソーダは **-11.4%** に。\n\n2. プロは"最悪のケース"を常に想定して動きます。準備があるから崩れません。\n\n3. 軍隊は「代替ルート」を必ず用意し、詰みを防ぎます。\n\n4. 登山家は「悪天候時の短縮ルート」を事前に決めて挑みます。',source:"コーピングプラン研究（実行意図の拡張）"}},"big-goal":{title:"報酬とドーパミン ★★★",content:{tip:"1. 行動直後に小さな報酬を与える（効果音・アニメーション）。\n2. 「やるべき」と「やりたい」を束ねる（誘惑バンドル）。\n3. ご褒美は連鎖の最後に置く。",effect:"1. 脳は「直後の快」に強く反応し、行動を強化する。\n2. 報酬と行動が結びつくことで「またやりたい」が自然に生まれる。",pitfall:"外的報酬に依存しすぎると、報酬がないとやらなくなる。",trivia:"修行や祭礼にも「苦の後に喜び」を置く設計がある。ガチャ文化も予測不能報酬でドーパミンを刺激している。",moreTrivia:'1. 音声小説をジムでのみ解禁した群は、通所頻度が **+51%**。\n\n2. 行動も"バージョニング"で進化させる時代です。\n\n3. ソフトウェアは小刻みなバージョンアップで安定性を高めてきました。\n\n4. スポーツの練習も「メニューを微調整」することで持続可能になります。',source:"PDCAサイクル\n自己調整学習研究"}}},P=e=>{b(O[e]),g(!0)},E=()=>{g(!1),b(null)};return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-900 text-white p-6 pb-6",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"**習慣設定**"}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)(sp,{}),(0,s.jsx)(su,{})]})]}),(0,s.jsx)("p",{className:"text-gray-400",children:"If-Then条件で習慣を設定し、バージョン管理で分析"})]}),(0,s.jsxs)("div",{className:"bg-gray-700 rounded-lg p-4 mb-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-purple-400 mb-2",children:"**アンロック機能**"}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 text-sm",children:[(0,s.jsx)(t9,{className:"w-4 h-4 text-purple-400"}),(0,s.jsxs)("span",{className:m.alternativeActions?"text-green-400":"text-gray-500",children:["代替行動 ",m.alternativeActions?"✅":"🔒"]})]})]}),(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsx)("button",{onClick:()=>l(!0),className:"w-12 h-12 flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-lg",children:"➕"})})}),r&&(0,s.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 mb-6",children:[(0,s.jsx)("h3",{className:"text-xl font-semibold mb-4",children:n?"**習慣を編集**":"**習慣を追加**"}),(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault();let s={id:Date.now().toString(),version:"1.0",ifCondition:c.ifCondition,thenAction:c.thenActions[0]||c.thenAction,thenActions:c.thenActions.filter(e=>e.trim()),durationMinutes:c.durationMinutes,durationSeconds:c.durationSeconds,alternativeActions:m.alternativeActions?c.alternativeActions.filter(e=>e.trim()):[],bigGoal:c.bigGoal,isUnlocked:!0,createdAt:new Date().toISOString()};n?(t(e=>e.map(e=>e.id===n?{...s,id:n,version:(parseFloat(e.version)+.1).toFixed(1)}:e)),i(null)):t(e=>[s,...e]),x({ifCondition:"",thenAction:"",thenActions:[""],thenActionsWithRecordType:[{action:"",recordType:"time-attack",targetDuration:30}],alternativeActions:[""],bigGoal:""}),l(!1)},className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h4",{className:"text-lg font-semibold text-green-400",children:"**必須項目**"}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300",children:"**If（既存習慣から選択 or 自由入力）**"}),(0,s.jsx)("button",{type:"button",onClick:()=>v(!j),className:"text-blue-400 hover:text-blue-300 transition-colors",title:"Myルーティーンから選択",children:(0,s.jsx)(o,{size:16})}),(0,s.jsx)("button",{type:"button",onClick:()=>P("if-condition"),className:"text-yellow-400 hover:text-yellow-300 transition-colors",children:(0,s.jsx)(d.Lightbulb,{size:16})})]}),(0,s.jsx)("input",{type:"text",value:c.ifCondition,onChange:e=>x(t=>({...t,ifCondition:e.target.value})),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"例: 朝7時に目覚ましが鳴ったら、お腹が空いたら、疲れたら",required:!0}),j&&(0,s.jsxs)("div",{className:"mt-2 p-3 bg-gray-700 rounded-lg",children:[(0,s.jsx)("p",{className:"text-sm text-gray-300 mb-2",children:"Myルーティーンから選択:"}),(0,s.jsx)("div",{className:"space-y-1",children:["朝7時に目覚ましが鳴ったら","朝コーヒーを飲んだ後","歯磨きをした後","帰宅して靴を脱いだ直後","お風呂に入った後","夕食を食べた後","ベッドに入る前","スマホを見た後","トイレに行った後","洗顔をした後"].map((e,t)=>(0,s.jsx)("button",{onClick:()=>{x(t=>({...t,ifCondition:e})),v(!1)},className:"w-full text-left p-2 text-sm text-gray-300 hover:bg-gray-600 rounded transition-colors",children:e},t))}),(0,s.jsx)("button",{onClick:()=>v(!1),className:"mt-2 text-xs text-gray-400 hover:text-gray-300",children:"閉じる"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300",children:"**Then（行動内容）**"}),(0,s.jsx)("button",{type:"button",onClick:()=>P("then-action"),className:"text-yellow-400 hover:text-yellow-300 transition-colors",children:(0,s.jsx)(d.Lightbulb,{size:16})})]}),(0,s.jsx)("div",{className:"space-y-3",children:c.thenActionsWithRecordType.map((e,t)=>(0,s.jsx)("div",{className:"bg-gray-700 bg-opacity-30 border border-gray-500 rounded-lg p-4 transition-all duration-200 ".concat(k.draggedIndex===t?"opacity-50 scale-95 bg-blue-500 bg-opacity-20":k.dragOverIndex===t?"bg-green-500 bg-opacity-20 scale-105":"hover:bg-gray-600 hover:bg-opacity-50"),draggable:!0,onDragStart:e=>{A({isDragging:!0,draggedIndex:t,dragOverIndex:-1}),e.dataTransfer.effectAllowed="move"},onDragOver:e=>{e.preventDefault(),e.dataTransfer.dropEffect="move",A(e=>({...e,dragOverIndex:t}))},onDragLeave:C,onDrop:e=>((e,t)=>{e.preventDefault();let{draggedIndex:s}=k;if(-1!==s&&s!==t){let e=[...c.thenActionsWithRecordType],a=e[s];e.splice(s,1),e.splice(t,0,a),x(t=>({...t,thenActionsWithRecordType:e}))}A({isDragging:!1,draggedIndex:-1,dragOverIndex:-1})})(e,t),onDragEnd:T,children:(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"cursor-move text-gray-400 hover:text-white transition-colors",children:(0,s.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",children:[(0,s.jsx)("circle",{cx:"9",cy:"5",r:"1"}),(0,s.jsx)("circle",{cx:"15",cy:"5",r:"1"}),(0,s.jsx)("circle",{cx:"9",cy:"12",r:"1"}),(0,s.jsx)("circle",{cx:"15",cy:"12",r:"1"}),(0,s.jsx)("circle",{cx:"9",cy:"19",r:"1"}),(0,s.jsx)("circle",{cx:"15",cy:"19",r:"1"})]})}),(0,s.jsxs)("div",{className:"flex space-x-1",children:[(0,s.jsx)("button",{type:"button",onClick:()=>S(t,"up"),disabled:0===t,className:"p-1 rounded transition-colors ".concat(0===t?"text-gray-600 cursor-not-allowed":"text-gray-400 hover:text-white hover:bg-gray-600"),children:(0,s.jsx)(st,{size:14})}),(0,s.jsx)("button",{type:"button",onClick:()=>S(t,"down"),disabled:t===c.thenActionsWithRecordType.length-1,className:"p-1 rounded transition-colors ".concat(t===c.thenActionsWithRecordType.length-1?"text-gray-600 cursor-not-allowed":"text-gray-400 hover:text-white hover:bg-gray-600"),children:(0,s.jsx)(ss,{size:14})})]})]}),c.thenActionsWithRecordType.length>1&&(0,s.jsx)("button",{type:"button",onClick:()=>{let e=c.thenActionsWithRecordType.filter((e,s)=>s!==t);x(t=>({...t,thenActionsWithRecordType:e}))},className:"text-gray-400 hover:text-red-400 transition-colors p-1",children:(0,s.jsx)(tR.X,{size:16})})]}),(0,s.jsx)("input",{type:"text",value:e.action,onChange:e=>{let s=[...c.thenActionsWithRecordType];s[t]={...s[t],action:e.target.value},x(e=>({...e,thenActionsWithRecordType:s})),e.target.value.length>0&&t===c.thenActionsWithRecordType.length-1&&x(e=>({...e,thenActionsWithRecordType:[...s,{action:"",recordType:"time-attack",targetDuration:30}]}))},className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-3 py-2 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",placeholder:0===t?"例: 10キロ走る":"次の行動を入力...",required:0===t}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("span",{className:"text-xs text-gray-400 whitespace-nowrap",children:"記録方式:"}),(0,s.jsxs)("select",{value:e.recordType,onChange:e=>{let s=[...c.thenActionsWithRecordType];s[t]={...s[t],recordType:e.target.value,targetDuration:"simple"===e.target.value?0:s[t].targetDuration||30},x(e=>({...e,thenActionsWithRecordType:s}))},className:"bg-gray-800 border border-gray-600 rounded-lg px-2 py-1 text-white text-xs focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,s.jsx)("option",{value:"simple",children:"単純記録"}),(0,s.jsx)("option",{value:"time-attack",children:"タイムアタック"}),(0,s.jsx)("option",{value:"score-attack",children:"スコアアタック"})]})]}),("time-attack"===e.recordType||"score-attack"===e.recordType)&&(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsx)("input",{type:"number",min:"1",value:e.targetDuration,onChange:e=>{let s=[...c.thenActionsWithRecordType];s[t]={...s[t],targetDuration:parseInt(e.target.value)||0},x(e=>({...e,thenActionsWithRecordType:s}))},className:"w-12 bg-gray-800 border border-gray-600 rounded-lg px-2 py-1 text-white text-xs focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,s.jsx)("span",{className:"text-xs text-gray-400",children:"分"})]})]}),(0,s.jsxs)("div",{className:"text-xs text-gray-400",children:["simple"===e.recordType&&"✅ やることだけ記録","time-attack"===e.recordType&&"⏱️ 目標時間内で完了を競う","score-attack"===e.recordType&&"🎯 固定時間で成果を競う"]})]})},t))})]}),(0,s.jsxs)("div",{className:"border border-purple-500 rounded-lg overflow-hidden",children:[(0,s.jsxs)("button",{type:"button",onClick:()=>{w(e=>!e)},className:"w-full bg-purple-900 bg-opacity-30 hover:bg-opacity-50 transition-all duration-300 p-4 flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"text-purple-400",children:(0,s.jsx)(t1.Target,{size:20})}),(0,s.jsxs)("div",{className:"text-left",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-purple-400",children:"**サブ機能**"}),(0,s.jsx)("p",{className:"text-sm text-gray-400",children:"所要時間・代替行動・大目標"})]})]}),(0,s.jsx)("div",{className:"text-purple-400 transition-transform duration-300",children:N?(0,s.jsx)(ss,{size:24}):(0,s.jsx)(sa,{size:24})})]}),(0,s.jsx)("div",{className:"overflow-hidden transition-all duration-300 ".concat(N?"max-h-96 opacity-100":"max-h-0 opacity-0"),children:(0,s.jsxs)("div",{className:"p-4 space-y-6 bg-gray-800",children:[m.alternativeActions&&(0,s.jsxs)("div",{className:"bg-gray-700 bg-opacity-30 border border-gray-500 rounded-lg p-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-green-400 rounded-full"}),(0,s.jsx)("label",{className:"block text-sm font-medium text-green-300",children:"**予測イレギュラー（代替行動設定）**"})]}),(0,s.jsx)("button",{type:"button",onClick:()=>P("alternative-actions"),className:"text-yellow-400 hover:text-yellow-300 transition-colors",children:(0,s.jsx)(d.Lightbulb,{size:16})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[c.alternativeActions.map((e,t)=>(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)("input",{type:"text",value:e,onChange:e=>{var s;return s=e.target.value,void x(e=>({...e,alternativeActions:e.alternativeActions.map((e,a)=>a===t?s:e)}))},className:"flex-1 bg-gray-800 border border-gray-500 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"代替行動を入力..."}),(0,s.jsx)("button",{type:"button",onClick:()=>{x(e=>({...e,alternativeActions:e.alternativeActions.filter((e,s)=>s!==t)}))},className:"bg-red-600 text-white px-3 py-2 rounded-lg hover:bg-red-700 transition-colors",children:(0,s.jsx)(se,{size:16})})]},t)),(0,s.jsxs)("button",{type:"button",onClick:()=>{x(e=>({...e,alternativeActions:[...e.alternativeActions,""]}))},className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center space-x-2",children:[(0,s.jsx)(tW,{size:16}),(0,s.jsx)("span",{children:"代替行動を追加"})]})]}),(0,s.jsx)("div",{className:"mt-2 text-xs text-gray-400",children:"🔄 代替案があると継続率が向上します"})]}),(0,s.jsxs)("div",{className:"bg-gray-700 bg-opacity-30 border border-gray-500 rounded-lg p-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-orange-400 rounded-full"}),(0,s.jsx)("label",{className:"block text-sm font-medium text-orange-300",children:"**大目標欄**"})]}),(0,s.jsx)("button",{type:"button",onClick:()=>P("big-goal"),className:"text-yellow-400 hover:text-yellow-300 transition-colors",children:(0,s.jsx)(d.Lightbulb,{size:16})})]}),(0,s.jsx)("textarea",{value:c.bigGoal,onChange:e=>x(t=>({...t,bigGoal:e.target.value})),className:"w-full bg-gray-800 border border-gray-500 rounded-lg px-4 py-3 text-white focus:ring-2 focus:ring-orange-500 focus:border-transparent resize-none",rows:3,placeholder:"なぜその習慣に挑戦するか（例: 痩せて海に行きたい、健康的な生活リズムを確立したい）"}),(0,s.jsx)("div",{className:"mt-2 text-xs text-gray-400",children:"💡 明確な目標があると習慣化の成功率が3倍になります"})]})]})})]})]}),(0,s.jsxs)("div",{className:"flex space-x-4",children:[(0,s.jsxs)("button",{type:"submit",className:"bg-blue-600 text-white px-6 py-2 rounded-lg font-semibold hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[(0,s.jsx)(tU,{size:16}),(0,s.jsx)("span",{children:"**保存**"})]}),(0,s.jsx)("button",{type:"button",onClick:()=>{x({ifCondition:"",thenAction:"",thenActions:[""],thenActionsWithRecordType:[{action:"",recordType:"time-attack",targetDuration:30}],alternativeActions:[""],bigGoal:""}),l(!1),i(null)},className:"bg-gray-600 text-white px-6 py-2 rounded-lg font-semibold hover:bg-gray-700 transition-colors",children:"キャンセル"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold",children:"**設定済み習慣**"}),0===e.length?(0,s.jsxs)("div",{className:"bg-gray-800 rounded-lg p-8 text-center",children:[(0,s.jsx)(t1.Target,{className:"w-16 h-16 text-gray-500 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-400",children:"まだ習慣が設定されていません"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"最初の習慣を設定してみましょう"})]}):(0,s.jsx)("div",{className:"space-y-3",children:e.map(e=>{var a,r;return(0,s.jsx)("div",{className:"bg-gray-800 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold",children:["**",e.ifCondition,"** → **",e.thenActions&&e.thenActions.length>0?e.thenActions.join(" → "):e.thenAction,"**"]}),(0,s.jsxs)("span",{className:"bg-blue-600 text-white px-2 py-1 rounded text-xs font-medium",children:["Ver.",e.version]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(t2.Clock,{className:"w-4 h-4 text-gray-400"}),(0,s.jsx)("span",{className:"text-sm text-gray-300",children:(a=e.durationMinutes,r=e.durationSeconds,a>0?"".concat(a,"分").concat(r>0?"".concat(r,"秒"):""):"".concat(r,"秒"))})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(t9,{className:"w-4 h-4 text-gray-400"}),(0,s.jsxs)("span",{className:"text-sm text-gray-300",children:["代替: ",e.alternativeActions.length,"個"]})]})]}),e.bigGoal&&(0,s.jsx)("div",{className:"bg-gray-700 rounded-lg p-3 mb-3",children:(0,s.jsxs)("p",{className:"text-sm text-gray-300",children:[(0,s.jsx)("span",{className:"font-semibold",children:"大目標:"})," ",e.bigGoal]})}),e.alternativeActions.length>0&&(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-400 mb-2",children:"代替行動:"}),(0,s.jsx)("div",{className:"space-y-1",children:e.alternativeActions.map((e,t)=>(0,s.jsxs)("div",{className:"text-sm text-gray-300 bg-gray-700 rounded px-3 py-1",children:["• ",e]},t))})]})]}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)("button",{onClick:()=>{var t,s;x({ifCondition:e.ifCondition,thenAction:e.thenAction,thenActions:(null==(t=e.thenActions)?void 0:t.length)>0?e.thenActions:[e.thenAction||""],thenActionsWithRecordType:(null==(s=e.thenActions)?void 0:s.length)>0?e.thenActions.map(e=>({action:e,recordType:"time-attack",targetDuration:30})):[{action:e.thenAction||"",recordType:"time-attack",targetDuration:30}],alternativeActions:e.alternativeActions.length>0?e.alternativeActions:[""],bigGoal:e.bigGoal}),i(e.id),l(!0)},className:"w-8 h-8 flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-lg",children:"✏️"})}),(0,s.jsx)("button",{onClick:()=>{var s;return s=e.id,void t(e=>e.filter(e=>e.id!==s))},className:"w-8 h-8 flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-lg",children:"🗑️"})})]})]})},e.id)})})]}),u&&p&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 max-w-md w-full max-h-[80vh] overflow-y-auto",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("h3",{className:"text-xl font-semibold text-yellow-400 flex items-center space-x-2",children:[(0,s.jsx)(d.Lightbulb,{size:20}),(0,s.jsx)("span",{children:p.title})]}),(0,s.jsx)("button",{onClick:E,className:"text-gray-400 hover:text-white transition-colors",children:(0,s.jsx)(tR.X,{size:20})})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-semibold text-yellow-300 mb-2",children:"**実践のコツ**"}),(0,s.jsx)("p",{className:"text-sm text-gray-300 whitespace-pre-line",children:p.content.tip})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-semibold text-yellow-300 mb-2",children:"**なぜ効果的か**"}),(0,s.jsx)("p",{className:"text-sm text-gray-300 whitespace-pre-line",children:p.content.effect})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-semibold text-yellow-300 mb-2",children:"**落とし穴**"}),(0,s.jsx)("p",{className:"text-sm text-gray-300 whitespace-pre-line",children:p.content.pitfall})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-semibold text-yellow-300 mb-2",children:"**余談（もっと見る）**"}),(0,s.jsx)("p",{className:"text-sm text-gray-300",children:p.content.trivia}),(0,s.jsx)("button",{onClick:()=>f(!y),className:"mt-2 text-blue-400 hover:text-blue-300 text-sm underline",children:y?"閉じる":"もっと見る"}),y&&(0,s.jsx)("div",{className:"mt-3 p-3 bg-gray-700 rounded-lg",children:(0,s.jsx)("p",{className:"text-sm text-gray-300 whitespace-pre-line",children:p.content.moreTrivia})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-semibold text-yellow-300 mb-2",children:"**効果の裏付け（参考）**"}),(0,s.jsx)("p",{className:"text-xs text-gray-400",children:p.content.source})]})]}),(0,s.jsx)("div",{className:"mt-6 flex justify-end",children:(0,s.jsx)("button",{onClick:E,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"閉じる"})})]})})]})}function sy(){let[e,t]=(0,a.useState)("idle"),[r,l]=(0,a.useState)(0),[n,i]=(0,a.useState)([]),[c,o]=(0,a.useState)(0),[x,m]=(0,a.useState)(!1),[h,u]=(0,a.useState)(null),g=(0,a.useRef)(null),p=[{id:1,name:"ベッドから起き上がる",targetTime:10},{id:2,name:"カーテンを開けて日光を浴びる",targetTime:15},{id:3,name:"コップ1杯の水を飲む",targetTime:20},{id:4,name:"軽いストレッチ (5分)",targetTime:300},{id:5,name:"朝食を食べる",targetTime:600}],b=e=>{if(isNaN(e)||e<0)return"00:00.00";let t=Math.floor(e/60),s=Math.floor(e%60),a=Math.floor(e%1*100);return"".concat(String(t).padStart(2,"0"),":").concat(String(s).padStart(2,"0"),".").concat(String(a).padStart(2,"0"))},y=e=>{if(isNaN(e)||e<0)return"00:00";let t=Math.floor(e/60),s=Math.floor(e%60);return"".concat(String(t).padStart(2,"0"),":").concat(String(s).padStart(2,"0"))};(0,a.useEffect)(()=>{if("running"===e){let e=Date.now()-1e3*r;g.current=setInterval(()=>{l((Date.now()-e)/1e3)},10)}else g.current&&clearInterval(g.current);return()=>{g.current&&clearInterval(g.current)}},[e]);let f=()=>{"running"===e&&(i(e=>[...e,r]),o(e=>e+1))},j={title:"累計差分（目標−経過の合計）",content:{tip:"1. 合計で緑ならOK（途中赤でも挽回可）。\n2. 週単位で差分トレンドを観察。\n3. 目標は現実的に（Ver更新で調整）。",effect:"(1) 合計差分は全体最適を促す。\n\n(2) 部分失敗を取り戻せる余白を与える。\n\n(3) 長期的な傾向が見えることで調整が容易になる。",pitfall:"非現実的な目標設定で常に赤→動機低下。\n細かい誤差に囚われる。",trivia:"長距離走も総合ペースで観ると挽回設計がしやすい。",source:"Zimmerman（自己調整学習）"}},v=()=>{m(!1),u(null)},N=()=>r-p.reduce((e,t)=>e+t.targetTime,0);return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-900 text-white relative overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute inset-0 opacity-10",children:(0,s.jsx)("div",{className:"w-full h-full",style:{backgroundImage:"\n            linear-gradient(rgba(255,255,255,0.1) 1px, transparent 1px),\n            linear-gradient(90deg, rgba(255,255,255,0.1) 1px, transparent 1px)\n          ",backgroundSize:"20px 20px"}})}),(0,s.jsxs)("div",{className:"relative z-10 px-4 pt-4 pb-6",children:[(0,s.jsxs)("div",{className:"text-center mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center space-x-2 mb-1",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"朝起きたら スピードラン"}),(0,s.jsx)("button",{onClick:()=>void(u(j),m(!0)),className:"text-yellow-400 hover:text-yellow-300 transition-colors",children:(0,s.jsx)(d.Lightbulb,{size:16})})]}),(0,s.jsx)("p",{className:"text-sm text-green-200",children:"If-Then Planning: 朝7時に目覚ましが鳴ったら"})]}),(0,s.jsx)("div",{className:"space-y-3 mb-6",children:p.map((t,a)=>{let l=a<n.length,i=a===c&&"running"===e,o=a>0?n[a-1]:0,d=(a<n.length?n[a]:r)-o,x=t.targetTime-d,m=x>=0;return(0,s.jsxs)("div",{className:"bg-gray-800 rounded-xl p-3 flex items-center justify-between ".concat(i?"ring-2 ring-green-400":""," ").concat(l?"opacity-75":""),children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-6 h-6 bg-green-600 rounded-full flex items-center justify-center font-bold text-sm",children:t.id}),(0,s.jsx)("span",{className:"text-sm font-medium",children:t.name})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("div",{className:"text-xs text-green-200",children:"差分"}),(0,s.jsx)("div",{className:"text-sm font-mono ".concat(m?"text-green-400":"text-red-400"),children:a<n.length?(m?"+":"")+y(Math.abs(x)):"--:--"})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("div",{className:"text-xs text-green-200",children:"経過"}),(0,s.jsx)("div",{className:"text-sm font-mono",children:a<n.length?b(d):"--:--.--"})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("div",{className:"text-xs text-green-200",children:"目標"}),(0,s.jsx)("div",{className:"text-sm font-mono",children:y(t.targetTime)})]}),i&&"running"===e&&(0,s.jsx)("button",{onClick:f,className:"bg-blue-500 text-white px-3 py-1 rounded-lg text-xs font-semibold hover:bg-blue-600 transition-colors",children:"Split"})]})]},t.id)})}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-4xl font-mono font-bold",children:b(r)}),(0,s.jsx)("div",{className:"text-xs text-green-200 mt-1",children:"目標タイムとの差"}),(0,s.jsxs)("div",{className:"text-sm font-mono",children:[N()>=0?"+":"",y(Math.abs(N()))]})]}),(0,s.jsxs)("div",{className:"flex justify-center space-x-3",children:["idle"===e&&(0,s.jsxs)("button",{onClick:()=>{l(0),i([]),o(0),t("running")},className:"bg-green-500 text-white px-6 py-3 rounded-xl font-bold hover:bg-green-600 transition-colors flex items-center space-x-2",children:[(0,s.jsx)(tY,{size:20}),(0,s.jsx)("span",{children:"Start"})]}),"running"===e&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("button",{onClick:f,className:"bg-blue-500 text-white px-4 py-3 rounded-xl font-bold hover:bg-blue-600 transition-colors flex items-center space-x-2",children:[(0,s.jsx)(t2.Clock,{size:20}),(0,s.jsx)("span",{children:"Split"})]}),(0,s.jsxs)("button",{onClick:()=>{t("finished")},className:"".concat(c+1===p.length?"bg-purple-500 hover:bg-purple-600":"bg-orange-500 hover:bg-orange-600"," text-white px-4 py-3 rounded-xl font-bold transition-colors flex items-center space-x-2"),children:[(0,s.jsx)(tZ,{size:20}),(0,s.jsx)("span",{children:c+1===p.length?"ラストスパート！":"途中クリア (".concat(c+1,"/").concat(p.length,")")})]})]}),"finished"===e&&(0,s.jsxs)("div",{className:"text-center space-y-3",children:[n.length===p.length&&(0,s.jsx)("div",{className:"text-4xl mb-2 animate-bounce",children:"🎆🎇✨🎊🎉"}),(0,s.jsx)("div",{className:"text-lg font-semibold ".concat(n.length===p.length?"text-yellow-300 animate-pulse":"text-green-300"),children:n.length===p.length?"🎉 完全クリア！お疲れ様でした！":n.length===p.length-1?"🏁 ラストスパート完了！":"途中クリア (".concat(n.length,"/").concat(p.length,")")}),n.length===p.length&&(0,s.jsx)("div",{className:"text-sm text-yellow-200",children:"✨ 全てのタスクを完了しました！素晴らしいです！"}),(0,s.jsxs)("button",{onClick:()=>{t("idle"),l(0),i([]),o(0)},className:"".concat(n.length===p.length?"bg-yellow-500 hover:bg-yellow-600":"bg-red-500 hover:bg-red-600"," text-white px-6 py-3 rounded-xl font-bold transition-colors flex items-center space-x-2"),children:[(0,s.jsx)(tQ,{size:20}),(0,s.jsx)("span",{children:"Reset"})]})]})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-xs text-green-200",children:"項目時"}),(0,s.jsx)("div",{className:"text-lg font-mono",children:y(0===n.length?r:r-n[n.length-1])})]})]}),(0,s.jsxs)("div",{className:"absolute top-2 right-2 bg-red-600 text-white px-2 py-1 rounded-lg text-xs",children:[(0,s.jsx)("div",{children:"Space: Start/Split"}),(0,s.jsx)("div",{children:"R: Reset"})]})]}),x&&h&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 max-w-md w-full max-h-[80vh] overflow-y-auto",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("h3",{className:"text-xl font-semibold text-yellow-400 flex items-center space-x-2",children:[(0,s.jsx)(d.Lightbulb,{size:20}),(0,s.jsx)("span",{children:h.title})]}),(0,s.jsx)("button",{onClick:v,className:"text-gray-400 hover:text-white transition-colors",children:(0,s.jsx)(tR.X,{size:20})})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-semibold text-yellow-300 mb-2",children:"**実践のコツ**"}),(0,s.jsx)("p",{className:"text-sm text-gray-300 whitespace-pre-line",children:h.content.tip})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-semibold text-yellow-300 mb-2",children:"**なぜ効果的か**"}),(0,s.jsx)("p",{className:"text-sm text-gray-300 whitespace-pre-line",children:h.content.effect})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-semibold text-yellow-300 mb-2",children:"**落とし穴**"}),(0,s.jsx)("p",{className:"text-sm text-gray-300 whitespace-pre-line",children:h.content.pitfall})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-semibold text-yellow-300 mb-2",children:"**余談（もっと見る）**"}),(0,s.jsx)("p",{className:"text-sm text-gray-300",children:h.content.trivia})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-semibold text-yellow-300 mb-2",children:"**効果の裏付け（参考）**"}),(0,s.jsx)("p",{className:"text-xs text-gray-400",children:h.content.source})]})]}),(0,s.jsx)("div",{className:"mt-6 flex justify-end",children:(0,s.jsx)("button",{onClick:v,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"閉じる"})})]})})]})}let sf=(0,e.i(46181).default)(()=>e.A(91695),{loadableGenerated:{modules:[36188]},ssr:!1});function sj(){return(0,s.jsx)(sf,{})}var sv=e.i(62113);let sN=(0,r.default)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),sw=(0,r.default)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);function sk(){let[e,t]=(0,a.useState)(!1),r=[{icon:(0,s.jsx)(t1.Target,{className:"w-6 h-6 text-blue-400"}),title:"必要な時に「使える形」で知識が出てくる",description:"If入力時に実行意図の解説が表示されるなど、実践と学習が一体化"},{icon:(0,s.jsx)(t0.TrendingUp,{className:"w-6 h-6 text-green-400"}),title:"最新知見＋機能も込み",description:"本では得られない最新の研究結果と実装済み機能を同時に提供"},{icon:(0,s.jsx)(t8.CheckCircle,{className:"w-6 h-6 text-purple-400"}),title:"解説チップやハウツーもその場で吸収",description:"💡アイコンからすぐに実践的なアドバイスを確認可能"}];return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-900 text-white p-6",children:[(0,s.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,s.jsxs)("div",{className:"text-center mb-12",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold mb-4 bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",children:"知識コスト対比"}),(0,s.jsx)("p",{className:"text-xl text-gray-300 mb-2",children:"本で学ぶと数万円と100時間級。"}),(0,s.jsx)("p",{className:"text-xl text-gray-300",children:"イフゼンなら月4,500円、1日10分で行動に直結。"})]}),(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-8 mb-12",children:[(0,s.jsxs)("div",{className:"bg-gray-800 rounded-xl p-8 border-2 border-gray-700 relative",children:[(0,s.jsxs)("div",{className:"text-center mb-6",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-blue-600 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)(n,{className:"w-8 h-8 text-white"})}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-blue-400",children:"通常"}),(0,s.jsx)("p",{className:"text-gray-400 text-sm",children:"本で学ぶ場合"})]}),(0,s.jsxs)("div",{className:"flex justify-center items-end mb-6 h-32",children:[(0,s.jsxs)("div",{className:"relative",children:[[1,2,3,4,5].map(e=>(0,s.jsx)("div",{className:"absolute bg-blue-600 rounded-sm shadow-lg",style:{width:"40px",height:"".concat(60+8*e,"px"),left:"".concat((e-1)*8,"px"),bottom:"0",zIndex:e}},e)),(0,s.jsxs)("div",{className:"absolute -right-2 top-2 bg-blue-500 text-white text-xs px-2 py-1 rounded",children:["本","10〜15冊"]})]}),(0,s.jsxs)("div",{className:"ml-8 flex flex-col items-center",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-gray-600 rounded-full flex items-center justify-center mb-2",children:(0,s.jsx)(n,{className:"w-6 h-6 text-white"})}),(0,s.jsx)("div",{className:"text-xs text-gray-400",children:"読書中"})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-700 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(sN,{className:"w-5 h-5 text-yellow-400"}),(0,s.jsx)("span",{className:"text-gray-300",children:"費用"})]}),(0,s.jsx)("span",{className:"text-xl font-bold text-red-400",children:"20,000〜40,000円"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-700 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(t2.Clock,{className:"w-5 h-5 text-blue-400"}),(0,s.jsx)("span",{className:"text-gray-300",children:"時間"})]}),(0,s.jsx)("span",{className:"text-xl font-bold text-red-400",children:"80〜150時間"})]}),(0,s.jsx)("div",{className:"text-xs text-gray-400 p-3 bg-gray-700 rounded-lg",children:"行動科学・習慣化・目標設定・ゲーミフィケーション関連を網羅するには10〜15冊必要"})]})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-br from-green-900 to-blue-900 rounded-xl p-8 border-2 border-green-500 relative",children:[(0,s.jsxs)("div",{className:"text-center mb-6",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-green-500 to-blue-500 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)(t1.Target,{className:"w-8 h-8 text-white"})}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-green-400",children:"イフゼンなら"}),(0,s.jsx)("p",{className:"text-gray-300 text-sm",children:"アプリで学ぶ場合"})]}),(0,s.jsx)("div",{className:"flex justify-center items-center mb-6 h-32",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"w-16 h-24 bg-gray-800 rounded-xl border-2 border-gray-600 flex items-center justify-center",children:(0,s.jsx)("div",{className:"w-12 h-8 bg-gradient-to-br from-green-500 to-blue-500 rounded flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-white text-xs font-bold",children:"イフゼン"})})}),(0,s.jsx)("div",{className:"absolute -top-2 -right-2 w-8 h-8 bg-yellow-400 rounded-full flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-gray-800 text-xs",children:"💡"})}),(0,s.jsx)("div",{className:"absolute -bottom-2 -right-2 bg-green-500 text-white text-xs px-2 py-1 rounded",children:"アプリ"})]})}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 bg-green-800 bg-opacity-50 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(sN,{className:"w-5 h-5 text-yellow-400"}),(0,s.jsx)("span",{className:"text-gray-200",children:"費用"})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("div",{className:"text-xl font-bold text-green-400",children:"月額4,500円"}),(0,s.jsxs)("div",{className:"text-sm text-gray-300",children:["→ 年","年54,000円"]})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 bg-green-800 bg-opacity-50 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(t2.Clock,{className:"w-5 h-5 text-blue-400"}),(0,s.jsx)("span",{className:"text-gray-200",children:"時間"})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("div",{className:"text-xl font-bold text-green-400",children:"1日10分"}),(0,s.jsxs)("div",{className:"text-sm text-gray-300",children:["→ ","月6〜8時間"]})]})]}),(0,s.jsx)("div",{className:"text-xs text-gray-200 p-3 bg-green-800 bg-opacity-30 rounded-lg",children:"毎日10分のトラッキング＋アドバイス"})]}),(0,s.jsx)("button",{onClick:()=>t(!0),className:"absolute -bottom-4 -right-4 w-16 h-16 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-105",children:(0,s.jsxs)("span",{className:"text-white text-xs font-bold text-center leading-tight",children:["入会手続きは",(0,s.jsx)("br",{}),"こちら"]})})]})]}),(0,s.jsx)("div",{className:"flex justify-center mb-12",children:(0,s.jsx)("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:(0,s.jsx)(sw,{className:"w-8 h-8 text-white"})})}),(0,s.jsxs)("div",{className:"bg-gray-800 rounded-xl p-8 mb-12",children:[(0,s.jsx)("h3",{className:"text-2xl font-bold text-center mb-8 text-green-400",children:"イフゼンで学ぶ3つのメリット"}),(0,s.jsx)("div",{className:"grid md:grid-cols-3 gap-6",children:r.map((e,t)=>(0,s.jsxs)("div",{className:"bg-gray-700 rounded-lg p-6 text-center",children:[(0,s.jsx)("div",{className:"flex justify-center mb-4",children:e.icon}),(0,s.jsx)("h4",{className:"text-lg font-semibold mb-3 text-white",children:e.title}),(0,s.jsx)("p",{className:"text-gray-300 text-sm",children:e.description})]},t))})]}),(0,s.jsxs)("div",{className:"bg-gray-800 rounded-xl p-8",children:[(0,s.jsx)("h3",{className:"text-2xl font-bold text-center mb-8",children:"詳細比較"}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b border-gray-700",children:[(0,s.jsx)("th",{className:"text-left py-4 px-6 text-gray-300",children:"項目"}),(0,s.jsx)("th",{className:"text-center py-4 px-6 text-blue-400",children:"本で学ぶ場合"}),(0,s.jsx)("th",{className:"text-center py-4 px-6 text-green-400",children:"イフゼンで学ぶ場合"})]})}),(0,s.jsxs)("tbody",{className:"text-sm",children:[(0,s.jsxs)("tr",{className:"border-b border-gray-700",children:[(0,s.jsx)("td",{className:"py-4 px-6 text-gray-300",children:"初期費用"}),(0,s.jsx)("td",{className:"py-4 px-6 text-center text-red-400",children:"20,000〜40,000円"}),(0,s.jsx)("td",{className:"py-4 px-6 text-center text-green-400",children:"月額4,500円"})]}),(0,s.jsxs)("tr",{className:"border-b border-gray-700",children:[(0,s.jsx)("td",{className:"py-4 px-6 text-gray-300",children:"学習時間"}),(0,s.jsx)("td",{className:"py-4 px-6 text-center text-red-400",children:"80〜150時間"}),(0,s.jsx)("td",{className:"py-4 px-6 text-center text-green-400",children:"1日10分"})]}),(0,s.jsxs)("tr",{className:"border-b border-gray-700",children:[(0,s.jsx)("td",{className:"py-4 px-6 text-gray-300",children:"知識の鮮度"}),(0,s.jsx)("td",{className:"py-4 px-6 text-center text-yellow-400",children:"出版時点"}),(0,s.jsx)("td",{className:"py-4 px-6 text-center text-green-400",children:"常に最新"})]}),(0,s.jsxs)("tr",{className:"border-b border-gray-700",children:[(0,s.jsx)("td",{className:"py-4 px-6 text-gray-300",children:"実践との連動"}),(0,s.jsx)("td",{className:"py-4 px-6 text-center text-yellow-400",children:"別途実装必要"}),(0,s.jsx)("td",{className:"py-4 px-6 text-center text-green-400",children:"自動連動"})]}),(0,s.jsxs)("tr",{className:"border-b border-gray-700",children:[(0,s.jsx)("td",{className:"py-4 px-6 text-gray-300",children:"進捗管理"}),(0,s.jsx)("td",{className:"py-4 px-6 text-center text-yellow-400",children:"手動"}),(0,s.jsx)("td",{className:"py-4 px-6 text-center text-green-400",children:"自動"})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"py-4 px-6 text-gray-300",children:"カスタマイズ性"}),(0,s.jsx)("td",{className:"py-4 px-6 text-center text-yellow-400",children:"限定的"}),(0,s.jsx)("td",{className:"py-4 px-6 text-center text-green-400",children:"高い"})]})]})]})})]})]}),e&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-gray-800 rounded-xl p-8 max-w-md w-full",children:[(0,s.jsx)("h3",{className:"text-2xl font-bold text-center mb-6 text-green-400",children:"イフゼンに参加する"}),(0,s.jsx)("div",{className:"space-y-4 mb-6",children:(0,s.jsxs)("div",{className:"bg-green-900 bg-opacity-30 rounded-lg p-4",children:[(0,s.jsx)("h4",{className:"text-lg font-semibold text-green-400 mb-2",children:"プレミアムプラン"}),(0,s.jsxs)("div",{className:"text-3xl font-bold text-white mb-2",children:["¥4,500",(0,s.jsx)("span",{className:"text-lg text-gray-400",children:"/月"})]}),(0,s.jsxs)("ul",{className:"text-sm text-gray-300 space-y-1",children:[(0,s.jsx)("li",{children:"• 全機能へのアクセス"}),(0,s.jsx)("li",{children:"• 無制限の習慣管理"}),(0,s.jsx)("li",{children:"• 詳細な統計データ"}),(0,s.jsx)("li",{children:"• プライオリティサポート"}),(0,s.jsx)("li",{children:"• データ同期"})]})]})}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("button",{onClick:()=>t(!1),className:"flex-1 px-4 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"キャンセル"}),(0,s.jsx)("button",{onClick:()=>{t(!1)},className:"flex-1 px-4 py-3 bg-gradient-to-r from-green-500 to-blue-600 text-white rounded-lg hover:from-green-600 hover:to-blue-700 transition-all duration-200 font-semibold",children:"今すぐ始める"})]})]})})]})}var sA=e.i(59682);function sS(){let{currentTab:e,setCurrentTab:t}=(0,x.useNavigationStore)(),[r,l]=(0,a.useState)(!1);return(0,s.jsx)("div",{className:"min-h-screen bg-gray-900 flex justify-center",children:(0,s.jsxs)("div",{className:"w-full max-w-sm bg-gray-900 flex flex-col h-screen",children:[(0,s.jsx)("main",{className:"flex-1 overflow-y-auto",children:(()=>{if(r)return(0,s.jsx)(sv.default,{onBack:()=>l(!1)});switch(e){case"home":default:return(0,s.jsx)(t5,{onShowResult:()=>l(!0)});case"record":return(0,s.jsx)(t7,{});case"habit-setting":return(0,s.jsx)(sb,{});case"time-attack":return(0,s.jsx)(sy,{});case"my-routine":return(0,s.jsx)(sj,{});case"knowledge-comparison":return(0,s.jsx)(sk,{});case"gift-donation":return(0,s.jsx)(sA.default,{})}})()}),(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)(h,{})})]})})}},15546,e=>{e.n(e.i(18540))}]);