# 機能実装状況

> 更新日: 2025-01-27
> 目的: 既存アプリとの比較で不足していた機能の実装状況を記録

---

## ✅ 既に実装済みの機能

### 1. 日次体重記録機能
- **実装状況**: ✅ 実装済み
- **場所**: `InputScreen.tsx` (481-541行目)
- **機能**: 体重・体脂肪率の日次記録、BMI計算表示
- **備考**: 毎日測る必要はない（オプション）

### 2. グラフ表示機能
- **実装状況**: ✅ 実装済み
- **場所**: 
  - `StatsScreen.tsx`: 統計・グラフ表示画面
  - `NutrientTrendChart.tsx`: 栄養素推移グラフ（目標値との比較表示あり）
  - `WeightTrendChart.tsx`: 体重推移グラフ
- **機能**: 日次・週次・月次の栄養素・体重推移グラフ、目標値との比較表示
- **アクセス**: 
  - LabsScreenからアクセス可能
  - HomeScreenに「📈 統計・グラフ」ボタンを追加（実装済み）

### 3. 体脂肪率記録機能
- **実装状況**: ✅ 実装済み
- **場所**: `InputScreen.tsx` (481-541行目)
- **機能**: 体脂肪率の日次記録

---

## ⚠️ 実装が必要な機能

### 4. バーコード読み取り
- **実装状況**: ❌ 未実装
- **優先度**: 高
- **実装方法**: 
  - Web API: `BarcodeDetector` API（Chrome/Edge対応）
  - ライブラリ: `@zxing/library`（フォールバック）
  - カメラアクセス: `getUserMedia` API

### 5. 写真解析の完全実装
- **実装状況**: ⚠️ 部分実装（モック）
- **優先度**: 高
- **実装方法**: 
  - Gemini Vision API統合
  - 食品の自動識別と栄養素計算
  - 現在: `HomeScreen.tsx` (682-699行目) に写真アップロード機能あり

### 6. レシピ登録・保存
- **実装状況**: ❌ 未実装
- **優先度**: 中
- **実装方法**: 
  - よく食べる組み合わせをレシピとして保存
  - レシピから一括で食事記録

### 7. データインポート機能
- **実装状況**: ❌ 未実装
- **優先度**: 中
- **実装方法**: 
  - JSON形式でのデータインポート
  - データのバックアップと復元
  - 現在: `DataExportScreen.tsx` にエクスポート機能あり

### 8. ウェアラブルデバイス連携
- **実装状況**: ❌ 未実装
- **優先度**: 中
- **実装方法**: 
  - Apple Health連携（Webアプリでは難しい）
  - Google Fit連携（Webアプリでは難しい）
  - **備考**: Webアプリでは実装が難しいため、モバイルアプリ（Expo）での実装を検討

### 9. 睡眠記録の強化
- **実装状況**: ⚠️ 部分実装
- **優先度**: 中
- **実装方法**: 
  - 睡眠時間の記録機能（現在は睡眠スコアのみ）
  - 睡眠の質の詳細記録
  - 現在: `InputScreen.tsx` (414-430行目) に睡眠スコア記録あり

---

## 実装優先順位

### 最優先（リリース前に実装すべき）
1. ✅ 日次体重記録機能（実装済み）
2. ✅ グラフ表示機能の強化（実装済み）
3. バーコード読み取り
4. 写真解析の完全実装

### 優先度: 中（リリース後でも対応可能だが、あると良い）
5. レシピ登録・保存
6. ✅ 体脂肪率記録（実装済み）
7. データインポート機能
8. ウェアラブルデバイス連携（Webアプリでは難しい）
9. 睡眠記録の強化

---

## 次のステップ

1. **バーコード読み取り機能の実装**
   - `BarcodeDetector` APIの実装
   - カメラアクセスの実装
   - 栄養情報の取得（Open Food Facts API等）

2. **写真解析の完全実装**
   - Gemini Vision API統合
   - 食品の自動識別と栄養素計算

3. **レシピ登録・保存機能の実装**
   - レシピデータ構造の定義
   - レシピ保存・読み込み機能
   - レシピから一括で食事記録

4. **データインポート機能の実装**
   - JSON形式でのデータインポート
   - データのバックアップと復元

5. **睡眠記録の強化**
   - 睡眠時間の記録機能
   - 睡眠の質の詳細記録

---

## 参考資料

- `MISSING_FEATURES_COMPARISON.md`: 既存アプリとの比較で不足していた機能リスト
- `WEIGHT_TRACKING_DECISION.md`: 体重記録機能に関する判断

