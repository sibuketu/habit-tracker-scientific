# Primal Logic Web App - テストガイド

> 最終更新: 2025-12-18

---

## 🚀 開発サーバー起動

```powershell
cd "C:\Users\susam\Downloads\新しいフォルダー\docs\primal-logic-app\primal-logic-web"
npm run dev
```

ブラウザで `http://localhost:5174` を開く（ポート番号注意）

---

## ✅ 動作確認チェックリスト

### 1. 基本動作
- [ ] アプリが起動する（エラーが表示されない）
- [ ] ナビゲーション（Home, Input, History, Profile）が動作する
- [ ] 画面遷移がスムーズ

### 2. Home画面
- [ ] ログがない場合: "No logs yet" が表示される
- [ ] ログがある場合: 栄養素ゲージが表示される
  - [ ] Vitamin Cゲージ
  - [ ] Vitamin Kゲージ
  - [ ] Ironゲージ
  - [ ] Sodiumゲージ
  - [ ] Fiberゲージ
  - [ ] Net Carbsゲージ
- [ ] ゲージをタップするとArgument Cardが表示される
- [ ] Argument Cardの3-tier表示が動作する（Level 1 → 2 → 3）

### 3. 日次入力機能（Home画面内）
- [ ] Status入力が動作する（Home画面からアクセス）
  - [ ] Sleep Score（0-10）
  - [ ] Sun Exposure（分単位）
  - [ ] Activity Level（low/medium/high）
- [ ] 食品検索が動作する（2文字以上で候補表示）
- [ ] 食品追加が動作する（「+ 食品を追加」ボタン）
- [ ] 追加した食品がリストに表示される
- [ ] "Save Daily Status"ボタンで保存できる
- [ ] 違反食品（trash/fiber/carbs）を追加するとRecovery Protocolが生成される

### 4. History画面（履歴画面）
- [ ] ログ一覧が表示される（新しい順）
- [ ] ログアイテムをタップすると詳細が展開される（アコーディオン形式）
- [ ] 展開アイコン（▶/▼）が正しく表示される
- [ ] 削除ボタン（🗑️）が表示される
- [ ] 削除ボタンをクリックすると確認ダイアログが表示される
- [ ] 削除が正常に動作する
- [ ] 削除履歴が正しく反映される
- [ ] 栄養素メトリクスをタップするとArgument Cardが表示される
  - [ ] Vitamin C
  - [ ] Vitamin K
  - [ ] Iron
  - [ ] Sodium
  - [ ] Fiber
- [ ] Recovery Protocolが表示される（該当する場合）
- [ ] 空状態（ログがない場合）が正しく表示される

### 5. Profile画面
- [ ] プロファイル設定が表示される
  - [ ] 体重設定
  - [ ] 活動レベル設定
  - [ ] 代謝状態設定
- [ ] 設定を変更して保存できる
- [ ] 設定が正しく読み込まれる（ページリロード後も保持）

### 6. データ永続化
- [ ] 日次ログが保存される（localStorage）
- [ ] ページリロード後もデータが保持される
- [ ] プロファイル設定が保存される
- [ ] 削除したログが正しく削除される

### 7. 日記機能（新規追加）
- [ ] 日次入力機能に「日記」セクションが表示される
- [ ] テキストエリアに入力できる
- [ ] 日記を入力すると自動保存される
- [ ] ページリロード後も日記が保持される

### 8. AIチャット機能
- [ ] AI Speed Dialボタンが表示される
- [ ] チャット画面が開く
- [ ] 初期表示時にTipsカードが表示される
- [ ] 質問を入力して送信できる
- [ ] AIの回答が表示される
- [ ] ローディング中にTipsカードが表示される
- [ ] AI回答後もTipsカードが表示される
- [ ] 「次のTipsを見る」ボタンで別のTipsに切り替わる
- [ ] 星アイコンでお気に入りに保存できる（保存後は⭐、未保存は☆）
- [ ] Tipsがランダムに表示される（同じTipsが続けて表示されない）
- [ ] Todoカードが表示される（該当する場合）
- [ ] Todoの「実行」ボタンが動作する

### 9. ButcherSelect（食品追加画面）
- [ ] 「+ 食品を追加」ボタンで画面が開く
- [ ] 真っ白にならない（エラーが発生しない）
- [ ] 動物選択（牛・豚・鶏など）が動作する
- [ ] 部位選択が動作する
- [ ] 量の入力が動作する
- [ ] 食品追加ボタンが動作する

### 10. エラーハンドリング（Cursorが自動確認）
- [ ] 不正な入力でエラーが発生しない
- [ ] 空の状態でエラーが発生しない
- [ ] ブラウザコンソールにエラーが表示されない（Cursorが自動確認）
- [ ] ButcherSelectでfeatureDisplaySettingsエラーが発生しない

**注意**: ブラウザコンソールのエラー確認は、実装完了時にCursorが自動的に`read_lints`ツールを使用して確認します。ユーザーが手動で確認する必要はありません。

---

## 🐛 既知の問題・注意点

### 開発サーバー起動時の注意
- PowerShellのパス問題がある場合は、絶対パスで起動してください
- ポート5173が既に使用されている場合は、別のポートが自動的に割り当てられます

### ブラウザ対応
- Chrome/Edge推奨
- Safari（iOS）でも動作しますが、PWA機能は制限される場合があります

---

## 📊 テスト結果記録

### テスト日: ___________

#### 基本動作
- [ ] 起動: OK / NG
- [ ] ナビゲーション: OK / NG

#### 各画面
- [ ] Home: OK / NG
- [ ] Input: OK / NG
- [ ] History: OK / NG
- [ ] Profile: OK / NG

#### 機能
- [ ] データ保存: OK / NG
- [ ] データ読み込み: OK / NG
- [ ] 削除機能: OK / NG
- [ ] Argument Card: OK / NG

#### 発見した問題
1. _________________________________
2. _________________________________
3. _________________________________

---

最終更新: 2025-12-18

