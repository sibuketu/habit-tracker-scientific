# 失敗したテストの確認方法

> Visual Regression Testで失敗したテストの詳細を確認する方法

---

## 📊 現在の状況

- **全テスト**: 54件
- **成功**: 25件 ✅
- **失敗**: 29件 ❌

---

## 🔍 失敗したテストの確認方法

### 手順

1. **失敗したテスト（赤い❌マーク）をクリック**
   - 左側のリストから、❌マークが付いているテストを探す
   - 例: "栄養素ゲージ - 詳細表示 chromium" など

2. **エラーメッセージを確認**
   - クリックすると、エラーメッセージが表示されます
   - 例: "Screenshot mismatch" など

3. **差分画像を確認**
   - エラーメッセージの下に、差分画像が表示される場合があります
   - 左: 期待される画像（expected）
   - 右: 実際の画像（actual）
   - 中央: 差分画像（diff）

4. **スクリーンショットを撮る**
   - Windowsキー + Shift + S（Snipping Tool）
   - エラーメッセージと差分画像をスクリーンショットで撮る
   - チャットに貼り付け

---

## 🎯 確認すべき情報

### 最低限必要な情報

1. **失敗したテストの名前**
   - 例: "栄養素ゲージ - 詳細表示 chromium"

2. **エラーメッセージ**
   - 例: "Screenshot mismatch: 150 pixels difference"

3. **差分画像**（あれば）
   - どの部分が異なっているか

### より詳しい情報（推奨）

1. **複数の失敗したテストの例**
   - 3-5個の失敗したテストの詳細
   - パターンを確認できる

2. **成功したテストとの比較**
   - 同じ画面で、chromiumは成功、firefoxは失敗など
   - ブラウザ固有の問題かどうか

---

## 🔧 よくある失敗の原因

### 1. ベースラインが不完全
- **症状**: 一部のブラウザ・画面のベースラインが作成されていない
- **対処**: 再度 `npm run test:visual:update` を実行

### 2. UIが実際に変更されている
- **症状**: 意図的にUIを変更した
- **対処**: ベースラインを更新（`npm run test:visual:update`）

### 3. タイミングの問題
- **症状**: アニメーションやローディングのタイミングが異なる
- **対処**: テストコードの待機時間を調整

### 4. ブラウザ固有の描画の違い
- **症状**: 同じ画面で、chromiumは成功、firefoxは失敗
- **対処**: ブラウザ固有の許容誤差を調整

---

## 📝 次のステップ

1. **失敗したテストを3-5個選んでクリック**
2. **エラーメッセージと差分画像をスクリーンショットで撮る**
3. **チャットに貼り付け**

これで、失敗の原因を特定して修正案を提案できます。

---

最終更新: 2026-01-03

