# Geminiに送るプロンプト（コピペ用）

以下のプロンプトをGeminiに送信してください：

---

# カメラ機能統合の要件定義依頼

## プロジェクト概要

**Primal Logic** - 世界一のカーニボアダイエット管理アプリ（PWA、React + TypeScript）

現在、カメラ機能（写真から追加・バーコード読み取り）を1つのボタンに統合したいと考えています。他アプリのパターンを調査し、最適な実装方法を決定したいです。

## 現在の実装状況

### 問題点
- `window.confirm`で「写真から追加」か「バーコード読み取り」かを選択（UXが悪い）
- モバイルで使いにくい
- 他アプリのベストプラクティスに沿っていない

### 現在のコード
```typescript
// HomeScreen.tsx
<button onClick={async () => {
  const action = window.confirm('写真から追加しますか？\n\n「OK」: 写真から追加\n「キャンセル」: バーコード読み取り');
  if (action) {
    // 写真から追加（Gemini APIで解析）
  } else {
    // バーコード読み取り（BarcodeScannerModal）
  }
}}>
  📷
</button>
```

## 他アプリのパターン

1. **MyFitnessPal**: 写真とバーコードを別ボタンに分けている
2. **Lifesum**: 1つのボタンで、カメラ起動後にアクションシート/ボトムシートで選択
3. **Noom**: カメラ起動後、自動的にバーコードを検出し、なければ写真として処理
4. **Amazon/楽天**: カメラ起動後、自動的にバーコードを検出、検出できなければ写真として処理
5. **Google Lens**: カメラ起動後、自動的にバーコード/テキスト/画像を検出

## 実装方法の選択肢

### 選択肢A: アクションシート/ボトムシート
- カメラ起動前に、アクションシートで「写真から追加」「バーコード読み取り」を選択
- メリット: モバイルで使いやすい、明確な選択
- デメリット: 1回のタップが増える

### 選択肢B: 自動検出（推奨候補）
- カメラ起動後、自動的にバーコードを検出。検出できればバーコード処理、できなければ写真処理
- メリット: ユーザーの操作が少ない、スムーズな体験
- デメリット: バーコード検出の精度に依存

### 選択肢C: カメラ起動後のモード選択
- カメラ起動後、画面上に「写真」「バーコード」ボタンを表示
- メリット: 視覚的に分かりやすい
- デメリット: UIが複雑になる

### 選択肢D: 別ボタンに分ける
- 写真ボタンとバーコードボタンを別々に配置
- メリット: 明確、他アプリ（MyFitnessPal）のパターン
- デメリット: UIが複雑になる、ボタンが増える

## 技術スタック

- React (Vite) + TypeScript
- PWA（Progressive Web App）
- 写真解析: Gemini API（`analyzeFoodImage`）
- バーコード読み取り: `BarcodeScannerModal`コンポーネント（既存、`scanBarcodeFromCamera`関数を使用）
- カメラ起動: HTML5 `<input type="file" accept="image/*" capture="environment">`

## UI/UX要件

- **デザイン**: スティーブ・ジョブズ風ミニマルデザイン
- **モバイルファースト**: スマホ（iPhone 15幅）で完璧に動作
- **ボタンサイズ**: 44px × 44px（タッチフレンドリー）
- **現在のボタン**: 📷アイコン、グレー背景（`#f3f4f6`）

## 制約条件

- PWAのため、ブラウザAPIの制限がある
- iOS Safari、Chrome Mobileでの動作を保証
- ブラウザのカメラ権限が必要

## 質問

1. **実装方法の推奨**: 選択肢A-Dのうち、どれが最適か？理由は？
2. **自動検出の実装**: バーコードの自動検出を実装する場合、どのような技術を使うべきか？（Web BarcodeDetector API、QuaggaJS、ZXingなど）
3. **アクションシート/ボトムシートの実装**: PWAでアクションシート/ボトムシートを実装する場合、どのような方法が最適か？（カスタムコンポーネント、Headless UI、Radix UIなど）
4. **UXの最適化**: ユーザー体験を最適化するために、どのような工夫ができるか？
5. **他アプリのパターン**: 他アプリのパターンを参考に、さらに改善できる点はあるか？
6. **実装の優先順位**: Phase 1（アクションシート/ボトムシート）、Phase 2（自動検出機能）、Phase 3（UXの最適化）の具体的な実装内容は？

## 期待する出力

1. **推奨実装方法**: 選択肢A-Dのうち、どれを選ぶべきか、理由とともに
2. **技術的な実装方法**: 具体的なコード例やライブラリの推奨
3. **UI/UX設計**: アクションシート/ボトムシートのデザイン案
4. **実装の優先順位**: Phase 1-3の具体的な実装内容
5. **他アプリとの比較**: 他アプリのパターンを参考にした改善案

## 補足

- **アイデア創造56技法**: 技法39「促進の要因」を使って、UXデザイナー、フロントエンドエンジニア、プロダクトマネージャーの視点で分析してください
- **余計なくらい情報を送りたい**: 可能な限り詳細な情報、複数の選択肢、具体的な実装方法を提示してください
- **推奨順**: 複数の選択肢を提示する場合は、推奨順で上から並べてください

---

**重要**: このプロンプトをGeminiに送る際は、上記の内容をそのままコピー&ペーストしてください。

